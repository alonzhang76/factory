<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Áîü‰∫ßÁÆ°ÁêÜÁ≥ªÁªü - Áîü‰∫ßËÆ°Âàí‰∏éËøõÂ∫¶Ë∑üË∏™</title>
    <!-- Tailwind CSS v3 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <!-- Áªü‰∏ÄÁöÑ Tailwind ÈÖçÁΩÆ -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1e40af', // ‰∏ì‰∏öËìùËâ≤Ë∞É
                        secondary: '#64748b',
                        success: '#10b981', // ÁªøËâ≤-ÂÆåÊàê
                        warning: '#f59e0b', // ÈªÑËâ≤-ËøõË°å‰∏≠
                        danger: '#ef4444',  // Á∫¢Ëâ≤-Âª∂ËØØ
                        light: '#f3f4f6',
                        dark: '#1f2937'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    boxShadow: {
                        card: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
                        'card-hover': '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .transition-all-300 {
                transition: all 300ms ease-in-out;
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
            .kanban-column {
                min-height: 500px;
            }
            .kanban-card {
                cursor: grab;
                transition: all 0.2s ease;
            }
            .kanban-card:active {
                cursor: grabbing;
            }
            .kanban-card:hover {
                transform: translateY(-2px);
            }

            /* ‰æßËæπÊ†èÁ≠æÂêçÊ†∑Âºè */
            .sidebar-signature {
                position: absolute;
                bottom: 20px;
                left: 0;
                right: 0;
                padding: 0 20px;
                text-align: center;
                font-style: italic;
                color: rgba(255, 255, 255, 0.8);
                font-size: 0.9em;
                line-height: 1.5;
                font-family: 'Comic Sans MS', cursive, sans-serif;
            }

        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <div class="flex h-screen overflow-hidden">
        <!-- Â∑¶‰æßÂØºËà™Ê†è -->
        <aside class="bg-primary text-white w-64 flex-shrink-0 hidden md:block relative">
            <div class="p-4 border-b border-blue-700">
                <h1 class="text-xl font-bold flex items-center">
                    <i class="fa fa-industry mr-2"></i>
                    Áîü‰∫ßÁÆ°ÁêÜÁ≥ªÁªü
                </h1>
                <p class="text-xs text-blue-200 mt-1">Áîü‰∫ßËÆ°Âàí‰∏éËøõÂ∫¶Ë∑üË∏™</p>
            </div>
            <nav class="mt-4">
                <ul>
                    <li>
                        <a href="#dashboard" class="flex items-center px-4 py-3 bg-blue-800 border-l-4 border-yellow-500" data-target="dashboard">
                            <i class="fa fa-tachometer w-6"></i>
                            <span>Áîü‰∫ßÁúãÊùø</span>
                        </a>
                    </li>
                    <li>
                        <a href="#orders" class="flex items-center px-4 py-3 hover:bg-blue-800 transition-all-300" data-target="orders">
                            <i class="fa fa-file-text-o w-6"></i>
                            <span>ËÆ¢ÂçïÁÆ°ÁêÜ</span>
                        </a>
                    </li>
                    <li>
                        <a href="#schedule" class="flex items-center px-4 py-3 hover:bg-blue-800 transition-all-300" data-target="schedule">
                            <i class="fa fa-calendar w-6"></i>
                            <span>‰∫∫ÂëòÊéíÁè≠</span>
                        </a>
                    </li>
                    <li>
                        <a href="#processes" class="flex items-center px-4 py-3 hover:bg-blue-800 transition-all-300" data-target="processes">
                            <i class="fa fa-cogs w-6"></i>
                            <span>Â∑•Â∫èËßÑÂàí</span>
                        </a>
                    </li>

                </ul>
            </nav>
            <div class="sidebar-signature">
                <div>Designed By AlonZhang</div>
                <div>ËÅîÁ≥ªÔºö136 6511 9291</div>
            </div>
        </aside>

        <!-- ÁßªÂä®Á´ØÂØºËà™ÊåâÈíÆ -->
        <div class="md:hidden fixed bottom-4 right-4 z-50">
            <button id="mobile-nav-toggle" class="bg-primary text-white p-3 rounded-full shadow-lg">
                <i class="fa fa-bars"></i>
            </button>
        </div>

        <!-- ÁßªÂä®Á´ØÂØºËà™ËèúÂçï -->
        <div id="mobile-nav" class="fixed inset-0 bg-gray-900 bg-opacity-50 z-40 hidden md:hidden">
            <div class="bg-primary text-white w-64 h-full overflow-y-auto transform transition-transform duration-300 -translate-x-full" id="mobile-nav-content">
                <div class="p-4 border-b border-blue-700 flex justify-between items-center">
                    <h1 class="text-xl font-bold">Áîü‰∫ßÁÆ°ÁêÜÁ≥ªÁªü</h1>
                    <button id="mobile-nav-close" class="text-white">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
                <nav class="mt-4">
                    <ul>
                        <li>
                            <a href="#dashboard" class="flex items-center px-4 py-3 bg-blue-800 border-l-4 border-yellow-500" data-target="dashboard">
                                <i class="fa fa-tachometer w-6"></i>
                                <span>Áîü‰∫ßÁúãÊùø</span>
                            </a>
                        </li>
                        <li>
                            <a href="#orders" class="flex items-center px-4 py-3 hover:bg-blue-800 transition-all-300" data-target="orders">
                                <i class="fa fa-file-text-o w-6"></i>
                                <span>ËÆ¢ÂçïÁÆ°ÁêÜ</span>
                            </a>
                        </li>
                        <li>
                            <a href="#schedule" class="flex items-center px-4 py-3 hover:bg-blue-800 transition-all-300" data-target="schedule">
                                <i class="fa fa-calendar w-6"></i>
                                <span>‰∫∫ÂëòÊéíÁè≠</span>
                            </a>
                        </li>
                        <li>
                            <a href="#processes" class="flex items-center px-4 py-3 hover:bg-blue-800 transition-all-300" data-target="processes">
                                <i class="fa fa-cogs w-6"></i>
                                <span>Â∑•Â∫èËßÑÂàí</span>
                            </a>
                        </li>

                    </ul>
                </nav>
            </div>
        </div>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
        <main class="flex-1 overflow-y-auto bg-gray-50">
            <!-- È°∂ÈÉ®Áä∂ÊÄÅÊ†è -->
            <header class="bg-white shadow-sm">
                <div class="flex justify-between items-center px-4 py-3">
                    <div class="flex items-center">
                        <button id="sidebar-toggle" class="mr-4 text-gray-600 md:hidden">
                            <i class="fa fa-bars"></i>
                        </button>
                        <h2 id="page-title" class="text-lg font-semibold text-gray-800">Áîü‰∫ßÁúãÊùø</h2>
                    </div>

                </div>
            </header>

            <!-- È°µÈù¢ÂÜÖÂÆπÂå∫ -->
            <div class="p-4 md:p-6">
                <!-- Áîü‰∫ßÁúãÊùøÈ°µÈù¢ -->
                <div id="dashboard-page" class="page-content">
                    <!-- ÁªüËÆ°Âç°Áâá -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                        <div class="bg-white rounded-lg shadow-card p-4">
                            <div class="flex items-center">
                                <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-primary">
                                    <i class="fa fa-file-text-o fa-lg"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-500">ÂæÖÁîü‰∫ßËÆ¢Âçï</p>
                                    <p class="text-2xl font-semibold">12</p>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">ÊÄªËÆ°</span>
                                    <span class="font-medium">28</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mt-1">
                                    <div class="bg-primary h-2 rounded-full" style="width: 42.8%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow-card p-4">
                            <div class="flex items-center">
                                <div class="w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center text-warning">
                                    <i class="fa fa-spinner fa-lg"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-500">Áîü‰∫ß‰∏≠ËÆ¢Âçï</p>
                                    <p class="text-2xl font-semibold">8</p>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">ÊÄªËÆ°</span>
                                    <span class="font-medium">28</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mt-1">
                                    <div class="bg-warning h-2 rounded-full" style="width: 28.5%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow-card p-4">
                            <div class="flex items-center">
                                <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-success">
                                    <i class="fa fa-check-circle fa-lg"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm text-gray-500">Â∑≤ÂÆåÊàêËÆ¢Âçï</p>
                                    <p class="text-2xl font-semibold">6</p>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-500">ÊÄªËÆ°</span>
                                    <span class="font-medium">28</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mt-1">
                                    <div class="bg-success h-2 rounded-full" style="width: 21.4%"></div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- ÁúãÊùøÁ≠õÈÄâÂô® -->
                    <div class="bg-white rounded-lg shadow-card p-4 mb-6">
                        <div class="flex flex-wrap items-center justify-between">
                            <h3 class="text-lg font-semibold mb-2 md:mb-0">Áîü‰∫ßÁúãÊùø</h3>
                            <div class="flex flex-wrap gap-2">
                                <select id="orderFilter" class="border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                                    <option value="all">ÊâÄÊúâËÆ¢Âçï</option>
                                </select>
                                <select id="productFilter" class="border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                                    <option value="all">ÊâÄÊúâ‰∫ßÂìÅ</option>
                                </select>
                                <select id="customerFilter" class="border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                                    <option value="all">ÊâÄÊúâÂÆ¢Êà∑</option>
                                </select>
                                <button id="filterButton" class="bg-primary text-white px-4 py-2 rounded-md text-sm hover:bg-blue-800 transition-all-300">
                                    <i class="fa fa-filter mr-1"></i> Á≠õÈÄâ
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- ÁúãÊùøËßÜÂõæ -->
                    <div class="flex overflow-x-auto pb-4 scrollbar-hide">
                        <!-- ÂæÖÁîü‰∫ßÂàó -->
                        <div class="kanban-column flex-shrink-0 w-72 mr-4 bg-gray-100 rounded-lg p-3">
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="font-medium flex items-center">
                                    <span class="w-3 h-3 rounded-full bg-gray-400 mr-2"></span>
                                    ÂæÖÁîü‰∫ß
                                </h4>
                                <span class="bg-white text-gray-800 text-xs font-medium px-2 py-1 rounded-full">12</span>
                            </div>
                            <div class="space-y-3">
                                <!-- ËÆ¢ÂçïÂç°Áâá -->
                                <div class="kanban-card bg-white rounded-lg shadow-card p-3 border-l-4 border-gray-400">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h5 class="font-medium">ËÆ¢Âçï #ORD-2025-0015</h5>
                                            <p class="text-sm text-gray-500 mt-1">ÂÆ¢Êà∑: ‰∏äÊµ∑ÁßëÊäÄÊúâÈôêÂÖ¨Âè∏</p>
                                            <p class="text-sm text-gray-500">‰∫ßÂìÅ: È´òÁ≤æÂ∫¶‰º†ÊÑüÂô®</p>
                                            <p class="text-sm text-gray-500">Êï∞Èáè: 50‰∏™</p>
                                        </div>
                                        <span class="bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded-full">È´ò‰ºòÂÖàÁ∫ß</span>
                                    </div>
                                    <div class="mt-3">
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-500">‰∫§Êúü: 2025-07-25</span>
                                            <span class="text-gray-500">Ââ©‰Ωô: 5Â§©</span>
                                        </div>
                                    </div>
                                    <div class="mt-3 flex justify-between">
                                        <span class="text-xs text-gray-500">Â∑•Â∫èËøõÂ∫¶: 0/23</span>
                                        <button class="text-primary text-xs hover:underline">Êü•ÁúãËØ¶ÊÉÖ</button>
                                    </div>
                                </div>
                                <div class="kanban-card bg-white rounded-lg shadow-card p-3 border-l-4 border-gray-400">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h5 class="font-medium">ËÆ¢Âçï #ORD-2025-0016</h5>
                                            <p class="text-sm text-gray-500 mt-1">ÂÆ¢Êà∑: Âåó‰∫¨Êô∫ËÉΩÂà∂ÈÄ†</p>
                                            <p class="text-sm text-gray-500">‰∫ßÂìÅ: ÊéßÂà∂ÁîµË∑ØÊùø</p>
                                            <p class="text-sm text-gray-500">Êï∞Èáè: 100‰∏™</p>
                                        </div>
                                        <span class="bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-1 rounded-full">‰∏≠‰ºòÂÖàÁ∫ß</span>
                                    </div>
                                    <div class="mt-3">
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-500">‰∫§Êúü: 2025-07-30</span>
                                            <span class="text-gray-500">Ââ©‰Ωô: 10Â§©</span>
                                        </div>
                                    </div>
                                    <div class="mt-3 flex justify-between">
                                        <span class="text-xs text-gray-500">Â∑•Â∫èËøõÂ∫¶: 0/23</span>
                                        <button class="text-primary text-xs hover:underline">Êü•ÁúãËØ¶ÊÉÖ</button>
                                    </div>
                                </div>
                                <div class="kanban-card bg-white rounded-lg shadow-card p-3 border-l-4 border-gray-400">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h5 class="font-medium">ËÆ¢Âçï #ORD-2025-0017</h5>
                                            <p class="text-sm text-gray-500 mt-1">ÂÆ¢Êà∑: ÂπøÂ∑ûÁîµÂ≠êÁßëÊäÄ</p>
                                            <p class="text-sm text-gray-500">‰∫ßÂìÅ: ÁîµÊ∫êÊ®°Âùó</p>
                                            <p class="text-sm text-gray-500">Êï∞Èáè: 75‰∏™</p>
                                        </div>
                                        <span class="bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full">‰Ωé‰ºòÂÖàÁ∫ß</span>
                                    </div>
                                    <div class="mt-3">
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-500">‰∫§Êúü: 2025-08-05</span>
                                            <span class="text-gray-500">Ââ©‰Ωô: 16Â§©</span>
                                        </div>
                                    </div>
                                    <div class="mt-3 flex justify-between">
                                        <span class="text-xs text-gray-500">Â∑•Â∫èËøõÂ∫¶: 0/23</span>
                                        <button class="text-primary text-xs hover:underline">Êü•ÁúãËØ¶ÊÉÖ</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Áîü‰∫ß‰∏≠Âàó -->
                        <div class="kanban-column flex-shrink-0 w-72 mr-4 bg-gray-100 rounded-lg p-3">
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="font-medium flex items-center">
                                    <span class="w-3 h-3 rounded-full bg-warning mr-2"></span>
                                    Áîü‰∫ß‰∏≠
                                </h4>
                                <span class="bg-white text-gray-800 text-xs font-medium px-2 py-1 rounded-full">8</span>
                            </div>
                            <div class="space-y-3">
                                <div class="kanban-card bg-white rounded-lg shadow-card p-3 border-l-4 border-warning">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h5 class="font-medium">ËÆ¢Âçï #ORD-2025-0010</h5>
                                            <p class="text-sm text-gray-500 mt-1">ÂÆ¢Êà∑: Ê∑±Âú≥Á≤æÂØÜÂà∂ÈÄ†</p>
                                            <p class="text-sm text-gray-500">‰∫ßÂìÅ: Êú∫Ê¢∞ÊâãËáÇÁªÑ‰ª∂</p>
                                            <p class="text-sm text-gray-500">Êï∞Èáè: 20‰∏™</p>
                                        </div>
                                        <span class="bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded-full">È´ò‰ºòÂÖàÁ∫ß</span>
                                    </div>
                                    <div class="mt-3">
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-500">‰∫§Êúü: 2025-07-22</span>
                                            <span class="text-gray-500">Ââ©‰Ωô: 2Â§©</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-1.5 mt-1">
                                            <div class="bg-warning h-1.5 rounded-full" style="width: 43%"></div>
                                        </div>
                                    </div>
                                    <div class="mt-3 flex justify-between">
                                        <span class="text-xs text-gray-500">Â∑•Â∫èËøõÂ∫¶: 10/23</span>
                                        <button class="text-primary text-xs hover:underline">Êü•ÁúãËØ¶ÊÉÖ</button>
                                    </div>
                                </div>
                                <div class="kanban-card bg-white rounded-lg shadow-card p-3 border-l-4 border-warning">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h5 class="font-medium">ËÆ¢Âçï #ORD-2025-0012</h5>
                                            <p class="text-sm text-gray-500 mt-1">ÂÆ¢Êà∑: Êù≠Â∑ûÁîµÂ≠êÁßëÊäÄ</p>
                                            <p class="text-sm text-gray-500">‰∫ßÂìÅ: ÊòæÁ§∫Â±èÁªÑ‰ª∂</p>
                                            <p class="text-sm text-gray-500">Êï∞Èáè: 150‰∏™</p>
                                        </div>
                                        <span class="bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-1 rounded-full">‰∏≠‰ºòÂÖàÁ∫ß</span>
                                    </div>
                                    <div class="mt-3">
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-500">‰∫§Êúü: 2025-07-28</span>
                                            <span class="text-gray-500">Ââ©‰Ωô: 8Â§©</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-1.5 mt-1">
                                            <div class="bg-warning h-1.5 rounded-full" style="width: 26%"></div>
                                        </div>
                                    </div>
                                    <div class="mt-3 flex justify-between">
                                        <span class="text-xs text-gray-500">Â∑•Â∫èËøõÂ∫¶: 6/23</span>
                                        <button class="text-primary text-xs hover:underline">Êü•ÁúãËØ¶ÊÉÖ</button>
                                    </div>
                                </div>
                                <div class="kanban-card bg-white rounded-lg shadow-card p-3 border-l-4 border-danger">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h5 class="font-medium">ËÆ¢Âçï #ORD-2025-0008</h5>
                                            <p class="text-sm text-gray-500 mt-1">ÂÆ¢Êà∑: ÊàêÈÉΩÁßëÊäÄÊúâÈôêÂÖ¨Âè∏</p>
                                            <p class="text-sm text-gray-500">‰∫ßÂìÅ: ‰º†ÊÑüÂô®Ê®°Âùó</p>
                                            <p class="text-sm text-gray-500">Êï∞Èáè: 80‰∏™</p>
                                        </div>
                                        <span class="bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded-full">Âª∂Êúü</span>
                                    </div>
                                    <div class="mt-3">
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-500">‰∫§Êúü: 2025-07-20</span>
                                            <span class="text-danger font-medium">Â∑≤Âª∂Êúü1Â§©</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-1.5 mt-1">
                                            <div class="bg-danger h-1.5 rounded-full" style="width: 78%"></div>
                                        </div>
                                    </div>
                                    <div class="mt-3 flex justify-between">
                                        <span class="text-xs text-gray-500">Â∑•Â∫èËøõÂ∫¶: 18/23</span>
                                        <button class="text-primary text-xs hover:underline">Êü•ÁúãËØ¶ÊÉÖ</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Â∑≤ÂÆåÊàêÂàó -->
                        <div class="kanban-column flex-shrink-0 w-72 mr-4 bg-gray-100 rounded-lg p-3">
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="font-medium flex items-center">
                                    <span class="w-3 h-3 rounded-full bg-success mr-2"></span>
                                    Â∑≤ÂÆåÊàê
                                </h4>
                                <span class="bg-white text-gray-800 text-xs font-medium px-2 py-1 rounded-full">6</span>
                            </div>
                            <div class="space-y-3">
                                <div class="kanban-card bg-white rounded-lg shadow-card p-3 border-l-4 border-success">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h5 class="font-medium">ËÆ¢Âçï #ORD-2025-0005</h5>
                                            <p class="text-sm text-gray-500 mt-1">ÂÆ¢Êà∑: Âçó‰∫¨ÁîµÂ≠êÈõÜÂõ¢</p>
                                            <p class="text-sm text-gray-500">‰∫ßÂìÅ: ÊéßÂà∂Âô®</p>
                                            <p class="text-sm text-gray-500">Êï∞Èáè: 50‰∏™</p>
                                        </div>
                                        <span class="bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full">Â∑≤ÂÆåÊàê</span>
                                    </div>
                                    <div class="mt-3">
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-500">‰∫§Êúü: 2025-07-15</span>
                                            <span class="text-success">ÊèêÂâç2Â§©</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-1.5 mt-1">
                                            <div class="bg-success h-1.5 rounded-full" style="width: 100%"></div>
                                        </div>
                                    </div>
                                    <div class="mt-3 flex justify-between">
                                        <span class="text-xs text-gray-500">Â∑•Â∫èËøõÂ∫¶: 23/23</span>
                                        <button class="text-primary text-xs hover:underline">Êü•ÁúãËØ¶ÊÉÖ</button>
                                    </div>
                                </div>
                                <div class="kanban-card bg-white rounded-lg shadow-card p-3 border-l-4 border-success">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h5 class="font-medium">ËÆ¢Âçï #ORD-2025-0006</h5>
                                            <p class="text-sm text-gray-500 mt-1">ÂÆ¢Êà∑: Ê≠¶Ê±âÁßëÊäÄÊúâÈôêÂÖ¨Âè∏</p>
                                            <p class="text-sm text-gray-500">‰∫ßÂìÅ: ÁîµÊ∫êÈÄÇÈÖçÂô®</p>
                                            <p class="text-sm text-gray-500">Êï∞Èáè: 200‰∏™</p>
                                        </div>
                                        <span class="bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full">Â∑≤ÂÆåÊàê</span>
                                    </div>
                                    <div class="mt-3">
                                        <div class="flex justify-between text-xs">
                                            <span class="text-gray-500">‰∫§Êúü: 2025-07-18</span>
                                            <span class="text-success">ÊåâÊó∂ÂÆåÊàê</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-1.5 mt-1">
                                            <div class="bg-success h-1.5 rounded-full" style="width: 100%"></div>
                                        </div>
                                    </div>
                                    <div class="mt-3 flex justify-between">
                                        <span class="text-xs text-gray-500">Â∑•Â∫èËøõÂ∫¶: 23/23</span>
                                        <button class="text-primary text-xs hover:underline">Êü•ÁúãËØ¶ÊÉÖ</button>
                                    </div>
                                </div>
                            </div>
                        </div>




                    </div>
                </div>

                <!-- ËÆ¢ÂçïÁÆ°ÁêÜÈ°µÈù¢ -->
                <div id="orders-page" class="page-content hidden">
                    <div class="bg-white rounded-lg shadow-card p-4 mb-6">
                        <div class="flex flex-wrap items-center justify-between">
                            <h3 class="text-lg font-semibold mb-2 md:mb-0">ËÆ¢ÂçïÁÆ°ÁêÜ</h3>
                            <div class="w-full md:w-64">
                                <div class="relative">
                                    <input type="text" id="ordersSearchInput" placeholder="ÊêúÁ¥¢ËÆ¢ÂçïÂè∑„ÄÅÂ∑•Â∫èÂêçÁß∞..." class="w-full px-3 py-2 pl-10 border border-gray-300 rounded-md focus:outline-none focus:ring-primary focus:border-primary">
                                    <span class="absolute left-3 top-2.5 text-gray-400">üîç</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Â∑¶Âè≥Â∏ÉÂ±ÄÂÆπÂô® -->
                    <div class="flex flex-wrap md:flex-nowrap -mx-3">
                        <!-- Â∑¶‰æßËÆ¢ÂçïÁÆ°ÁêÜÊ®°Âùó - ‰ΩøÁî®table-autoËÆ©ÂàóÂÆΩÈöèÂÜÖÂÆπÈÄÇÈÖç -->
                        <div class="w-full md:w-auto px-3 mb-6 md:mb-0 flex-shrink-0">
                            <div class="bg-white rounded-lg shadow-card overflow-hidden">
                                <div class="p-4 border-b border-gray-200">
                                    <h4 class="text-lg font-semibold">ËÆ¢ÂçïÂàóË°®</h4>
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="table-auto divide-y divide-gray-200" id="orderTable">
                                        <thead class="bg-gray-50">
                                            <tr>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                    ÈÄâÊã©
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                    ÂÆ¢Êà∑
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                    ËÆ¢ÂçïÂè∑
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                    Êï∞Èáè
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                    Áä∂ÊÄÅ
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                                    Êìç‰Ωú
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody class="bg-white divide-y divide-gray-200">
                                            <!-- Ë°®Ê†ºÂÜÖÂÆπÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <!-- Âè≥‰æßÂ∑•Â∫èÂÆâÊéíÊ®°Âùó - Ëá™Âä®Âç†ÊçÆÂâ©‰ΩôÂÆΩÂ∫¶ -->
                        <div class="w-full md:flex-1 px-3">
                            <div class="bg-white rounded-lg shadow-card overflow-hidden">
                                <div class="p-4 border-b border-gray-200 flex justify-between items-center">
                                    <h4 class="text-lg font-semibold">Â∑•Â∫èÂÆâÊéí</h4>
                                    <button id="clearProcessTableBtn" class="bg-red-600 text-white px-4 py-2 rounded-md text-sm hover:bg-red-800 transition-all-300">
                                        <i class="fa fa-trash mr-1"></i> Ê∏ÖÁ©∫
                                    </button>
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="table-auto divide-y divide-gray-200" id="processTable">
                                        <thead class="bg-gray-50">
                                            <tr>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">
                                                    ÂÆ¢Êà∑
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">
                                                    ËÆ¢ÂçïÂè∑
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">
                                                    Êï∞Èáè
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">
                                                    Â∑•Â∫èÂêçÁß∞
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">
                                                    ÂáÜÂ§áÂ∑•‰ΩúÂ∑•Êó∂
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">
                                                    ÊÄªÂ∑•Êó∂
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">
                                                    ÂºÄÂßãÊó•Êúü
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">
                                                    ÁªìÊùüÊó•Êúü
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">
                                                    Â§áÊ≥®
                                                </th>
                                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">
                                                    Êìç‰Ωú
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody class="bg-white divide-y divide-gray-200">
                                            <!-- Ë°®Ê†ºÂÜÖÂÆπÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Â∑•Â∫èËßÑÂàíÈ°µÈù¢ -->
                <div id="processes-page" class="page-content hidden">
                    <div class="bg-white rounded-lg shadow-card p-4 mb-6">
                        <div class="flex flex-wrap items-center justify-between">
                            <h3 class="text-lg font-semibold mb-2 md:mb-0">Â∑•Â∫èËßÑÂàí</h3>
                            <div class="flex flex-wrap gap-2">
                                <button id="addProcessBtn" class="bg-primary text-white px-4 py-2 rounded-md text-sm hover:bg-blue-800 transition-all-300">
                                    <i class="fa fa-plus mr-1"></i> Ê∑ªÂä†Â∑•Â∫è
                                </button>
                                <button id="generateProcessBtn" class="bg-green-600 text-white px-4 py-2 rounded-md text-sm hover:bg-green-800 transition-all-300">
                                    <i class="fa fa-magic mr-1"></i> ÁîüÊàêÂ∑•Â∫è
                                </button>

                            </div>
                        </div>
                    </div>

                    <!-- Â∑•Â∫èÂàóË°® -->
                    <div class="bg-white rounded-lg shadow-card overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200" id="processPlanningTable">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            È°∫Â∫è
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Â∑•Â∫èÁºñÂè∑
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Â∑•Â∫èÂêçÁß∞
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Ê†áÂáÜÂ∑•Êó∂
                                        </th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            ÊâÄÈúÄËÆæÂ§á
                                        </th>

                                        <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Êìç‰Ωú
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <!-- ÂàùÂßã‰∏∫Á©∫Ë°®Ê†ºÔºåÊï∞ÊçÆÂ∞Ü‰ªélocalStorageÂä†ËΩΩÊàñÁî®Êà∑ÊâãÂä®Ê∑ªÂä† -->
                                </tbody>
                            </table>
                        </div>

                    </div>


                </div>

                <!-- ‰∫∫ÂëòÊéíÁè≠È°µÈù¢ -->
                <div id="schedule-page" class="page-content hidden">
                    <div class="bg-white rounded-lg shadow-card p-4 mb-6">
                        <div class="flex flex-wrap items-center justify-between">
                            <h3 class="text-lg font-semibold mb-2 md:mb-0">‰∫∫ÂëòÊéíÁè≠</h3>
                            <div class="flex flex-wrap gap-2">
                                <div class="flex items-center">
                                    <button class="bg-gray-200 text-gray-800 px-3 py-2 rounded-l-md text-sm hover:bg-gray-300 transition-all-300">
                                        <i class="fa fa-chevron-left"></i>
                                    </button>
                                    <select id="yearSelect" class="px-3 py-2 bg-white border-t border-b border-l border-gray-300 text-sm focus:outline-none focus:ring-1 focus:ring-primary">
                                        <!-- Âπ¥‰ªΩÈÄâÈ°πÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                                    </select>
                                    <select id="monthSelect" class="px-3 py-2 bg-white border-t border-b border-r border-gray-300 text-sm focus:outline-none focus:ring-1 focus:ring-primary">
                                        <!-- Êúà‰ªΩÈÄâÈ°πÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                                    </select>
                                    <button class="bg-gray-200 text-gray-800 px-3 py-2 rounded-r-md text-sm hover:bg-gray-300 transition-all-300">
                                        <i class="fa fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <!-- Êñ∞Â¢û‰ªªÂä°Ê¥æÂèëÊåâÈíÆ -->
                                <a href="Áîü‰∫ß‰ªªÂä°ÂÆâÊéíË°®.html" target="_blank" class="bg-blue-500 text-white px-4 py-2 rounded-md text-sm hover:bg-blue-600 transition-all-300">
                                    ‰ªªÂä°Ê¥æÂèë
                                </a>
                                
                                <!-- Êñ∞Â¢ûÊ∏ÖÁ©∫ÊåâÈíÆ -->
                                <button id="clear-schedule-btn" class="bg-red-500 text-white px-4 py-2 rounded-md text-sm hover:bg-red-600 transition-all-300">
                                    Ê∏ÖÁ©∫
                                </button>

                            </div>
                        </div>
                    </div>

                    <!-- ÊéíÁè≠Ë°® -->
                    <div class="bg-white rounded-lg shadow-card overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            ÂÆ¢Êà∑
                                        </th>
                                        <th scope="col" class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            ËÆ¢ÂçïÂè∑
                                        </th>
                                        <th scope="col" class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Êï∞Èáè
                                        </th>
                                        <th scope="col" class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Â∑•Â∫èÂêçÁß∞
                                        </th>
                                        <!-- Êó•ÊúüÂàóÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <!-- ‰∫∫ÂëòÊéíÁè≠Êï∞ÊçÆÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                                </tbody>
                            </table>
                        </div>
                    </div>


                </div>




            </div>
        </div>
    </div>

    <!-- ËÆ¢ÂçïËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü -->
    <div id="order-detail-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg shadow-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div class="p-4 border-b border-gray-200 flex justify-between items-center">
                <h3 class="text-lg font-semibold">ËÆ¢ÂçïËØ¶ÊÉÖ - #ORD-2025-0010</h3>
                <button id="close-order-detail" class="text-gray-500 hover:text-gray-700">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            <div class="p-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div>
                        <p class="text-sm text-gray-500">ÂÆ¢Êà∑</p>
                        <p class="font-medium">Ê∑±Âú≥Á≤æÂØÜÂà∂ÈÄ†</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">‰∫ßÂìÅ</p>
                        <p class="font-medium">Êú∫Ê¢∞ÊâãËáÇÁªÑ‰ª∂</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">Êï∞Èáè</p>
                        <p class="font-medium">20‰∏™</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">‰∫§Êúü</p>
                        <p class="font-medium">2025-07-22</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">‰ºòÂÖàÁ∫ß</p>
                        <p class="font-medium"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">È´ò‰ºòÂÖàÁ∫ß</span></p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">Áä∂ÊÄÅ</p>
                        <p class="font-medium"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Áîü‰∫ß‰∏≠</span></p>
                    </div>
                </div>

                <h4 class="font-medium mb-3">Â∑•Â∫èËøõÂ∫¶</h4>
                <div class="space-y-4">
                    <div class="process-step completed pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-success flex items-center justify-center text-white">
                            <i class="fa fa-check text-xs"></i>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-001: Ê®°ÊùøÂáÜÂ§á</h5>
                                    <p class="text-xs text-gray-500 mt-1">ÂÆåÊàêÊó∂Èó¥: 2025-07-18 10:30</p>
                                </div>
                                <span class="bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full">Â∑≤ÂÆåÊàê</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step completed pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-success flex items-center justify-center text-white">
                            <i class="fa fa-check text-xs"></i>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-002: ÊäõÂÖâ‰∏ãÊñô</h5>
                                    <p class="text-xs text-gray-500 mt-1">ÂÆåÊàêÊó∂Èó¥: 2025-07-18 11:30</p>
                                </div>
                                <span class="bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full">Â∑≤ÂÆåÊàê</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step completed pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-success flex items-center justify-center text-white">
                            <i class="fa fa-check text-xs"></i>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-003: Á£®Â§¥</h5>
                                    <p class="text-xs text-gray-500 mt-1">ÂÆåÊàêÊó∂Èó¥: 2025-07-18 12:30</p>
                                </div>
                                <span class="bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full">Â∑≤ÂÆåÊàê</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step completed pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-success flex items-center justify-center text-white">
                            <i class="fa fa-check text-xs"></i>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-004: ÂÜÖÊîØÊû∂ÊàêÂûã</h5>
                                    <p class="text-xs text-gray-500 mt-1">ÂÆåÊàêÊó∂Èó¥: 2025-07-18 14:00</p>
                                </div>
                                <span class="bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full">Â∑≤ÂÆåÊàê</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step completed pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-success flex items-center justify-center text-white">
                            <i class="fa fa-check text-xs"></i>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-005: ‰∏≠ÊîØÊû∂ÊàêÂûã</h5>
                                    <p class="text-xs text-gray-500 mt-1">ÂÆåÊàêÊó∂Èó¥: 2025-07-18 15:45</p>
                                </div>
                                <span class="bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full">Â∑≤ÂÆåÊàê</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step completed pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-success flex items-center justify-center text-white">
                            <i class="fa fa-check text-xs"></i>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-006: ‰∏ãÊîØÊû∂ÊàêÂûã</h5>
                                    <p class="text-xs text-gray-500 mt-1">ÂÆåÊàêÊó∂Èó¥: 2025-07-19 09:20</p>
                                </div>
                                <span class="bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full">Â∑≤ÂÆåÊàê</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step completed pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-success flex items-center justify-center text-white">
                            <i class="fa fa-check text-xs"></i>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-007: ËÄ≥ÊúµÊàêÂûã</h5>
                                    <p class="text-xs text-gray-500 mt-1">ÂÆåÊàêÊó∂Èó¥: 2025-07-19 10:20</p>
                                </div>
                                <span class="bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full">Â∑≤ÂÆåÊàê</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step completed pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-success flex items-center justify-center text-white">
                            <i class="fa fa-check text-xs"></i>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-008: Â∑•‰ª∂Êï¥ÂΩ¢</h5>
                                    <p class="text-xs text-gray-500 mt-1">ÂÆåÊàêÊó∂Èó¥: 2025-07-19 11:20</p>
                                </div>
                                <span class="bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full">Â∑≤ÂÆåÊàê</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step in-progress pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-warning flex items-center justify-center text-white">
                            <i class="fa fa-spinner fa-spin text-xs"></i>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-009: ÂÜ≤Ëù¥Ëù∂Áªì</h5>
                                    <p class="text-xs text-gray-500 mt-1">ÂºÄÂßãÊó∂Èó¥: 2025-07-19 14:00</p>
                                    <p class="text-xs text-gray-500">È¢ÑËÆ°ÂÆåÊàê: 2025-07-19 15:30</p>
                                </div>
                                <span class="bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-1 rounded-full">ËøõË°å‰∏≠</span>
                            </div>
                            <div class="mt-2">
                                <div class="flex justify-between text-xs">
                                    <span class="text-gray-500">ËøõÂ∫¶</span>
                                    <span class="font-medium">50%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-1.5 mt-1">
                                    <div class="bg-warning h-1.5 rounded-full" style="width: 50%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="process-step pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-white">
                            <span class="text-xs">10</span>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-010: ÂÜ≤ÂêäÈí©</h5>
                                    <p class="text-xs text-gray-500 mt-1">È¢ÑËÆ°ÂºÄÂßã: 2025-07-19 16:00</p>
                                    <p class="text-xs text-gray-500">È¢ÑËÆ°ÂÆåÊàê: 2025-07-20 09:30</p>
                                </div>
                                <span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded-full">Êú™ÂºÄÂßã</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-white">
                            <span class="text-xs">11</span>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-011: Â§ñÂçèÂä†Â∑•</h5>
                                    <p class="text-xs text-gray-500 mt-1">È¢ÑËÆ°ÂºÄÂßã: 2025-07-20 10:00</p>
                                    <p class="text-xs text-gray-500">È¢ÑËÆ°ÂÆåÊàê: 2025-07-21 10:00</p>
                                </div>
                                <span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded-full">Êú™ÂºÄÂßã</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-white">
                            <span class="text-xs">12</span>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-012: ÁÑäÊé•</h5>
                                    <p class="text-xs text-gray-500 mt-1">È¢ÑËÆ°ÂºÄÂßã: 2025-07-21 10:30</p>
                                    <p class="text-xs text-gray-500">È¢ÑËÆ°ÂÆåÊàê: 2025-07-21 14:30</p>
                                </div>
                                <span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded-full">Êú™ÂºÄÂßã</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-white">
                            <span class="text-xs">13</span>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-013: ÊâìÁ£®</h5>
                                    <p class="text-xs text-gray-500 mt-1">È¢ÑËÆ°ÂºÄÂßã: 2025-07-21 15:00</p>
                                    <p class="text-xs text-gray-500">È¢ÑËÆ°ÂÆåÊàê: 2025-07-22 10:00</p>
                                </div>
                                <span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded-full">Êú™ÂºÄÂßã</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-white">
                            <span class="text-xs">14</span>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-014: ÊØõÂùØÊë∏Êû∂</h5>
                                    <p class="text-xs text-gray-500 mt-1">È¢ÑËÆ°ÂºÄÂßã: 2025-07-22 10:30</p>
                                    <p class="text-xs text-gray-500">È¢ÑËÆ°ÂÆåÊàê: 2025-07-22 12:00</p>
                                </div>
                                <span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded-full">Êú™ÂºÄÂßã</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-white">
                            <span class="text-xs">15</span>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-015: ÊØõÂùØÊï¥ÂΩ¢</h5>
                                    <p class="text-xs text-gray-500 mt-1">È¢ÑËÆ°ÂºÄÂßã: 2025-07-22 13:00</p>
                                    <p class="text-xs text-gray-500">È¢ÑËÆ°ÂÆåÊàê: 2025-07-22 15:30</p>
                                </div>
                                <span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded-full">Êú™ÂºÄÂßã</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-white">
                            <span class="text-xs">16</span>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-016: ÊâìÂ≠î</h5>
                                    <p class="text-xs text-gray-500 mt-1">È¢ÑËÆ°ÂºÄÂßã: 2025-07-23 09:00</p>
                                    <p class="text-xs text-gray-500">È¢ÑËÆ°ÂÆåÊàê: 2025-07-23 11:30</p>
                                </div>
                                <span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded-full">Êú™ÂºÄÂßã</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-white">
                            <span class="text-xs">17</span>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-017: ÁÑäËù¥Ëù∂Áªì</h5>
                                    <p class="text-xs text-gray-500 mt-1">È¢ÑËÆ°ÂºÄÂßã: 2025-07-23 13:00</p>
                                    <p class="text-xs text-gray-500">È¢ÑËÆ°ÂÆåÊàê: 2025-07-23 14:30</p>
                                </div>
                                <span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded-full">Êú™ÂºÄÂßã</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-white">
                            <span class="text-xs">18</span>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-018: ÁÑäÂêäÈí©</h5>
                                    <p class="text-xs text-gray-500 mt-1">È¢ÑËÆ°ÂºÄÂßã: 2025-07-23 15:00</p>
                                    <p class="text-xs text-gray-500">È¢ÑËÆ°ÂÆåÊàê: 2025-07-24 10:00</p>
                                </div>
                                <span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded-full">Êú™ÂºÄÂßã</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-white">
                            <span class="text-xs">19</span>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-019: ÁîµÈïÄ</h5>
                                    <p class="text-xs text-gray-500 mt-1">È¢ÑËÆ°ÂºÄÂßã: 2025-07-24 10:30</p>
                                    <p class="text-xs text-gray-500">È¢ÑËÆ°ÂÆåÊàê: 2025-07-25 14:30</p>
                                </div>
                                <span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded-full">Êú™ÂºÄÂßã</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-white">
                            <span class="text-xs">20</span>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-020: ÊàêÂìÅÊë∏Êû∂</h5>
                                    <p class="text-xs text-gray-500 mt-1">È¢ÑËÆ°ÂºÄÂßã: 2025-07-25 15:00</p>
                                    <p class="text-xs text-gray-500">È¢ÑËÆ°ÂÆåÊàê: 2025-07-26 10:00</p>
                                </div>
                                <span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded-full">Êú™ÂºÄÂßã</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-white">
                            <span class="text-xs">21</span>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-021: ÊèíÈìæÊù°</h5>
                                    <p class="text-xs text-gray-500 mt-1">È¢ÑËÆ°ÂºÄÂßã: 2025-07-26 10:30</p>
                                    <p class="text-xs text-gray-500">È¢ÑËÆ°ÂÆåÊàê: 2025-07-26 13:00</p>
                                </div>
                                <span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded-full">Êú™ÂºÄÂßã</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-white">
                            <span class="text-xs">22</span>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-022: ÊâéÂ∏¶/Ë£ÖÁÆ±</h5>
                                    <p class="text-xs text-gray-500 mt-1">È¢ÑËÆ°ÂºÄÂßã: 2025-07-26 14:00</p>
                                    <p class="text-xs text-gray-500">È¢ÑËÆ°ÂÆåÊàê: 2025-07-26 16:30</p>
                                </div>
                                <span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded-full">Êú™ÂºÄÂßã</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-white">
                            <span class="text-xs">23</span>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-023: Ë£ÖÊüú</h5>
                                    <p class="text-xs text-gray-500 mt-1">È¢ÑËÆ°ÂºÄÂßã: 2025-07-27 09:00</p>
                                    <p class="text-xs text-gray-500">È¢ÑËÆ°ÂÆåÊàê: 2025-07-27 11:00</p>
                                </div>
                                <span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded-full">Êú™ÂºÄÂßã</span>
                            </div>
                        </div>
                    </div>
                    <div class="process-step pl-8 relative">
                        <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-white">
                            <span class="text-xs">6</span>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-gray-200">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h5 class="font-medium">PROC-006: ÁªÑË£Ö</h5>
                                    <p class="text-xs text-gray-500 mt-1">È¢ÑËÆ°ÂºÄÂßã: 2025-07-22 08:00</p>
                                    <p class="text-xs text-gray-500">È¢ÑËÆ°ÂÆåÊàê: 2025-07-22 12:00</p>
                                </div>
                                <span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded-full">Êú™ÂºÄÂßã</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-6 flex justify-end">
                    <button class="bg-gray-200 text-gray-800 px-4 py-2 rounded-md text-sm hover:bg-gray-300 transition-all-300 mr-2">
                        ÂÖ≥Èó≠
                    </button>
                    <button class="bg-primary text-white px-4 py-2 rounded-md text-sm hover:bg-blue-800 transition-all-300">
                        Êõ¥Êñ∞Áä∂ÊÄÅ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Â∑•Â∫èÂÆâÊéíÁºñËæëÊ®°ÊÄÅÊ°Ü -->
    <div id="editOrderProcessModal" class="fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 w-full max-w-3xl">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-gray-900">ÁºñËæëÂ∑•Â∫è</h3>
                <button type="button" class="text-gray-400 hover:text-gray-600" onclick="closeEditOrderProcessModal()">
                    <span class="sr-only">ÂÖ≥Èó≠</span>
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <form id="editOrderProcessForm">
                <input type="hidden" id="edit-process-index">
                <div class="space-y-4">
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label for="edit-customer" class="block text-sm font-medium text-gray-700">ÂÆ¢Êà∑</label>
                            <input type="text" id="edit-customer" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" readonly>
                        </div>
                        <div>
                            <label for="edit-order-number" class="block text-sm font-medium text-gray-700">ËÆ¢ÂçïÂè∑</label>
                            <input type="text" id="edit-order-number" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" readonly>
                        </div>
                        <div>
                            <label for="edit-quantity" class="block text-sm font-medium text-gray-700">Êï∞Èáè</label>
                            <input type="number" id="edit-quantity" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" readonly>
                        </div>
                    </div>
                    <div>
                        <label for="edit-process-name" class="block text-sm font-medium text-gray-700">Â∑•Â∫èÂêçÁß∞</label>
                        <input type="text" id="edit-process-name" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" readonly>
                    </div>
                    <div class="grid grid-cols-3 gap-6">
                        <div class="flex flex-col">
                            <label for="edit-prep-time" class="text-sm font-medium text-gray-700 whitespace-nowrap overflow-hidden text-ellipsis">ÂáÜÂ§áÂ∑•‰ΩúÂ∑•Êó∂ÔºàÂ∞èÊó∂Ôºâ</label>
                            <input type="number" step="0.1" id="edit-prep-time" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" required>
                        </div>
                        <div class="flex flex-col">
                            <label for="edit-start-date" class="text-sm font-medium text-gray-700 whitespace-nowrap overflow-hidden text-ellipsis">ÂºÄÂßãÊó•Êúü</label>
                            <input type="date" id="edit-start-date" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" required>
                        </div>
                        <div class="flex flex-col">
                            <label for="edit-end-date" class="text-sm font-medium text-gray-700 whitespace-nowrap overflow-hidden text-ellipsis">ÁªìÊùüÊó•Êúü</label>
                            <input type="date" id="edit-end-date" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" required>
                        </div>
                    </div>
                    <div>
                        <label for="edit-remark" class="block text-sm font-medium text-gray-700">Â§áÊ≥®</label>
                        <textarea id="edit-remark" rows="3" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary resize-y"></textarea>
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-3">
                    <button type="button" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary" onclick="closeEditOrderProcessModal()">
                        ÂèñÊ∂à
                    </button>
                    <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary">
                        ‰øùÂ≠ò
                    </button>
                </div>
            </form>
        </div>
    </div>

    <style>
        /* Ë°®Ê†ºÊ†∑Âºè - Ëá™Âä®Ë°åÈ´òÂíåÂàóÂÆΩ */
        #schedule-page table {
            table-layout: auto;
            width: auto;
        }
        
        #schedule-page td, #schedule-page th {
            vertical-align: middle;
            min-height: 40px;
        }
        
        /* Â∑•Â∫èÂêçÁß∞Âàó‰∏çÊç¢Ë°å */
        #schedule-page td:nth-child(4), #schedule-page th:nth-child(4) {
            white-space: nowrap;
        }
        
        /* Êó•ÊúüÂàóÊ†∑Âºè */
        #schedule-page th.date-header {
            white-space: normal;
            text-align: center;
        }
        
        /* ÊéíÁè≠ÂçïÂÖÉÊ†ºÊ†∑Âºè */
        #schedule-page td.schedule-cell {
            white-space: normal;
            text-align: center;
            padding: 2px;
            min-height: 50px;
        }
        
        /* ÂºÄÂÖ≥Ê†∑Âºè */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
        }
        
        input:checked + .slider {
            background-color: #1e40af;
        }
        
        input:focus + .slider {
            box-shadow: 0 0 1px #1e40af;
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        .slider.round {
            border-radius: 24px;
        }
        
        .slider.round:before {
            border-radius: 50%;
        }
    </style>

    <script>
        // ‰∫∫ÂëòÊéíÁè≠Âä®ÊÄÅÊó•ÊúüÂäüËÉΩ
        // ÂÖ®Â±ÄÂèòÈáèÂ≠òÂÇ®ÂΩìÂâçÊòæÁ§∫ÁöÑÂπ¥Êúà
        let currentYear = Math.max(new Date().getFullYear(), 2025); // Á°Æ‰øùÂπ¥‰ªΩ‰∏çÂ∞è‰∫é2025Âπ¥
        let currentMonth = new Date().getMonth(); // 0-11Ë°®Á§∫1-12Êúà
        
        // È°µÈù¢Âä†ËΩΩÊó∂Â∞ÜÂΩìÂâçÂπ¥Êúà‰øùÂ≠òÂà∞localStorageÔºå‰æõÁîü‰∫ß‰ªªÂä°ÂÆâÊéíË°®ÂêåÊ≠•‰ΩøÁî®
        localStorage.setItem('scheduleYear', currentYear.toString());
        localStorage.setItem('scheduleMonth', currentMonth.toString());

        // ÂàùÂßãÂåñÂπ¥‰ªΩÂíåÊúà‰ªΩ‰∏ãÊãâÊ°Ü
        function initYearMonthSelect() {
            const yearSelect = document.getElementById('yearSelect');
            const monthSelect = document.getElementById('monthSelect');
            
            if (!yearSelect || !monthSelect) return;
            
            // ÁîüÊàêÂπ¥‰ªΩÈÄâÈ°πÔºà‰ªé2025Âπ¥ÂºÄÂßãÔºâ
            const startYear = 2025;
            const endYear = currentYear + 5;
            
            for (let year = startYear; year <= endYear; year++) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year + 'Âπ¥';
                if (year === currentYear) {
                    option.selected = true;
                }
                yearSelect.appendChild(option);
            }
            
            // ÁîüÊàêÊúà‰ªΩÈÄâÈ°π
            const months = ['1Êúà', '2Êúà', '3Êúà', '4Êúà', '5Êúà', '6Êúà', '7Êúà', '8Êúà', '9Êúà', '10Êúà', '11Êúà', '12Êúà'];
            for (let month = 0; month < 12; month++) {
                const option = document.createElement('option');
                option.value = month;
                option.textContent = months[month];
                if (month === currentMonth) {
                    option.selected = true;
                }
                monthSelect.appendChild(option);
            }
            
            // Ê∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨Âô®
            yearSelect.addEventListener('change', () => {
                currentYear = parseInt(yearSelect.value);
                // Â∞ÜÂΩìÂâçÂπ¥‰ªΩ‰øùÂ≠òÂà∞localStorageÔºåÁî®‰∫éÁîü‰∫ß‰ªªÂä°ÂÆâÊéíË°®ÂêåÊ≠•
                localStorage.setItem('scheduleYear', currentYear.toString());
                generateScheduleTable();
            });
            
            monthSelect.addEventListener('change', () => {
                currentMonth = parseInt(monthSelect.value);
                // Â∞ÜÂΩìÂâçÊúà‰ªΩ‰øùÂ≠òÂà∞localStorageÔºåÁî®‰∫éÁîü‰∫ß‰ªªÂä°ÂÆâÊéíË°®ÂêåÊ≠•
                localStorage.setItem('scheduleMonth', currentMonth.toString());
                generateScheduleTable();
            });
        }

        // ‰ªéÂ∑•Â∫èÂÆâÊéíË°®Ê†ºÂêåÊ≠•Êï∞ÊçÆÂà∞‰∫∫ÂëòÊéíÁè≠Ë°®Ê†º
        function syncProcessToSchedule(yearParam, monthParam) {
            // ‰ΩøÁî®‰º†ÂÖ•ÁöÑÂèÇÊï∞ÊàñÂΩìÂâçÂÖ®Â±ÄÂÄº
            const displayYear = yearParam !== undefined ? yearParam : currentYear;
            const displayMonth = monthParam !== undefined ? monthParam : currentMonth;
            
            const table = document.querySelector('#schedule-page table');
            if (!table) return;
            
            const tbody = table.querySelector('tbody');
            if (!tbody) return;
            
            // ‰ªélocalStorageËé∑ÂèñËÆ¢ÂçïÂ∑•Â∫èÊï∞ÊçÆÂíåÂ∑•Â∫èËßÑÂàíÊï∞ÊçÆ
            let orderProcesses = JSON.parse(localStorage.getItem('orderProcesses')) || [];
            const productionProcesses = JSON.parse(localStorage.getItem('productionProcesses')) || [];
            const processData = JSON.parse(localStorage.getItem('processData')) || [];
            const processPlanningData = productionProcesses.length > 0 ? productionProcesses : processData;
            
            // ÂàõÂª∫Â∑•Â∫èÂêçÁß∞Âà∞È°∫Â∫èÁöÑÊò†Â∞ÑÔºåÂ§ÑÁêÜ‰∏§Áßç‰∏çÂêåÁöÑÊï∞ÊçÆÁªìÊûÑ
            const processSequenceMap = {};
            processPlanningData.forEach(process => {
                const processName = process.name || process.processName;
                if (processName) {
                    // È°∫Â∫èÂ≠óÊÆµÂèØËÉΩÊòØorderÊàñsequenceÔºåÁ°Æ‰øùËΩ¨Êç¢‰∏∫Êï∞Â≠ó
                    const sequence = parseInt(process.order || process.sequence || '0', 10);
                    processSequenceMap[processName] = sequence;
                }
            });
            
            // ÂÖàÊåâËÆ¢ÂçïÂè∑ÊéíÂ∫èÔºåÁÑ∂ÂêéÊåâÂ∑•Â∫èÈ°∫Â∫èÊéíÂ∫è
            orderProcesses.sort((a, b) => {
                // È¶ñÂÖàÊåâËÆ¢ÂçïÂè∑ÊéíÂ∫è
                if (a.orderNumber < b.orderNumber) return -1;
                if (a.orderNumber > b.orderNumber) return 1;
                
                // ËÆ¢ÂçïÂè∑Áõ∏ÂêåÁöÑÊÉÖÂÜµ‰∏ãÔºåÊåâÂ∑•Â∫èÈ°∫Â∫èÊéíÂ∫è
                const sequenceA = processSequenceMap[a.processName] || 0;
                const sequenceB = processSequenceMap[b.processName] || 0;
                return sequenceA - sequenceB;
            });
            
            // Ê∑ªÂä†Ë∞ÉËØï‰ø°ÊÅØ
            console.log('syncProcessToSchedule - sorted orderProcesses:', orderProcesses);
            
            // Ê∏ÖÁ©∫Áé∞ÊúâÊéíÁè≠Êï∞ÊçÆ
            tbody.innerHTML = '';
            
            // Ëé∑ÂèñÂΩìÊúàÁ¨¨‰∏ÄÂ§©ÂíåÊúÄÂêé‰∏ÄÂ§©
            const firstDay = new Date(displayYear, displayMonth, 1);
            const lastDay = new Date(displayYear, displayMonth + 1, 0);
            const daysInMonth = lastDay.getDate();
            
            // ‰∏∫ÊØè‰∏™Â∑•Â∫èÁîüÊàêÂçïÁã¨ÁöÑÊéíÁè≠Ë°å
            orderProcesses.forEach(process => {
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-200';
                
                // ‰∏∫ÂΩìÂâçË°åÁîüÊàê‰∏Ä‰∏™ÈöèÊú∫È¢úËâ≤ÔºàÁî®‰∫éÊó•ÊúüÂå∫Èó¥Ôºâ
                const r = Math.floor(Math.random() * 100) + 155; // 155-255
                const g = Math.floor(Math.random() * 100) + 155;
                const b = Math.floor(Math.random() * 100) + 155;
                const rowColor = `rgb(${r}, ${g}, ${b})`;
                
                // ÂàõÂª∫ÂÆ¢Êà∑Âàó - Áõ¥Êé•ÊòæÁ§∫ÊñáÊú¨
                const customerTd = document.createElement('td');
                customerTd.className = 'px-3 py-2 text-left';
                customerTd.textContent = process.customer || '';
                row.appendChild(customerTd);
                
                // ÂàõÂª∫ËÆ¢ÂçïÂè∑Âàó - Áõ¥Êé•ÊòæÁ§∫ÊñáÊú¨
                const orderNumberTd = document.createElement('td');
                orderNumberTd.className = 'px-3 py-2 text-left';
                orderNumberTd.textContent = process.orderNumber || '';
                row.appendChild(orderNumberTd);
                
                // ÂàõÂª∫Êï∞ÈáèÂàó - Áõ¥Êé•ÊòæÁ§∫ÊñáÊú¨
                const quantityTd = document.createElement('td');
                quantityTd.className = 'px-3 py-2 text-left';
                quantityTd.textContent = process.quantity || '';
                row.appendChild(quantityTd);
                
                // ÂàõÂª∫Â∑•Â∫èÂêçÁß∞Âàó - Áõ¥Êé•ÊòæÁ§∫ÊñáÊú¨
                const processNameTd = document.createElement('td');
                processNameTd.className = 'px-3 py-2 text-left whitespace-nowrap';
                processNameTd.textContent = process.processName || '';
                row.appendChild(processNameTd);
                
                // ÂàõÂª∫Êó•ÊúüÂàó
                for (let day = 1; day <= daysInMonth; day++) {
                    const dateTd = document.createElement('td');
                    dateTd.className = 'px-3 py-2 text-center schedule-cell';
                    
                    // Ê£ÄÊü•ËØ•Êó•ÊúüÊòØÂê¶Âú®‰ªª‰ΩïÂ∑•Â∫èÁöÑÊó•ÊúüÂå∫Èó¥ÂÜÖ
                    // ‰ΩøÁî®YYYY-MM-DDÊ†ºÂºèÔºåÈÅøÂÖçÊó∂Âå∫ÈóÆÈ¢ò
                    const currentDate = new Date(displayYear, displayMonth, day);
                    // Á°Æ‰øùÊó•ÊúüÊ†ºÂºèÊ≠£Á°ÆÔºå‰∏çËÄÉËôëÊó∂Âå∫
                    const currentDateStr = currentDate.getFullYear() + '-' + 
                                          String(currentDate.getMonth() + 1).padStart(2, '0') + '-' + 
                                          String(currentDate.getDate()).padStart(2, '0');
                    
                    let isWithinAnyRange = false;
                    
                    // Áõ¥Êé•Ê£ÄÊü•ÂΩìÂâçÂ∑•Â∫èÁöÑÊó•ÊúüÂå∫Èó¥
                    if (process.startDate && process.endDate) {
                        const startDate = process.startDate;
                        const endDate = process.endDate;
                        
                        if (currentDateStr >= startDate && currentDateStr <= endDate) {
                            isWithinAnyRange = true;
                        }
                    }
                    
                    // Â¶ÇÊûúÂú®Êó•ÊúüÂå∫Èó¥ÂÜÖÔºå‰ΩøÁî®ÂΩìÂâçË°åÁöÑÈöèÊú∫È¢úËâ≤‰Ωú‰∏∫ËÉåÊôØ
                    if (isWithinAnyRange) {
                        dateTd.style.backgroundColor = rowColor;
                        // Ê∑ªÂä†ÂèåÂáª‰∫ã‰ª∂ÁõëÂê¨Âô®
                        dateTd.addEventListener('dblclick', function() {
                            // ÊâìÂºÄÊéíÁè≠Ê®°ÊÄÅÊ°Ü
                            openScheduleModal(this);
                        });
                    }
                    
                    row.appendChild(dateTd);
                }
                
                tbody.appendChild(row);
            });
            
            // Âä†ËΩΩÊú¨Âú∞Â≠òÂÇ®ÁöÑÊéíÁè≠Êï∞ÊçÆÂà∞Êñ∞ÂàõÂª∫ÁöÑÂçïÂÖÉÊ†º‰∏≠
            loadScheduleFromLocalStorage();
        }
        
        // ÁîüÊàêÊéíÁè≠Ë°®Ê†ºÁöÑÊó•ÊúüË°®Â§¥
        function generateScheduleTable(yearParam, monthParam) {
            // ‰ΩøÁî®‰º†ÂÖ•ÁöÑÂèÇÊï∞ÊàñÂΩìÂâçÂÖ®Â±ÄÂÄº
            const displayYear = yearParam !== undefined ? yearParam : currentYear;
            const displayMonth = monthParam !== undefined ? monthParam : currentMonth;
            
            const table = document.querySelector('#schedule-page table');
            if (!table) return;
            
            const thead = table.querySelector('thead');
            if (!thead) return;
            
            let headerRow = thead.querySelector('tr');
            
            // Â¶ÇÊûúÊ≤°ÊúâË°®Â§¥Ë°åÔºåÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ
            if (!headerRow) {
                headerRow = document.createElement('tr');
                thead.appendChild(headerRow);
            } else {
                // Ê∏ÖÁ©∫Áé∞ÊúâÂàó
                headerRow.innerHTML = '';
            }
            
            // ÂàõÂª∫ÂÆ¢Êà∑Âàó
            const customerTh = document.createElement('th');
            customerTh.className = 'px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider';
            customerTh.textContent = 'ÂÆ¢Êà∑';
            headerRow.appendChild(customerTh);
            
            // ÂàõÂª∫ËÆ¢ÂçïÂè∑Âàó
            const orderNumberTh = document.createElement('th');
            orderNumberTh.className = 'px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider';
            orderNumberTh.textContent = 'ËÆ¢ÂçïÂè∑';
            headerRow.appendChild(orderNumberTh);
            
            // ÂàõÂª∫Êï∞ÈáèÂàó
            const quantityTh = document.createElement('th');
            quantityTh.className = 'px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider';
            quantityTh.textContent = 'Êï∞Èáè';
            headerRow.appendChild(quantityTh);
            
            // Ê∑ªÂä†Â∑•Â∫èÂêçÁß∞Âàó
            const processNameTh = document.createElement('th');
            processNameTh.className = 'px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap';
            processNameTh.textContent = 'Â∑•Â∫èÂêçÁß∞';
            headerRow.appendChild(processNameTh);
            
            // Ëé∑ÂèñÂΩìÊúàÁ¨¨‰∏ÄÂ§©ÂíåÊúÄÂêé‰∏ÄÂ§©
            const firstDay = new Date(displayYear, displayMonth, 1);
            const lastDay = new Date(displayYear, displayMonth + 1, 0);
            
            // Ëé∑ÂèñÂΩìÊúàÁöÑÂ§©Êï∞
            const daysInMonth = lastDay.getDate();
            
            // ÁîüÊàêÊó•ÊúüÂàó
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(displayYear, displayMonth, day);
                const dayOfWeek = date.getDay(); // 0-6Ë°®Á§∫Âë®Êó•-Âë®ÂÖ≠
                
                const th = document.createElement('th');
                th.className = 'px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider date-header';
                
                // Ê†ºÂºèÂåñÊó•ÊúüÊòæÁ§∫ÔºàÊúà/Êó•Ôºâ
                const monthDay = (displayMonth + 1) + '/' + day;
                
                // Ëé∑ÂèñÊòüÊúüÂá†ÁöÑ‰∏≠ÊñáÂêçÁß∞
                const weekdays = ['Âë®Êó•', 'Âë®‰∏Ä', 'Âë®‰∫å', 'Âë®‰∏â', 'Âë®Âõõ', 'Âë®‰∫î', 'Âë®ÂÖ≠'];
                const weekdayName = weekdays[dayOfWeek];
                
                th.innerHTML = `${monthDay}<br><span class="text-gray-400">${weekdayName}</span>`;
                headerRow.appendChild(th);
            }
            
            // ÂêåÊ≠•Â∑•Â∫èÂÆâÊéíÊï∞ÊçÆÂà∞ÊéíÁè≠Ë°®Ê†º
            syncProcessToSchedule(displayYear, displayMonth);
        }

        // Êúà‰ªΩÂØºËà™ÂäüËÉΩ
        function initMonthNavigation() {
            const leftBtn = document.querySelector('#schedule-page .fa-chevron-left').closest('button');
            const rightBtn = document.querySelector('#schedule-page .fa-chevron-right').closest('button');
            
            if (!leftBtn || !rightBtn) return;
            
            leftBtn.addEventListener('click', () => {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                // ‰øùÂ≠òÂΩìÂâçÈÄâÊã©ÁöÑÂπ¥‰ªΩÂíåÊúà‰ªΩÂà∞localStorage
                localStorage.setItem('scheduleYear', currentYear);
                localStorage.setItem('scheduleMonth', currentMonth);
                updateYearMonthSelect();
                generateScheduleTable();
            });
            
            rightBtn.addEventListener('click', () => {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                // ‰øùÂ≠òÂΩìÂâçÈÄâÊã©ÁöÑÂπ¥‰ªΩÂíåÊúà‰ªΩÂà∞localStorage
                localStorage.setItem('scheduleYear', currentYear);
                localStorage.setItem('scheduleMonth', currentMonth);
                updateYearMonthSelect();
                generateScheduleTable();
            });
        }

        // Êõ¥Êñ∞Âπ¥‰ªΩÂíåÊúà‰ªΩ‰∏ãÊãâÊ°ÜÁöÑÈÄâ‰∏≠Áä∂ÊÄÅ
        function updateYearMonthSelect() {
            const yearSelect = document.getElementById('yearSelect');
            const monthSelect = document.getElementById('monthSelect');
            
            if (yearSelect) {
                yearSelect.value = currentYear;
            }
            
            if (monthSelect) {
                monthSelect.value = currentMonth;
            }
        }

        // È°µÈù¢ÂàáÊç¢ÂäüËÉΩ
        // Ê∏≤ÊüìËÆ¢ÂçïÁÆ°ÁêÜÈ°µÈù¢ÁöÑÂ∑•Â∫èÂÆâÊéíË°®Ê†º
        function renderOrderProcessTable(searchTerm = '') {
            const processTable = document.getElementById('processTable');
            if (!processTable) return;
            
            const tbody = processTable.querySelector('tbody');
            if (!tbody) return;
            
            // ‰ªélocalStorageËé∑ÂèñËÆ¢ÂçïÂ∑•Â∫èÊï∞ÊçÆ
            let orderProcesses = JSON.parse(localStorage.getItem('orderProcesses'));
            
            // Â¶ÇÊûúÊ≤°ÊúâÊï∞ÊçÆÔºå‰ΩøÁî®Á©∫Êï∞ÁªÑ
            if (!orderProcesses) {
                orderProcesses = [];
            }
            
            // Â∫îÁî®ÊêúÁ¥¢Á≠õÈÄâ
            if (searchTerm) {
                orderProcesses = orderProcesses.filter(process => {
                    const orderNumber = (process.orderNumber || '').toLowerCase();
                    const processName = (process.processName || '').toLowerCase();
                    return orderNumber.includes(searchTerm) || processName.includes(searchTerm);
                });
            }
            
            // ‰ªélocalStorageËé∑ÂèñÂ∑•Â∫èËßÑÂàíË°®Êï∞ÊçÆ
            const productionProcesses = JSON.parse(localStorage.getItem('productionProcesses')) || [];
            const processData = JSON.parse(localStorage.getItem('processData')) || [];
            const processPlanningData = productionProcesses.length > 0 ? productionProcesses : processData;
            
            // Ê∏ÖÁ©∫Ë°®Ê†º
            tbody.innerHTML = '';
            
            // ÊåâÈ°∫Â∫èÊéíÂ∫è
            orderProcesses.sort((a, b) => a.sequence - b.sequence);
            
            // Ê∑ªÂä†Â∑•Â∫èË°å
            orderProcesses.forEach((process, index) => {
                const row = document.createElement('tr');
                
                // ÊûÑÂª∫Â∑•Â∫èÂêçÁß∞‰∏ãÊãâÊ°ÜÈÄâÈ°π
                let processOptions = '';
                if (processPlanningData.length > 0) {
                    // ‰ΩøÁî®SetÊèêÂèñÂîØ‰∏ÄÁöÑÂ∑•Â∫èÂêçÁß∞
                    const uniqueProcessNames = [...new Set(processPlanningData.map(p => p.name || p.processName))];
                    
                    uniqueProcessNames.forEach(processName => {
                        const selected = processName === process.processName ? 'selected' : '';
                        processOptions += `<option value="${processName}" ${selected}>${processName}</option>`;
                    });
                } else {
                    // Â¶ÇÊûúÊ≤°ÊúâÂ∑•Â∫èËßÑÂàíÊï∞ÊçÆÔºåÊòæÁ§∫ÂΩìÂâçÂ∑•Â∫èÂêçÁß∞
                    processOptions += `<option value="${process.processName}" selected>${process.processName}</option>`;
                }
                
                // Ëé∑ÂèñÂáÜÂ§áÂ∑•‰ΩúÊó∂Èó¥ÁöÑÊï¥Êï∞ÂÄºÔºàÁßªÈô§"Â∞èÊó∂"ÂêéÁºÄÔºâ
                let prepTimeValue = process.prepTime;
                if (typeof prepTimeValue === 'string') {
                    prepTimeValue = parseInt(prepTimeValue.replace('Â∞èÊó∂', '')) || 0;
                }
                
                row.innerHTML = `
                    <td class="px-6 py-2 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${process.customer || ''}</div>
                    </td>
                    <td class="px-6 py-2 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${process.orderNumber || 'ORD-001'}</div>
                    </td>
                    <td class="px-6 py-2 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${process.quantity || 0}</div>
                    </td>
                    <td class="px-6 py-2 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${process.processName}</div>
                    </td>
                    <td class="px-6 py-2 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${prepTimeValue}Â∞èÊó∂</div>
                    </td>
                    <td class="px-6 py-2 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${process.totalTime}</div>
                    </td>
                    <td class="px-6 py-2 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${process.startDate}</div>
                    </td>
                    <td class="px-6 py-2 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${process.endDate}</div>
                    </td>
                    <td class="px-6 py-2 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${process.remark || ''}</div>
                    </td>
                    <td class="px-6 py-2 whitespace-nowrap">
                        <div class="flex space-x-2">
                            <button class="text-blue-600 hover:text-blue-800">
                                <i class="fa fa-eye"></i>
                            </button>
                            <button class="text-green-600 hover:text-green-800 edit-process-btn" data-index="${index}">
                                <i class="fa fa-edit"></i>
                            </button>
                            <button class="text-red-600 hover:text-red-800 delete-process-btn" data-index="${index}">
                                <i class="fa fa-trash"></i>
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            // ‰∏∫Âà†Èô§ÊåâÈíÆÊ∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂ÁõëÂê¨Âô®
            document.querySelectorAll('.delete-process-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.dataset.index);
                    
                    // Á°ÆËÆ§Âà†Èô§
                    if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÈÅìÂ∑•Â∫èÂêóÔºü')) {
                        // ‰ªéÊï∞ÁªÑ‰∏≠Âà†Èô§Â∑•Â∫è
                        orderProcesses.splice(index, 1);
                        localStorage.setItem('orderProcesses', JSON.stringify(orderProcesses));
                        
                        // ÈáçÊñ∞Ê∏≤ÊüìË°®Ê†º
                        renderOrderProcessTable();
                    }
                });
            });
            
            // ‰∏∫ÁºñËæëÊåâÈíÆÊ∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂ÁõëÂê¨Âô®
            document.querySelectorAll('.edit-process-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.dataset.index);
                    const process = orderProcesses[index];
                    
                    // Â°´ÂÖÖÊ®°ÊÄÅÊ°ÜÊï∞ÊçÆ
                    document.getElementById('edit-process-index').value = index;
                    document.getElementById('edit-customer').value = process.customer || '';
                    document.getElementById('edit-order-number').value = process.orderNumber || '';
                    document.getElementById('edit-quantity').value = process.quantity || 0;
                    document.getElementById('edit-process-name').value = process.processName || '';
                    document.getElementById('edit-prep-time').value = process.prepTime || 0;
                    document.getElementById('edit-start-date').value = process.startDate || '';
                    document.getElementById('edit-end-date').value = process.endDate || '';
                    document.getElementById('edit-remark').value = process.remark || '';
                    
                    // ÊâìÂºÄÊ®°ÊÄÅÊ°Ü
                    document.getElementById('editOrderProcessModal').classList.remove('hidden');
                });
            });
            
            // ÂêåÊ≠•Âà∞ÊéíÁè≠Ë°®Ê†º
            syncProcessToSchedule();
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            // ÂØºËà™ËèúÂçïÁÇπÂáª‰∫ã‰ª∂
            const navLinks = document.querySelectorAll('a[data-target]');
            const pageContents = document.querySelectorAll('.page-content');
            const pageTitle = document.getElementById('page-title');

            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = this.getAttribute('data-target');
                    
                    // Êõ¥Êñ∞ÂØºËà™ËèúÂçïÊøÄÊ¥ªÁä∂ÊÄÅ
                    navLinks.forEach(navLink => {
                        navLink.classList.remove('bg-blue-800', 'border-l-4', 'border-yellow-500');
                        navLink.classList.add('hover:bg-blue-800');
                    });
                    this.classList.add('bg-blue-800', 'border-l-4', 'border-yellow-500');
                    this.classList.remove('hover:bg-blue-800');
                    
                    // ÊòæÁ§∫ÂØπÂ∫îÈ°µÈù¢ÂÜÖÂÆπ
                    pageContents.forEach(page => {
                        page.classList.add('hidden');
                    });
                    document.getElementById(`${target}-page`).classList.remove('hidden');
                    
                    // Êõ¥Êñ∞È°µÈù¢Ê†áÈ¢ò
                    pageTitle.textContent = this.querySelector('span').textContent;
                    
                    // Â¶ÇÊûúÂàáÊç¢Âà∞ÊéíÁè≠È°µÈù¢ÔºåÈáçÊñ∞ÁîüÊàêÊéíÁè≠Ë°®Ê†º
                    if (target === 'schedule') {
                        generateScheduleTable(currentYear, currentMonth);
                    }
                    
                    // ÂÖ≥Èó≠ÁßªÂä®Á´ØÂØºËà™ËèúÂçï
                    document.getElementById('mobile-nav').classList.add('hidden');
                    document.getElementById('mobile-nav-content').classList.add('-translate-x-full');
                });
            });

            // ÁßªÂä®Á´ØÂØºËà™ËèúÂçï
            const mobileNavToggle = document.getElementById('mobile-nav-toggle');
            const mobileNav = document.getElementById('mobile-nav');
            const mobileNavContent = document.getElementById('mobile-nav-content');
            const mobileNavClose = document.getElementById('mobile-nav-close');

            mobileNavToggle.addEventListener('click', function() {
                mobileNav.classList.toggle('hidden');
                setTimeout(() => {
                    mobileNavContent.classList.toggle('-translate-x-full');
                }, 10);
            });

            mobileNavClose.addEventListener('click', function() {
                mobileNavContent.classList.add('-translate-x-full');
                setTimeout(() => {
                    mobileNav.classList.add('hidden');
                }, 300);
            });

            // ÁÇπÂáªÊ®°ÊÄÅÊ°ÜÂ§ñÈÉ®ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
            mobileNav.addEventListener('click', function(e) {
                if (e.target === mobileNav) {
                    mobileNavContent.classList.add('-translate-x-full');
                    setTimeout(() => {
                        mobileNav.classList.add('hidden');
                    }, 300);
                }
            });
            
            // Ê∑ªÂä†Â∑•Â∫èÊ®°ÊÄÅÊ°ÜÂäüËÉΩ
            const addProcessBtn = document.getElementById('addProcessBtn'); // ‰ΩøÁî®ÂîØ‰∏ÄIDÈÄâÊã©Ê∑ªÂä†Â∑•Â∫èÊåâÈíÆ
            const addProcessModal = document.getElementById('addProcessModal');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const cancelBtn = document.getElementById('cancelBtn');
            
            // ÂàùÂßãÂåñ‰∫∫ÂëòÊéíÁè≠Âä®ÊÄÅÊó•ÊúüÂäüËÉΩ
            initYearMonthSelect();
            generateScheduleTable();
            initMonthNavigation(); // ÂàùÂßãÂåñÊúà‰ªΩÂØºËà™ÂäüËÉΩÔºåËÆ©ÁÆ≠Â§¥ÊåâÈíÆÁîüÊïà
            
            // ‰∏∫Âπ¥Êúà‰∏ãÊãâÊ°ÜÊ∑ªÂä†ÂèòÂåñ‰∫ã‰ª∂
            const yearSelect = document.getElementById('yearSelect');
            const monthSelect = document.getElementById('monthSelect');
            
            if (yearSelect && monthSelect) {
                yearSelect.addEventListener('change', function() {
                    currentYear = parseInt(this.value);
                    // ‰øùÂ≠òÂΩìÂâçÈÄâÊã©ÁöÑÂπ¥‰ªΩÂíåÊúà‰ªΩÂà∞localStorage
                    localStorage.setItem('scheduleYear', currentYear);
                    localStorage.setItem('scheduleMonth', currentMonth);
                    generateScheduleTable();
                });
                
                monthSelect.addEventListener('change', function() {
                    currentMonth = parseInt(this.value);
                    // ‰øùÂ≠òÂΩìÂâçÈÄâÊã©ÁöÑÂπ¥‰ªΩÂíåÊúà‰ªΩÂà∞localStorage
                    localStorage.setItem('scheduleYear', currentYear);
                    localStorage.setItem('scheduleMonth', currentMonth);
                    generateScheduleTable();
                });
            }
            
            // È°µÈù¢Âä†ËΩΩÊó∂‰øùÂ≠òÂΩìÂâçÂπ¥‰ªΩÂíåÊúà‰ªΩÂà∞localStorage
            localStorage.setItem('scheduleYear', currentYear);
            localStorage.setItem('scheduleMonth', currentMonth);
            

            const addProcessForm = document.getElementById('addProcessForm');
            
            // ÊâìÂºÄÊ®°ÊÄÅÊ°Ü
            if (addProcessBtn) {
                addProcessBtn.addEventListener('click', function() {
                    addProcessModal.classList.remove('hidden');
                    
                    // Ëá™Âä®ÁîüÊàêÂ∑•Â∫èÁºñÂè∑ÂíåÈ°∫Â∫è
                    // È¶ñÂÖàÂ∞ùËØï‰ªéË°®Ê†ºÂÆûÈôÖ‰ΩøÁî®ÁöÑÊï∞ÊçÆÊ∫êprocessData‰∏≠ËØªÂèñÊï∞ÊçÆ
                    let processes = JSON.parse(localStorage.getItem('processData')) || [];
                    
                    // Â¶ÇÊûúprocessData‰∏∫Á©∫ÔºåÂÜçÂ∞ùËØï‰ªéproductionProcesses‰∏≠ËØªÂèñ
                    if (processes.length === 0) {
                        processes = JSON.parse(localStorage.getItem('productionProcesses')) || [];
                    }
                    
                    // ËÆ°ÁÆóÊúÄÂ§ßÂ∑•Â∫èÁºñÂè∑
                    let maxProcessId = 0;
                    processes.forEach(process => {
                        // ÊèêÂèñÁºñÂè∑ÈÉ®ÂàÜÔºàÂ¶Ç‰ªé"MIPT001"ÊèêÂèñ"001"Ôºâ
                        const idPart = process.id.match(/MIPT(\d+)/);
                        if (idPart) {
                            const processNum = parseInt(idPart[1], 10);
                            if (processNum > maxProcessId) {
                                maxProcessId = processNum;
                            }
                        }
                    });
                    
                    // ÁîüÊàêÊñ∞ÁöÑÂ∑•Â∫èÁºñÂè∑
                    const newProcessId = `MIPT${(maxProcessId + 1).toString().padStart(3, '0')}`;
                    document.getElementById('processId').value = newProcessId;
                    
                    // ËÆ°ÁÆóÊúÄÂ§ßÈ°∫Â∫è
                    let maxOrder = 0;
                    processes.forEach(process => {
                        // Ê£ÄÊü•processÂØπË±°‰∏≠ÊòØÂê¶ÊúâorderÂ±ûÊÄßÔºå‰ª•ÂèäÂÆÉÁöÑÁ±ªÂûã
                        let orderNum;
                        if (process.order) {
                            orderNum = parseInt(process.order, 10);
                        } else if (process.sequence) {
                            // Â§ÑÁêÜÂè¶‰∏ÄÁßçÂèØËÉΩÁöÑÂ±ûÊÄßÂêç
                            orderNum = parseInt(process.sequence, 10);
                        } else {
                            orderNum = NaN;
                        }
                        
                        if (!isNaN(orderNum) && orderNum > maxOrder) {
                            maxOrder = orderNum;
                        }
                    });
                    
                    // ÁîüÊàêÊñ∞ÁöÑÈ°∫Â∫è
                    const newOrder = maxOrder + 1;
                    document.getElementById('sequence').value = newOrder;
                });
            }
            
            // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
            function closeModal() {
                addProcessModal.classList.add('hidden');
                addProcessForm.reset();
            }
            
            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', closeModal);
            }
            
            if (cancelBtn) {
                cancelBtn.addEventListener('click', closeModal);
            }
            
            // ÁÇπÂáªÊ®°ÊÄÅÊ°ÜÂ§ñÈÉ®ÂÖ≥Èó≠
            if (addProcessModal) {
                addProcessModal.addEventListener('click', function(e) {
                    if (e.target === addProcessModal) {
                        closeModal();
                    }
                });
            }
            
            // Ê∑ªÂä†Â∑•Â∫èË°®ÂçïÊèê‰∫§‰∫ã‰ª∂
            if (addProcessForm) {
                addProcessForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Ë°®ÂçïÈ™åËØÅ
                    const processIdInput = document.getElementById('processId');
                    const processNameInput = document.getElementById('processName');
                    const sequenceInput = document.getElementById('sequence');
                    const standardTimeInput = document.getElementById('standardTime');
                    const requiredEquipmentInput = document.getElementById('requiredEquipment');
                    
                    let isValid = true;
                    
                    // Ê∏ÖÈô§‰πãÂâçÁöÑÈîôËØØÊ†∑Âºè
                    [processIdInput, processNameInput, sequenceInput, standardTimeInput, requiredEquipmentInput].forEach(input => {
                        input.classList.remove('border-red-500');
                        const errorEl = input.nextElementSibling;
                        if (errorEl && errorEl.classList.contains('error-message')) {
                            errorEl.remove();
                        }
                    });
                    
                    // È™åËØÅÂ∑•Â∫èÁºñÂè∑
                    if (!processIdInput.value.trim()) {
                        isValid = false;
                        showError(processIdInput, 'Â∑•Â∫èÁºñÂè∑‰∏çËÉΩ‰∏∫Á©∫');
                    } else if (!/^MIPT\d{3}$/.test(processIdInput.value)) {
                        isValid = false;
                        showError(processIdInput, 'Â∑•Â∫èÁºñÂè∑Ê†ºÂºè‰∏çÊ≠£Á°ÆÔºåÂ∫î‰∏∫MIPTXXXÔºàÂ¶ÇMIPT001Ôºâ');
                    }
                    
                    // È™åËØÅÂ∑•Â∫èÂêçÁß∞
                    if (!processNameInput.value.trim()) {
                        isValid = false;
                        showError(processNameInput, 'Â∑•Â∫èÂêçÁß∞‰∏çËÉΩ‰∏∫Á©∫');
                    }
                    
                    // È™åËØÅÈ°∫Â∫è
                    if (!sequenceInput.value) {
                        isValid = false;
                        showError(sequenceInput, 'È°∫Â∫è‰∏çËÉΩ‰∏∫Á©∫');
                    } else if (parseInt(sequenceInput.value) <= 0) {
                        isValid = false;
                        showError(sequenceInput, 'È°∫Â∫èÂøÖÈ°ªÊòØÊ≠£Êï¥Êï∞');
                    }
                    
                    // È™åËØÅÊ†áÂáÜÂ∑•Êó∂
                    if (!standardTimeInput.value) {
                        isValid = false;
                        showError(standardTimeInput, 'Ê†áÂáÜÂ∑•Êó∂‰∏çËÉΩ‰∏∫Á©∫');
                    } else if (parseFloat(standardTimeInput.value) <= 0) {
                        isValid = false;
                        showError(standardTimeInput, 'Ê†áÂáÜÂ∑•Êó∂ÂøÖÈ°ªÊòØÊ≠£Êï∞');
                    }
                    
                    // È™åËØÅÊâÄÈúÄËÆæÂ§á
                    if (!requiredEquipmentInput.value.trim()) {
                        isValid = false;
                        showError(requiredEquipmentInput, 'ÊâÄÈúÄËÆæÂ§á‰∏çËÉΩ‰∏∫Á©∫');
                    }
                    
                    if (!isValid) {
                        return;
                    }
                    
                    // Ëé∑ÂèñË°®ÂçïÊï∞ÊçÆ
                    const formData = new FormData(addProcessForm);
                    const processData = {
                        processId: formData.get('processId'),
                        processName: formData.get('processName'),
                        sequence: parseInt(formData.get('sequence')),
                        standardTime: parseFloat(formData.get('standardTime')),
                        requiredEquipment: formData.get('requiredEquipment')
                    };
                    
                    // ‰ªélocalStorageËé∑ÂèñÁé∞ÊúâÂ∑•Â∫èÊï∞ÊçÆ
                    let processes = JSON.parse(localStorage.getItem('productionProcesses')) || [];
                    
                    // Ê£ÄÊü•Â∑•Â∫èÁºñÂè∑ÊòØÂê¶Â∑≤Â≠òÂú®ÔºàÈô§‰∫ÜÊõ¥Êñ∞Áé∞ÊúâËÆ∞ÂΩïÔºâ
                    const existingIndex = processes.findIndex(p => p.processId === processData.processId);
                    if (existingIndex !== -1) {
                        // Êõ¥Êñ∞Áé∞ÊúâÂ∑•Â∫è
                        processes[existingIndex] = processData;
                    } else {
                        // Ê∑ªÂä†Êñ∞Â∑•Â∫è
                        processes.push(processData);
                    }
                    
                    // ‰øùÂ≠òÂà∞localStorage
                    localStorage.setItem('productionProcesses', JSON.stringify(processes));
                    
                    // ÂêåÊó∂‰øùÂ≠òÂà∞processDataÈîÆÔºåÁ°Æ‰øùË°®Ê†ºÂä†ËΩΩÊó∂ËÉΩÁúãÂà∞Êñ∞Êï∞ÊçÆ
                    localStorage.setItem('processData', JSON.stringify(processes));
                    
                    // Êõ¥Êñ∞Ë°®Ê†ºÊòæÁ§∫
                    renderProcessTable(processes);
                    
                    // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
                    closeModal();
                });
            }
            
            // ÊòæÁ§∫ÈîôËØØ‰ø°ÊÅØ
            function showError(input, message) {
                input.classList.add('border-red-500');
                let errorEl = input.nextElementSibling;
                if (errorEl && errorEl.classList.contains('error-message')) {
                    errorEl.textContent = message;
                } else {
                    errorEl = document.createElement('p');
                    errorEl.className = 'error-message text-red-500 text-sm mt-1';
                    errorEl.textContent = message;
                    input.parentNode.appendChild(errorEl);
                }
            }
            
            // Ê∏≤ÊüìÂ∑•Â∫èË°®Ê†º
            function renderProcessTable(processes) {
                const tbody = document.querySelector('.bg-white.divide-y.divide-gray-200 tbody');
                if (!tbody) return;
                
                // Ê∏ÖÁ©∫Ë°®Ê†º
                tbody.innerHTML = '';
                
                // ÊåâÈ°∫Â∫èÊéíÂ∫è
                processes.sort((a, b) => a.sequence - b.sequence);
                
                // Ê∑ªÂä†Â∑•Â∫èË°å
                processes.forEach((process, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${process.sequence}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${process.processId}</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-gray-500">${process.processName}</span>
                                <button class="text-primary hover:text-blue-800 text-sm add-next-process" data-sequence="${process.sequence}" data-index="${index}">
                                    <i class="fa fa-plus-circle"></i>
                                </button>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${process.standardTime}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${process.requiredEquipment}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                            <button class="text-primary hover:text-blue-800 mr-3 edit-process" data-id="${process.processId}">
                                <i class="fa fa-edit"></i> ÁºñËæë
                            </button>
                            <button class="text-danger hover:text-red-800 delete-process" data-id="${process.processId}">
                                <i class="fa fa-trash"></i> Âà†Èô§
                            </button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
                
                // ‰∏∫Êñ∞Â¢ûÁöÑ"Â¢ûÂä†Â∑•Â∫è"ÊåâÈíÆÊ∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂ÁõëÂê¨Âô®
                document.querySelectorAll('.add-next-process').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const currentSequence = parseInt(this.dataset.sequence);
                        const currentIndex = parseInt(this.dataset.index);
                        
                        // ÂàõÂª∫Êñ∞Â∑•Â∫èÂØπË±°
                        // ËÆ°ÁÆóÊúÄÂ§ßÂ∑•Â∫èÁºñÂè∑
                        let maxProcessId = 0;
                        processes.forEach(process => {
                            // ÊèêÂèñÁºñÂè∑ÈÉ®ÂàÜÔºàÂ¶Ç‰ªé"MIPT001"ÊèêÂèñ"001"Ôºâ
                            const idPart = process.processId.match(/MIPT(\d+)/);
                            if (idPart) {
                                const processNum = parseInt(idPart[1], 10);
                                if (processNum > maxProcessId) {
                                    maxProcessId = processNum;
                                }
                            }
                        });
                        
                        // ÁîüÊàêÊñ∞ÁöÑÂ∑•Â∫èÁºñÂè∑
                        const newProcessId = `MIPT${(maxProcessId + 1).toString().padStart(3, '0')}`;
                        
                        const newProcess = {
                            processId: newProcessId,
                            processName: `Êñ∞Â∑•Â∫è${processes.length + 1}`,
                            sequence: currentSequence + 0.5, // ‰ΩøÁî®Â∞èÊï∞Â∫èÂàóÁ°Æ‰øùÊñ∞Â∑•Â∫èÊèíÂÖ•Âà∞ÂΩìÂâçÂ∑•Â∫è‰πãÂêé
                            standardTime: 0,
                            requiredEquipment: ''
                        };
                        
                        // Êõ¥Êñ∞localStorage‰∏≠ÁöÑÂ∑•Â∫èÊï∞ÊçÆ
                        processes.push(newProcess);
                        localStorage.setItem('productionProcesses', JSON.stringify(processes));
                        localStorage.setItem('processData', JSON.stringify(processes));
                        
                        // ÈáçÊñ∞Ê∏≤ÊüìË°®Ê†ºÔºå‰ºöËá™Âä®ÊåâsequenceÊéíÂ∫è
                        renderProcessTable(processes);
                    });
                });
                
                // ÈáçÊñ∞ÁºñÂè∑È°∫Â∫èÂàóÔºåÁ°Æ‰øùËøûÁª≠
                reorderProcessSequence();
            }
            
            // È°µÈù¢Âä†ËΩΩÊó∂Âä†ËΩΩÂ∑•Â∫èÊï∞ÊçÆ
            const savedProcesses = JSON.parse(localStorage.getItem('productionProcesses')) || [];
            renderProcessTable(savedProcesses);
            
            // Ê∏≤ÊüìËÆ¢ÂçïÁÆ°ÁêÜÈ°µÈù¢ÁöÑÂ∑•Â∫èÂÆâÊéíË°®Ê†º
            // È°µÈù¢Âä†ËΩΩÊó∂Ê∏≤ÊüìËÆ¢ÂçïÁÆ°ÁêÜÈ°µÈù¢ÁöÑÂ∑•Â∫èÂÆâÊéíË°®Ê†º
            renderOrderProcessTable();

            // ËÆ¢ÂçïËØ¶ÊÉÖÊ®°ÊÄÅÊ°Ü
            const orderDetailBtns = document.querySelectorAll('.kanban-card button');
            const orderDetailModal = document.getElementById('order-detail-modal');
            const closeOrderDetail = document.getElementById('close-order-detail');

            orderDetailBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    orderDetailModal.classList.remove('hidden');
                });
            });

            closeOrderDetail.addEventListener('click', function() {
                orderDetailModal.classList.add('hidden');
            });

            // ÁÇπÂáªÊ®°ÊÄÅÊ°ÜÂ§ñÈÉ®ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
            orderDetailModal.addEventListener('click', function(e) {
                if (e.target === orderDetailModal) {
                    orderDetailModal.classList.add('hidden');
                }
            });

            // ÂàùÂßãÂåñÂõæË°®
            if(typeof Chart !== 'undefined') {
                // ËÆ¢ÂçïÂÆåÊàêÁéáÂõæË°®
                const orderCompletionCtx = document.getElementById('orderCompletionChart');
                if(orderCompletionCtx) {
                    new Chart(orderCompletionCtx, {
                        type: 'bar',
                        data: {
                            labels: ['1Êúà', '2Êúà', '3Êúà', '4Êúà', '5Êúà', '6Êúà', '7Êúà'],
                            datasets: [{
                                label: 'ÊåâÊó∂ÂÆåÊàê',
                                data: [65, 72, 68, 75, 82, 85, 88],
                                backgroundColor: '#10b981',
                                borderColor: '#10b981',
                                borderWidth: 1
                            }, {
                                label: 'Âª∂ÊúüÂÆåÊàê',
                                data: [15, 12, 15, 10, 8, 7, 5],
                                backgroundColor: '#ef4444',
                                borderColor: '#ef4444',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    max: 100,
                                    ticks: {
                                        callback: function(value) {
                                            return value + '%';
                                        }
                                    }
                                }
                            },
                            plugins: {
                                legend: {
                                    position: 'top',
                                },
                                title: {
                                    display: false
                                }
                            }
                        }
                    });
                }

                // Áîü‰∫ßÊïàÁéáÂõæË°®
                const productionEfficiencyCtx = document.getElementById('productionEfficiencyChart');
                if(productionEfficiencyCtx) {
                    new Chart(productionEfficiencyCtx, {
                        type: 'line',
                        data: {
                            labels: ['1Êúà', '2Êúà', '3Êúà', '4Êúà', '5Êúà', '6Êúà', '7Êúà'],
                            datasets: [{
                                label: 'ËÆ°ÂàíÁîü‰∫ßÊó∂Èó¥',
                                data: [40, 42, 45, 44, 46, 48, 50],
                                borderColor: '#1e40af',
                                backgroundColor: 'rgba(30, 64, 175, 0.1)',
                                borderWidth: 2,
                                fill: true,
                                tension: 0.4
                            }, {
                                label: 'ÂÆûÈôÖÁîü‰∫ßÊó∂Èó¥',
                                data: [42, 43, 44, 45, 45, 47, 48],
                                borderColor: '#f59e0b',
                                backgroundColor: 'rgba(245, 158, 11, 0.1)',
                                borderWidth: 2,
                                fill: true,
                                tension: 0.4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    ticks: {
                                        callback: function(value) {
                                            return value + 'Â∞èÊó∂';
                                        }
                                    }
                                }
                            },
                            plugins: {
                                legend: {
                                    position: 'top',
                                }
                            }
                        }
                    });
                }

                // Âª∂ÊúüËÆ¢ÂçïÂàÜÊûêÂõæË°®
                const delayAnalysisCtx = document.getElementById('delayAnalysisChart');
                if(delayAnalysisCtx) {
                    new Chart(delayAnalysisCtx, {
                        type: 'pie',
                        data: {
                            labels: ['ÊùêÊñôÈóÆÈ¢ò', 'ËÆæÂ§áÊïÖÈöú', '‰∫∫Âëò‰∏çË∂≥', 'Â∑•Ëâ∫ÂèòÊõ¥', 'ÂÖ∂‰ªñÂéüÂõ†'],
                            datasets: [{
                                data: [35, 25, 20, 15, 5],
                                backgroundColor: [
                                    '#ef4444',
                                    '#f59e0b',
                                    '#10b981',
                                    '#1e40af',
                                    '#64748b'
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'right',
                                }
                            }
                        }
                    });
                }

                // ËµÑÊ∫êÂà©Áî®ÁéáÂõæË°®
                const resourceUtilizationCtx = document.getElementById('resourceUtilizationChart');
                if(resourceUtilizationCtx) {
                    new Chart(resourceUtilizationCtx, {
                        type: 'doughnut',
                        data: {
                            labels: ['ËÆæÂ§áÂà©Áî®Áéá', '‰∫∫ÂëòÂà©Áî®Áéá', 'Á©∫Èó¥Âà©Áî®Áéá', 'Áâ©ÊñôÂà©Áî®Áéá'],
                            datasets: [{
                                data: [85, 80, 75, 90],
                                backgroundColor: [
                                    '#1e40af',
                                    '#f59e0b',
                                    '#10b981',
                                    '#8b5cf6'
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'right',
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            return context.label + ': ' + context.raw + '%';
                                        }
                                    }
                                }
                            }
                        }
                    });
                }
            }

            // Ê®°ÊãüÊãñÊãΩÂäüËÉΩ
            const kanbanCards = document.querySelectorAll('.kanban-card');
            const kanbanColumns = document.querySelectorAll('.kanban-column');

            kanbanCards.forEach(card => {
                card.setAttribute('draggable', true);
                
                card.addEventListener('dragstart', function(e) {
                    e.dataTransfer.setData('text/plain', card.innerHTML);
                    e.dataTransfer.effectAllowed = 'move';
                    card.classList.add('opacity-50');
                });
                
                card.addEventListener('dragend', function() {
                    card.classList.remove('opacity-50');
                });
            });
            
            kanbanColumns.forEach(column => {
                column.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    e.dataTransfer.dropEffect = 'move';
                    column.classList.add('bg-gray-200');
                });
                
                column.addEventListener('dragleave', function() {
                    column.classList.remove('bg-gray-200');
                });
                
                column.addEventListener('drop', function(e) {
                    e.preventDefault();
                    column.classList.remove('bg-gray-200');
                    
                    const data = e.dataTransfer.getData('text/plain');
                    const draggedCard = document.querySelector('.kanban-card.opacity-50');
                    
                    if(draggedCard) {
                        // ÂÖãÈöÜÂç°ÁâáÂπ∂Ê∑ªÂä†Âà∞Êñ∞Âàó
                        const newCard = document.createElement('div');
                        newCard.className = draggedCard.className;
                        newCard.innerHTML = data;
                        
                        // Ê†πÊçÆÂàóÁöÑÁä∂ÊÄÅÊõ¥Êñ∞Âç°ÁâáËæπÊ°ÜÈ¢úËâ≤
                        const columnType = column.querySelector('h4').textContent.trim();
                        newCard.classList.remove('border-gray-400', 'border-warning', 'border-danger', 'border-success', 'border-primary', 'border-gray-600');
                        
                        if(columnType === 'ÂæÖÁîü‰∫ß') {
                            newCard.classList.add('border-gray-400');
                        } else if(columnType === 'Áîü‰∫ß‰∏≠') {
                            newCard.classList.add('border-warning');
                        } else if(columnType === 'Â∑≤ÂÆåÊàê') {
                            newCard.classList.add('border-success');
                        } else if(columnType === 'Ë¥®Ê£Ä‰∏≠') {
                            newCard.classList.add('border-primary');
                        }
                        
                        // Ê∑ªÂä†Âà∞Âàó‰∏≠
                        const cardsContainer = column.querySelector('.space-y-3');
                        cardsContainer.appendChild(newCard);
                        
                        // Ê∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂
                        newCard.querySelector('button').addEventListener('click', function() {
                            document.getElementById('order-detail-modal').classList.remove('hidden');
                        });
                        
                        // ÈáçÊñ∞ÂàùÂßãÂåñÊãñÊãΩ
                        newCard.setAttribute('draggable', true);
                        newCard.addEventListener('dragstart', function(e) {
                            e.dataTransfer.setData('text/plain', newCard.innerHTML);
                            e.dataTransfer.effectAllowed = 'move';
                            newCard.classList.add('opacity-50');
                        });
                        
                        newCard.addEventListener('dragend', function() {
                            newCard.classList.remove('opacity-50');
                        });
                        
                        // Êõ¥Êñ∞ÂàóËÆ°Êï∞
                        updateColumnCount();
                    }
                });
            });
            
        });
        
        // Êõ¥Êñ∞ÂàóËÆ°Êï∞
        function updateColumnCount() {
            const kanbanColumns = document.querySelectorAll('.kanban-column');
            kanbanColumns.forEach(column => {
                const cardsCount = column.querySelectorAll('.kanban-card').length;
                const countBadge = column.querySelector('span.bg-white');
                if(countBadge) {
                    countBadge.textContent = cardsCount;
                }
            });
        }
        
        // ÁîüÊàê23ÈÅìÂ∑•Â∫èÊï∞ÊçÆÁöÑÂáΩÊï∞
        function generateProcesses() {
            // ‰ªélocalStorageËé∑Âèñindex.html‰∏≠Â∑•Â∫èÁÆ°ÁêÜÁöÑÊï∞ÊçÆ
            const savedProcesses = JSON.parse(localStorage.getItem('savedProcessData') || '[]');
            
            if (savedProcesses.length === 0) {
                alert('Êú™ÊâæÂà∞Â∑•Â∫èÁÆ°ÁêÜÊï∞ÊçÆÔºåËØ∑ÂÖàÂú®index.html‰∏≠Ê∑ªÂä†Â∑•Â∫èÔºÅ');
                return [];
            }
            
            // Â§ÑÁêÜÂ∑•Â∫èÊï∞ÊçÆ
            const processes = savedProcesses.map((proc, index) => {
                // ËÆ°ÁÆóÊ†áÂáÜÂ∑•Êó∂Ôºö8Èô§‰ª•ÂÆöÈ¢ùÊï∞ÈáèÔºå‰øùÁïô5‰ΩçÂ∞èÊï∞
                const standardTime = proc.quota ? parseFloat((8 / parseFloat(proc.quota)).toFixed(5)) : 0;
                
                return {
                    id: proc.id, // Â∑•Â∫èID
                    name: proc.name, // Â∑•Â∫èÂêçÁß∞
                    order: (index + 1).toString(), // È°∫Â∫èÂè∑
                    time: standardTime.toString(), // Ê†áÂáÜÂ∑•Êó∂
                    equipment: "", // ËÆæÂ§áÔºàÊöÇÊó∂‰∏∫Á©∫Ôºâ
                    dependency: "" // ‰æùËµñÂÖ≥Á≥ªÔºàÊöÇÊó∂‰∏∫Á©∫Ôºâ
                };
            });

            // ‰øùÂ≠òÂà∞localStorage
            localStorage.setItem('processData', JSON.stringify(processes));
            console.log('Â∑•Â∫èÊï∞ÊçÆÂ∑≤ÊàêÂäüÁîüÊàêÂπ∂‰øùÂ≠òÂà∞localStorage‰∏≠');
            console.log('ÁîüÊàêÁöÑÊï∞ÊçÆ:', processes);
            
            // Áõ¥Êé•Âú®Â∑•Â∫èËßÑÂàíË°®Ê†º‰∏≠Ê∑ªÂä†Êï∞ÊçÆ
            const processTable = document.getElementById('processPlanningTable');
            if (!processTable) {
                console.error('Êâæ‰∏çÂà∞Â∑•Â∫èË°®Ê†º');
                return processes;
            }
            
            const tbody = processTable.querySelector('tbody');
            if (!tbody) {
                console.error('Êâæ‰∏çÂà∞tbodyÂÖÉÁ¥†');
                return processes;
            }
            
            // Ê∏ÖÁ©∫Áé∞ÊúâË°®Ê†ºÂÜÖÂÆπ
            tbody.innerHTML = '';
            
            // Áõ¥Êé•Ê∑ªÂä†Ë°®Ê†ºË°å
            processes.forEach((process, index) => {
                console.log(`Áõ¥Êé•Ê∑ªÂä†Á¨¨${index+1}Ë°åÔºåÂ∑•Â∫èID: ${process.id}`);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${process.order}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">${process.id}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${process.name}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${process.time}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">${process.equipment}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <a href="#" class="text-primary hover:text-blue-800 mr-3" onclick="openEditProcessModal(this); return false;">
                            <i class="fa fa-edit"></i>
                        </a>
                        <a href="#" class="text-red-600 hover:text-red-900" onclick="deleteProcess(this); return false;">
                            <i class="fa fa-trash"></i>
                        </a>
                    </td>
                `;
                
                tbody.appendChild(row);
                console.log('Ê∑ªÂä†ÊàêÂäü');
            });
            
            // ÊòæÁ§∫ÊàêÂäüÊèêÁ§∫
            alert(`Â∑≤ÊàêÂäü‰ªéÂ∑•Â∫èÁÆ°ÁêÜÊ®°ÂùóÁîüÊàê${processes.length}ÈÅìÂ∑•Â∫èÂπ∂‰øùÂ≠òÂà∞Â∑•Â∫èËßÑÂàíË°®Ê†º‰∏≠ÔºÅ`);
            
            // ÁîüÊàêÂ∑•Â∫èÂêéÔºåËá™Âä®Êõ¥Êñ∞ËÆ¢ÂçïÁÆ°ÁêÜÈ°µÈù¢ÁöÑÂ∑•Â∫èÂÆâÊéíË°®Ê†º
            renderOrderProcessTable();
            
            // ÈáçÊñ∞ÁºñÂè∑È°∫Â∫èÂàóÔºåÁ°Æ‰øùËøûÁª≠
            reorderProcessSequence();
            
            return processes;
        }

        // Ê†πÊçÆËÆ¢ÂçïÁä∂ÊÄÅËøîÂõûÁõ∏Â∫îÁöÑÊ†∑ÂºèÔºà‰∏éËÆ°‰ª∂Â∑•ËµÑÁ≥ªÁªü‰øùÊåÅ‰∏ÄËá¥Ôºâ
        function getOrderStatusStyle(status) {
            switch(status) {
                case 'ÂæÖÁîü‰∫ß':
                    return 'background-color: #ffcccc; color: #cc0000; padding: 4px 8px; border-radius: 4px;';
                case 'Áîü‰∫ß‰∏≠':
                    return 'background-color: #ccccff; color: #0000cc; padding: 4px 8px; border-radius: 4px;';
                case 'Â∑≤ÂÆåÊàê':
                    return 'background-color: #ccffcc; color: #006600; padding: 4px 8px; border-radius: 4px;';
                default:
                    return '';
            }
        }

        // Ê∏≤ÊüìËÆ¢ÂçïÂàóË°®
        // Ê£ÄÊü•Âπ∂Ê∑ªÂä†Á§∫‰æãËÆ¢ÂçïÊï∞ÊçÆ
        function checkAndAddSampleOrders() {
            try {
                // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÊúâËÆ¢ÂçïÊï∞ÊçÆ
                const orders = localStorage.getItem('orders');
                const productionOrderList = localStorage.getItem('productionOrderList');
                
                // Â¶ÇÊûú‰∏§‰∏™Âú∞ÊñπÈÉΩÊ≤°ÊúâÊï∞ÊçÆÔºåÊ∑ªÂä†Á§∫‰æãËÆ¢Âçï
                if (!orders && !productionOrderList) {
                    const sampleOrders = [
                        {
                            customer: 'ÂÆ¢Êà∑A',
                            orderNumber: 'PO-001',
                            quantity: 100,
                            status: 'ËøõË°å‰∏≠'
                        },
                        {
                            customer: 'ÂÆ¢Êà∑B',
                            orderNumber: 'PO-002',
                            quantity: 200,
                            status: 'ÂæÖÁîü‰∫ß'
                        },
                        {
                            customer: 'ÂÆ¢Êà∑C',
                            orderNumber: 'PO-003',
                            quantity: 150,
                            status: 'Â∑≤ÂÆåÊàê'
                        }
                    ];
                    
                    // ‰øùÂ≠òÂà∞productionOrderList
                    localStorage.setItem('productionOrderList', JSON.stringify(sampleOrders));
                    console.log('Â∑≤Ê∑ªÂä†Á§∫‰æãËÆ¢ÂçïÊï∞ÊçÆ');
                    
                    // Êõ¥Êñ∞ÁªüËÆ°Âç°ÁâáÊï∞ÊçÆ
                    updateStatisticsCards();
                }
            } catch (error) {
                console.error('Ê∑ªÂä†Á§∫‰æãËÆ¢ÂçïÊï∞ÊçÆÊó∂Âá∫Èîô:', error);
            }
        }
        
        // ÁªüËÆ°ËÆ¢ÂçïÊï∞ÈáèÂáΩÊï∞
        function countOrdersByStatus() {
            let productionOrders = [];
            try {
                // Ëé∑ÂèñËÆ¢ÂçïÊï∞ÊçÆ - ÂÖàÂ∞ùËØï‰ªéordersËé∑ÂèñÔºåÂ§±Ë¥•Âàô‰ªéproductionOrderListËé∑Âèñ
                const ordersData = localStorage.getItem('orders');
                if (ordersData) {
                    const allOrders = JSON.parse(ordersData);
                    if (Array.isArray(allOrders) && allOrders.length > 0) {
                        productionOrders = allOrders.map(order => ({
                            orderNumber: order.orderNo,
                            quantity: order.qty,
                            status: order.status,
                            customer: order.customer
                        }));
                    }
                }
                
                // Â¶ÇÊûúorders‰∏≠Ê≤°ÊúâÊï∞ÊçÆÔºåÂ∞ùËØï‰ªéproductionOrderListËé∑Âèñ
                if (productionOrders.length === 0) {
                    const productionOrderListData = localStorage.getItem('productionOrderList');
                    if (productionOrderListData) {
                        productionOrders = JSON.parse(productionOrderListData);
                    }
                }
                
                // Á°Æ‰øùproductionOrdersÊòØÊï∞ÁªÑ
                if (!Array.isArray(productionOrders)) {
                    productionOrders = [];
                }
            } catch (error) {
                console.error('Ëß£ÊûêËÆ¢ÂçïÊï∞ÊçÆÊó∂Âá∫Èîô:', error);
                productionOrders = [];
            }
            
            // ÁªüËÆ°‰∏çÂêåÁä∂ÊÄÅÁöÑËÆ¢ÂçïÊï∞Èáè
            const counts = {
                'ÂæÖÁîü‰∫ß': 0,
                'Áîü‰∫ß‰∏≠': 0,
                'Â∑≤ÂÆåÊàê': 0,
                'ÊÄªËÆ°': productionOrders.length
            };
            
            productionOrders.forEach(order => {
                if (counts.hasOwnProperty(order.status)) {
                    counts[order.status]++;
                }
            });
            
            return counts;
        }
        
        // Â°´ÂÖÖÁ≠õÈÄâ‰∏ãÊãâÊ°Ü
        function populateFilterDropdowns() {
            let productionOrders = [];
            try {
                // Ëé∑ÂèñËÆ¢ÂçïÊï∞ÊçÆ - ÂÖàÂ∞ùËØï‰ªéordersËé∑ÂèñÔºåÂ§±Ë¥•Âàô‰ªéproductionOrderListËé∑Âèñ
                const ordersData = localStorage.getItem('orders');
                if (ordersData) {
                    const allOrders = JSON.parse(ordersData);
                    if (Array.isArray(allOrders) && allOrders.length > 0) {
                        productionOrders = allOrders.map(order => ({
                            orderNumber: order.orderNo,
                            quantity: order.qty,
                            status: order.status,
                            customer: order.customer,
                            product: order.product || 'Êú™ÊåáÂÆö‰∫ßÂìÅ',
                            deliveryDate: order.deliveryDate || 'Êú™ÊåáÂÆö‰∫§Êúü',
                            processProgress: order.processProgress || '0/23'
                        }));
                    }
                }
                
                // Â¶ÇÊûúorders‰∏≠Ê≤°ÊúâÊï∞ÊçÆÔºåÂ∞ùËØï‰ªéproductionOrderListËé∑Âèñ
                if (productionOrders.length === 0) {
                    const productionOrderListData = localStorage.getItem('productionOrderList');
                    if (productionOrderListData) {
                        productionOrders = JSON.parse(productionOrderListData);
                    }
                }
                
                // Á°Æ‰øùproductionOrdersÊòØÊï∞ÁªÑ
                if (!Array.isArray(productionOrders)) {
                    productionOrders = [];
                }
            } catch (error) {
                console.error('Ëß£ÊûêËÆ¢ÂçïÊï∞ÊçÆÊó∂Âá∫Èîô:', error);
                productionOrders = [];
            }
            
            // ÊèêÂèñÂîØ‰∏ÄÂÄº
            const orderNumbers = [...new Set(productionOrders.map(order => order.orderNumber))];
            const products = [...new Set(productionOrders.map(order => order.product))];
            const customers = [...new Set(productionOrders.map(order => order.customer))];
            
            // Â°´ÂÖÖËÆ¢ÂçïÁ≠õÈÄâ‰∏ãÊãâÊ°Ü
            const orderFilter = document.getElementById('orderFilter');
            if (orderFilter) {
                // Ê∏ÖÁ©∫Áé∞ÊúâÈÄâÈ°πÔºà‰øùÁïô"ÊâÄÊúâËÆ¢Âçï"Ôºâ
                while (orderFilter.options.length > 1) {
                    orderFilter.remove(1);
                }
                
                // Ê∑ªÂä†ËÆ¢ÂçïÂè∑ÈÄâÈ°π
                orderNumbers.forEach(orderNumber => {
                    if (orderNumber) {
                        const option = document.createElement('option');
                        option.value = orderNumber;
                        option.textContent = orderNumber;
                        orderFilter.appendChild(option);
                    }
                });
            }
            
            // Â°´ÂÖÖ‰∫ßÂìÅÁ≠õÈÄâ‰∏ãÊãâÊ°Ü
            const productFilter = document.getElementById('productFilter');
            if (productFilter) {
                // Ê∏ÖÁ©∫Áé∞ÊúâÈÄâÈ°πÔºà‰øùÁïô"ÊâÄÊúâ‰∫ßÂìÅ"Ôºâ
                while (productFilter.options.length > 1) {
                    productFilter.remove(1);
                }
                
                // Ê∑ªÂä†‰∫ßÂìÅÈÄâÈ°π
                products.forEach(product => {
                    if (product && product !== 'Êú™ÊåáÂÆö‰∫ßÂìÅ') {
                        const option = document.createElement('option');
                        option.value = product;
                        option.textContent = product;
                        productFilter.appendChild(option);
                    }
                });
            }
            
            // Â°´ÂÖÖÂÆ¢Êà∑Á≠õÈÄâ‰∏ãÊãâÊ°Ü
            const customerFilter = document.getElementById('customerFilter');
            if (customerFilter) {
                // Ê∏ÖÁ©∫Áé∞ÊúâÈÄâÈ°πÔºà‰øùÁïô"ÊâÄÊúâÂÆ¢Êà∑"Ôºâ
                while (customerFilter.options.length > 1) {
                    customerFilter.remove(1);
                }
                
                // Ê∑ªÂä†ÂÆ¢Êà∑ÈÄâÈ°π
                customers.forEach(customer => {
                    if (customer && customer !== 'Êú™ÊåáÂÆöÂÆ¢Êà∑') {
                        const option = document.createElement('option');
                        option.value = customer;
                        option.textContent = customer;
                        customerFilter.appendChild(option);
                    }
                });
            }
        }
        
        // Ê∏≤ÊüìÁîü‰∫ßÁúãÊùøÂáΩÊï∞
        function renderKanbanBoard(filterOptions = {}) {
            let productionOrders = [];
            try {
                // Ëé∑ÂèñËÆ¢ÂçïÊï∞ÊçÆ - ÂÖàÂ∞ùËØï‰ªéordersËé∑ÂèñÔºåÂ§±Ë¥•Âàô‰ªéproductionOrderListËé∑Âèñ
                const ordersData = localStorage.getItem('orders');
                if (ordersData) {
                    const allOrders = JSON.parse(ordersData);
                    if (Array.isArray(allOrders) && allOrders.length > 0) {
                        productionOrders = allOrders.map(order => ({
                            orderNumber: order.orderNo,
                            quantity: order.qty,
                            status: order.status,
                            customer: order.customer,
                            product: order.product || 'Êú™ÊåáÂÆö‰∫ßÂìÅ',
                            deliveryDate: order.deliveryDate || 'Êú™ÊåáÂÆö‰∫§Êúü',
                            processProgress: order.processProgress || '0/23'
                        }));
                    }
                }
                
                // Â¶ÇÊûúorders‰∏≠Ê≤°ÊúâÊï∞ÊçÆÔºåÂ∞ùËØï‰ªéproductionOrderListËé∑Âèñ
                if (productionOrders.length === 0) {
                    const productionOrderListData = localStorage.getItem('productionOrderList');
                    if (productionOrderListData) {
                        productionOrders = JSON.parse(productionOrderListData);
                    }
                }
                
                // Á°Æ‰øùproductionOrdersÊòØÊï∞ÁªÑ
                if (!Array.isArray(productionOrders)) {
                    productionOrders = [];
                }
            } catch (error) {
                console.error('Ëß£ÊûêËÆ¢ÂçïÊï∞ÊçÆÊó∂Âá∫Èîô:', error);
                productionOrders = [];
            }
            
            // Â∫îÁî®Á≠õÈÄâÊù°‰ª∂
            const filteredOrders = productionOrders.filter(order => {
                // ËÆ¢ÂçïÁ≠õÈÄâ
                if (filterOptions.order && filterOptions.order !== 'all' && order.orderNumber !== filterOptions.order) {
                    return false;
                }
                
                // ‰∫ßÂìÅÁ≠õÈÄâ
                if (filterOptions.product && filterOptions.product !== 'all' && order.product !== filterOptions.product) {
                    return false;
                }
                
                // ÂÆ¢Êà∑Á≠õÈÄâ
                if (filterOptions.customer && filterOptions.customer !== 'all' && order.customer !== filterOptions.customer) {
                    return false;
                }
                
                return true;
            });
            
            // Ê∏ÖÁ©∫Áé∞ÊúâÂç°Áâá
            const columns = {
                'ÂæÖÁîü‰∫ß': document.querySelector('.kanban-column:nth-child(1) .space-y-3'),
                'Áîü‰∫ß‰∏≠': document.querySelector('.kanban-column:nth-child(2) .space-y-3'),
                'Â∑≤ÂÆåÊàê': document.querySelector('.kanban-column:nth-child(3) .space-y-3')
            };
            
            // Ê∏ÖÁ©∫ÊâÄÊúâÂàó
            Object.values(columns).forEach(column => {
                if (column) {
                    column.innerHTML = '';
                }
            });
            
            // ÁîüÊàêÂç°Áâá
            filteredOrders.forEach(order => {
                if (!order.status || !columns[order.status]) return;
                
                // Ê†πÊçÆÁä∂ÊÄÅÁ°ÆÂÆöËæπÊ°ÜÈ¢úËâ≤Âíå‰ºòÂÖàÁ∫ß
                let borderClass = 'border-gray-400';
                let statusBadge = '';
                
                if (order.status === 'ÂæÖÁîü‰∫ß') {
                    borderClass = 'border-gray-400';
                    statusBadge = '<span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded-full">ÂæÖÁîü‰∫ß</span>';
                } else if (order.status === 'Áîü‰∫ß‰∏≠') {
                    borderClass = 'border-warning';
                    statusBadge = '<span class="bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-1 rounded-full">Áîü‰∫ß‰∏≠</span>';
                } else if (order.status === 'Â∑≤ÂÆåÊàê') {
                    borderClass = 'border-success';
                    statusBadge = '<span class="bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full">Â∑≤ÂÆåÊàê</span>';
                }
                
                // ËÆ°ÁÆóÂâ©‰ΩôÂ§©Êï∞
                let remainingDaysText = 'Êú™ÊåáÂÆö';
                if (order.deliveryDate) {
                    const today = new Date();
                    const deliveryDate = new Date(order.deliveryDate);
                    const timeDiff = deliveryDate - today;
                    const remainingDays = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));
                    remainingDaysText = `${remainingDays}Â§©`;
                }
                
                // ÂàõÂª∫Âç°ÁâáHTML
                const cardHTML = `
                    <div class="kanban-card bg-white rounded-lg shadow-card p-3 border-l-4 ${borderClass}">
                        <div class="flex justify-between items-start">
                            <div>
                                <h5 class="font-medium">ËÆ¢Âçï #${order.orderNumber || 'Êú™ÁºñÂè∑'}</h5>
                                <p class="text-sm text-gray-500 mt-1">ÂÆ¢Êà∑: ${order.customer || 'Êú™ÊåáÂÆöÂÆ¢Êà∑'}</p>
                                <p class="text-sm text-gray-500">‰∫ßÂìÅ: ${order.product || 'Êú™ÊåáÂÆö‰∫ßÂìÅ'}</p>
                                <p class="text-sm text-gray-500">Êï∞Èáè: ${order.quantity || '0'}</p>
                            </div>
                            ${statusBadge}
                        </div>
                        <div class="mt-3">
                            <div class="flex justify-between text-xs">
                                <span class="text-gray-500">‰∫§Êúü: ${order.deliveryDate || 'Êú™ÊåáÂÆö'}</span>
                                <span class="text-gray-500">Ââ©‰Ωô: ${remainingDaysText}</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-1.5 mt-1">
                                <div class="bg-${order.status === 'ÂæÖÁîü‰∫ß' ? 'gray-400' : order.status === 'Áîü‰∫ß‰∏≠' ? 'warning' : 'success'} h-1.5 rounded-full" style="width: ${order.status === 'ÂæÖÁîü‰∫ß' ? '0%' : order.status === 'Áîü‰∫ß‰∏≠' ? '50%' : '100%'}"></div>
                            </div>
                        </div>
                        <div class="mt-3 flex justify-between">
                            <span class="text-xs text-gray-500">Â∑•Â∫èËøõÂ∫¶: ${order.processProgress || '0/23'}</span>
                            <button class="text-primary text-xs hover:underline view-detail-btn" data-order-number="${order.orderNumber || ''}">Êü•ÁúãËØ¶ÊÉÖ</button>
                        </div>
                    </div>
                `;
                
                // Ê∑ªÂä†Âà∞ÂØπÂ∫îÁöÑÂàó
                columns[order.status].innerHTML += cardHTML;
            });
            
            // Êõ¥Êñ∞ÂàóËÆ°Êï∞
            updateColumnCount();
            
            // ÈáçÊñ∞ÂàùÂßãÂåñÊãñÊãΩÂäüËÉΩ
            initDragAndDrop();
            
            // ‰∏∫Êü•ÁúãËØ¶ÊÉÖÊåâÈíÆÊ∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨Âô®
            const viewDetailBtns = document.querySelectorAll('.view-detail-btn');
            viewDetailBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const orderNumber = this.getAttribute('data-order-number');
                    if (orderNumber) {
                        // Ë∑≥ËΩ¨Âà∞ËÆ¢ÂçïÁÆ°ÁêÜÈ°µÈù¢
                        document.querySelectorAll('.page-content').forEach(page => page.classList.add('hidden'));
                        document.getElementById('orders-page').classList.remove('hidden');
                        
                        // Êõ¥Êñ∞È°µÈù¢Ê†áÈ¢ò
                        document.getElementById('page-title').textContent = 'ËÆ¢ÂçïÁÆ°ÁêÜ';
                        
                        // Â°´ÂÖÖËÆ¢ÂçïÂè∑Âà∞ÊêúÁ¥¢Ê°Ü
                        const searchInput = document.getElementById('ordersSearchInput');
                        if (searchInput) {
                            searchInput.value = orderNumber;
                            // Ëß¶ÂèëÊêúÁ¥¢‰∫ã‰ª∂
                            const searchEvent = new Event('input', { bubbles: true });
                            searchInput.dispatchEvent(searchEvent);
                        }
                    }
                });
            });
        }
        
        // ÂàùÂßãÂåñÊãñÊãΩÂäüËÉΩ
        function initDragAndDrop() {
            const kanbanCards = document.querySelectorAll('.kanban-card');
            const kanbanColumns = document.querySelectorAll('.kanban-column');

            kanbanCards.forEach(card => {
                card.setAttribute('draggable', true);
                
                card.addEventListener('dragstart', function(e) {
                    e.dataTransfer.setData('text/plain', card.innerHTML);
                    e.dataTransfer.effectAllowed = 'move';
                    card.classList.add('opacity-50');
                });
                
                card.addEventListener('dragend', function() {
                    card.classList.remove('opacity-50');
                });
            });
        }
        
        // Êõ¥Êñ∞ÁªüËÆ°Âç°ÁâáÊï∞ÊçÆ
        function updateStatisticsCards() {
            const counts = countOrdersByStatus();
            
            // Êõ¥Êñ∞ÂæÖÁîü‰∫ßËÆ¢ÂçïÂç°Áâá
            const pendingCard = document.querySelector('#dashboard-page .grid .bg-white:nth-child(1) .text-2xl');
            if (pendingCard) {
                pendingCard.textContent = counts['ÂæÖÁîü‰∫ß'];
            }
            
            // Êõ¥Êñ∞Áîü‰∫ß‰∏≠ËÆ¢ÂçïÂç°Áâá
            const inProgressCard = document.querySelector('#dashboard-page .grid .bg-white:nth-child(2) .text-2xl');
            if (inProgressCard) {
                inProgressCard.textContent = counts['Áîü‰∫ß‰∏≠'];
            }
            
            // Êõ¥Êñ∞Â∑≤ÂÆåÊàêËÆ¢ÂçïÂç°Áâá
            const completedCard = document.querySelector('#dashboard-page .grid .bg-white:nth-child(3) .text-2xl');
            if (completedCard) {
                completedCard.textContent = counts['Â∑≤ÂÆåÊàê'];
            }
            
            // Êõ¥Êñ∞ÊÄªËÆ°Êï∞ÊçÆ
            const totalElements = document.querySelectorAll('#dashboard-page .grid .bg-white .font-medium');
            totalElements.forEach(element => {
                if (element.textContent === '28') { // ÊâæÂà∞ÊòæÁ§∫ÊÄªËÆ°28ÁöÑÂÖÉÁ¥†
                    element.textContent = counts['ÊÄªËÆ°'];
                }
            });
            
            // Êõ¥Êñ∞ÁôæÂàÜÊØîËøõÂ∫¶Êù°
            if (counts['ÊÄªËÆ°'] > 0) {
                const pendingProgress = document.querySelector('#dashboard-page .grid .bg-white:nth-child(1) .bg-primary');
                if (pendingProgress) {
                    pendingProgress.style.width = (counts['ÂæÖÁîü‰∫ß'] / counts['ÊÄªËÆ°'] * 100).toFixed(1) + '%';
                }
                
                const inProgressProgress = document.querySelector('#dashboard-page .grid .bg-white:nth-child(2) .bg-warning');
                if (inProgressProgress) {
                    inProgressProgress.style.width = (counts['Áîü‰∫ß‰∏≠'] / counts['ÊÄªËÆ°'] * 100).toFixed(1) + '%';
                }
                
                const completedProgress = document.querySelector('#dashboard-page .grid .bg-white:nth-child(3) .bg-success');
                if (completedProgress) {
                    completedProgress.style.width = (counts['Â∑≤ÂÆåÊàê'] / counts['ÊÄªËÆ°'] * 100).toFixed(1) + '%';
                }
            }
        }
        
        // ËÆ¢ÂçïÊêúÁ¥¢ÂäüËÉΩ
        document.addEventListener('DOMContentLoaded', function() {
            // Ê∑ªÂä†‰∏Ä‰∫õÊ®°ÊãüËÆ¢ÂçïÊï∞ÊçÆÂà∞localStorage
            if (!localStorage.getItem('orders')) {
                const mockOrders = [
                    { orderNo: 'ORD-2025-0001', customer: '‰∏äÊµ∑ÁßëÊäÄÊúâÈôêÂÖ¨Âè∏', product: 'È´òÁ≤æÂ∫¶‰º†ÊÑüÂô®', qty: 50, status: 'ÂæÖÁîü‰∫ß', dueDate: '2025-07-25', remainingDays: 5, processProgress: '0/23' },
                    { orderNo: 'ORD-2025-0002', customer: 'Ê∑±Âú≥Á≤æÂØÜÂà∂ÈÄ†', product: 'Êú∫Ê¢∞ÊâãËáÇÁªÑ‰ª∂', qty: 20, status: 'Áîü‰∫ß‰∏≠', dueDate: '2025-07-22', remainingDays: 2, processProgress: '10/23' },
                    { orderNo: 'ORD-2025-0003', customer: 'Âçó‰∫¨ÁîµÂ≠êÈõÜÂõ¢', product: 'ÊéßÂà∂Âô®', qty: 50, status: 'Â∑≤ÂÆåÊàê', dueDate: '2025-07-15', remainingDays: -3, processProgress: '23/23' },
                    { orderNo: 'ORD-2025-0004', customer: 'Âåó‰∫¨Êô∫ËÉΩÂà∂ÈÄ†', product: 'ÊéßÂà∂Èù¢Êùø', qty: 100, status: 'ÂæÖÁîü‰∫ß', dueDate: '2025-07-30', remainingDays: 10, processProgress: '0/23' },
                    { orderNo: 'ORD-2025-0005', customer: 'Êù≠Â∑ûÁîµÂ≠êÁßëÊäÄ', product: 'ÊòæÁ§∫ÁªÑ‰ª∂', qty: 150, status: 'Áîü‰∫ß‰∏≠', dueDate: '2025-07-28', remainingDays: 8, processProgress: '6/23' },
                    { orderNo: 'ORD-2025-0006', customer: 'Ê≠¶Ê±âÁßëÊäÄÊúâÈôêÂÖ¨Âè∏', product: 'ÁîµÊ∫êÈÄÇÈÖçÂô®', qty: 200, status: 'Â∑≤ÂÆåÊàê', dueDate: '2025-07-18', remainingDays: -2, processProgress: '23/23' }
                ];
                localStorage.setItem('orders', JSON.stringify(mockOrders));
                console.log('Â∑≤Ê∑ªÂä†Ê®°ÊãüËÆ¢ÂçïÊï∞ÊçÆÂà∞localStorage');
            }
            
            const searchInput = document.getElementById('ordersSearchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    renderOrderList(searchTerm);
                    renderOrderProcessTable(searchTerm);
                });
            }
            
            // È°µÈù¢Âä†ËΩΩÊó∂Êõ¥Êñ∞ÁªüËÆ°Âç°ÁâáÊï∞ÊçÆ„ÄÅÂ°´ÂÖÖÁ≠õÈÄâ‰∏ãÊãâÊ°ÜÂíåÊ∏≤ÊüìÁúãÊùø
            updateStatisticsCards();
            populateFilterDropdowns();
            renderKanbanBoard();
            
            // Á≠õÈÄâÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
            const filterButton = document.getElementById('filterButton');
            if (filterButton) {
                filterButton.addEventListener('click', function() {
                    const orderFilter = document.getElementById('orderFilter').value;
                    const productFilter = document.getElementById('productFilter').value;
                    const customerFilter = document.getElementById('customerFilter').value;
                    
                    renderKanbanBoard({ order: orderFilter, product: productFilter, customer: customerFilter });
                });
            }
        });
        
        function renderOrderList(searchTerm = '') {
            const orderTable = document.getElementById('orderTable');
            if (!orderTable) return;
            
            const tbody = orderTable.querySelector('tbody');
            if (!tbody) return;
            
            // Ëé∑ÂèñËÆ¢ÂçïÊï∞ÊçÆ - ÂÖàÂ∞ùËØï‰ªéordersËé∑ÂèñÔºåÂ§±Ë¥•Âàô‰ªéproductionOrderListËé∑Âèñ
            let productionOrders = [];
            try {
                const ordersData = localStorage.getItem('orders');
                if (ordersData) {
                    const allOrders = JSON.parse(ordersData);
                    if (Array.isArray(allOrders) && allOrders.length > 0) {
                        productionOrders = allOrders.map(order => ({
                            orderNumber: order.orderNo,
                            quantity: order.qty,
                            status: order.status,
                            customer: order.customer
                        }));
                    }
                }
                
                // Â¶ÇÊûúorders‰∏≠Ê≤°ÊúâÊï∞ÊçÆÔºåÂ∞ùËØï‰ªéproductionOrderListËé∑Âèñ
                if (productionOrders.length === 0) {
                    const productionOrderListData = localStorage.getItem('productionOrderList');
                    if (productionOrderListData) {
                        productionOrders = JSON.parse(productionOrderListData);
                    }
                }
                
                // Á°Æ‰øùproductionOrdersÊòØÊï∞ÁªÑ
                if (!Array.isArray(productionOrders)) {
                    productionOrders = [];
                }
                
                // Â∫îÁî®ÊêúÁ¥¢Á≠õÈÄâ
                if (searchTerm) {
                    productionOrders = productionOrders.filter(order => {
                        const orderNumber = (order.orderNumber || '').toLowerCase();
                        return orderNumber.includes(searchTerm);
                    });
                }
                
                // ÊåâËÆ¢ÂçïÁä∂ÊÄÅÊéíÂ∫èÔºöÂæÖÁîü‰∫ß -> Áîü‰∫ß‰∏≠ -> Â∑≤ÂÆåÊàê
                productionOrders.sort((a, b) => {
                    const statusPriority = {
                        'ÂæÖÁîü‰∫ß': 1,
                        'Áîü‰∫ß‰∏≠': 2,
                        'Â∑≤ÂÆåÊàê': 3
                    };
                    
                    const statusA = a.status || '';
                    const statusB = b.status || '';
                    
                    return (statusPriority[statusA] || 999) - (statusPriority[statusB] || 999);
                });
            } catch (error) {
                console.error('Ëß£ÊûêËÆ¢ÂçïÊï∞ÊçÆÊó∂Âá∫Èîô:', error);
                productionOrders = [];
            }
            
            // Ê∏ÖÁ©∫Ë°®Ê†º
            tbody.innerHTML = '';
            
            // Ê∏≤ÊüìËÆ¢ÂçïË°å
            productionOrders.forEach((order, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-2 whitespace-nowrap">
                        <input type="radio" name="order-select" class="order-checkbox rounded border-gray-300 text-green-600 shadow-sm focus:border-green-300 focus:ring focus:ring-green-200 focus:ring-opacity-50">
                    </td>
                    <td class="px-6 py-2 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${order.customer || ''}</div>
                    </td>
                    <td class="px-6 py-2 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${order.orderNumber || ''}</div>
                    </td>
                    <td class="px-6 py-2 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${order.quantity || 0}</div>
                    </td>
                    <td class="px-6 py-2 whitespace-nowrap">
                        <div class="text-sm" style="${getOrderStatusStyle(order.status || 'ÂæÖÁîü‰∫ß')}">${order.status || 'ÂæÖÁîü‰∫ß'}</div>
                    </td>
                    <td class="px-6 py-2 whitespace-nowrap">
                        ${order.status !== 'Â∑≤ÂÆåÊàê' ? `
                        <button class="text-primary hover:text-blue-800 text-sm add-order-btn" data-order-index="${index}">
                            <i class="fa fa-plus-circle"></i>
                        </button>
                        ` : ''}
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            // Êõ¥Êñ∞ÁªüËÆ°Âç°ÁâáÊï∞ÊçÆ
            updateStatisticsCards();
        }
        
        // ‰∏∫Ê∏ÖÁ©∫ÊåâÈíÆÊ∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂ÁõëÂê¨Âô®
        const clearProcessTableBtn = document.getElementById('clearProcessTableBtn');
        if (clearProcessTableBtn) {
            clearProcessTableBtn.addEventListener('click', function() {
                // Á°ÆËÆ§Ê∏ÖÁ©∫
                if (confirm('Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫ÊâÄÊúâÂ∑•Â∫èÂÆâÊéíËÆ∞ÂΩïÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§çÔºÅ')) {
                    // Ê∏ÖÁ©∫localStorage‰∏≠ÁöÑÊï∞ÊçÆ
                    localStorage.removeItem('orderProcesses');
                    
                    // ÈáçÊñ∞Ê∏≤ÊüìË°®Ê†º
                    renderOrderProcessTable();
                    
                    // ÊòæÁ§∫ÊàêÂäüÊèêÁ§∫
                    alert('Â∑≤ÊàêÂäüÊ∏ÖÁ©∫ÊâÄÊúâÂ∑•Â∫èÂÆâÊéíËÆ∞ÂΩïÔºÅ');
                }
            });
        }
        
        // Ê∑ªÂä†Â∑•Â∫èÂÆâÊéíÊ®°ÊÄÅÊ°Ü
        const addOrderProcessModal = document.createElement('div');
        addOrderProcessModal.id = 'addOrderProcessModal';
        addOrderProcessModal.className = 'fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50 hidden';
        addOrderProcessModal.innerHTML = `
            <div class="bg-white rounded-lg p-6 w-full max-w-5xl">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold">Ê∑ªÂä†Â∑•Â∫èÂÆâÊéí</h3>
                    <button id="closeProcessModal" class="text-gray-500 hover:text-gray-700 text-xl">&times;</button>
                </div>
                <form id="addProcessForm">
                    <!-- Ëá™Âä®Â°´ÂÖÖÂ≠óÊÆµ - Á¨¨‰∏ÄË°åÔºöÂÆ¢Êà∑„ÄÅËÆ¢ÂçïÂè∑„ÄÅÊï∞Èáè -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label for="modal-customer" class="block text-sm font-medium text-gray-700 mb-1">ÂÆ¢Êà∑</label>
                            <input type="text" id="modal-customer" class="w-full px-3 py-2 border border-gray-300 rounded-md" readonly>
                        </div>
                        <div>
                            <label for="modal-order-number" class="block text-sm font-medium text-gray-700 mb-1">ËÆ¢ÂçïÂè∑</label>
                            <input type="text" id="modal-order-number" class="w-full px-3 py-2 border border-gray-300 rounded-md" readonly>
                        </div>
                        <div>
                            <label for="modal-quantity" class="block text-sm font-medium text-gray-700 mb-1">Êï∞Èáè</label>
                            <input type="number" id="modal-quantity" class="w-full px-3 py-2 border border-gray-300 rounded-md" readonly>
                        </div>
                    </div>
                    
                    <!-- Â∑•Â∫èÂÆâÊéíÂ≠óÊÆµ - Á¨¨‰∫åË°åÔºöÂâ©‰ΩôÂ≠óÊÆµ -->
                    <div class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-4">
                        <div>
                            <label for="modal-process-name" class="block text-sm font-medium text-gray-700 mb-1">Â∑•Â∫èÂêçÁß∞</label>
                            <select id="modal-process-name" class="w-full px-3 py-2 border border-gray-300 rounded-md" required>
                                <!-- ÈÄâÈ°πÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                            </select>
                        </div>
                        <div>
                            <label for="modal-required-count" class="block text-sm font-medium text-gray-700 mb-1">ÈúÄË¶ÅÊï∞/ÁÇâÊû∂</label>
                            <input type="number" id="modal-required-count" class="w-full px-3 py-2 border border-gray-300 rounded-md" min="1" required>
                        </div>
                        <div>
                            <label for="modal-prep-time" class="block text-sm font-medium text-gray-700 mb-1">ÂáÜÂ§áÂ∑•‰ΩúÂ∑•Êó∂ÔºàÂ∞èÊó∂Ôºâ</label>
                            <input type="number" id="modal-prep-time" class="w-full px-3 py-2 border border-gray-300 rounded-md" min="0" step="0.5" required>
                        </div>
                        <div>
                            <label for="modal-total-time" class="block text-sm font-medium text-gray-700 mb-1">ÊÄªÂ∑•Êó∂</label>
                            <input type="text" id="modal-total-time" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="‰æãÂ¶ÇÔºö8Â∞èÊó∂" required>
                        </div>
                        <div>
                            <label for="modal-start-date" class="block text-sm font-medium text-gray-700 mb-1">ÂºÄÂßãÊó•Êúü</label>
                            <input type="date" id="modal-start-date" class="w-full px-3 py-2 border border-gray-300 rounded-md" required>
                        </div>
                        <div>
                            <label for="modal-end-date" class="block text-sm font-medium text-gray-700 mb-1">ÁªìÊùüÊó•Êúü</label>
                            <input type="date" id="modal-end-date" class="w-full px-3 py-2 border border-gray-300 rounded-md" required>
                        </div>
                    </div>
                    
                    <div class="flex justify-end space-x-2">
                        <button type="button" id="cancelAddProcess" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">ÂèñÊ∂à</button>
                        <button type="button" id="saveAndContinueBtn" class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600">ÁªßÁª≠Ê∑ªÂä†</button>
                        <button type="submit" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-blue-800">‰øùÂ≠ò</button>
                    </div>
                </form>
            </div>
        `;
        document.body.appendChild(addOrderProcessModal);
        
        // ‰∏∫ËÆ¢ÂçïÂàóË°®ÁöÑÊ∑ªÂä†ÊåâÈíÆÊ∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨
        document.addEventListener('click', function(e) {
            if (e.target.closest('.add-order-btn')) {
                const button = e.target.closest('.add-order-btn');
                const orderIndex = parseInt(button.dataset.orderIndex);
                
                // Ëé∑ÂèñËÆ¢ÂçïÊï∞ÊçÆ - ‰∏érenderOrderListÂáΩÊï∞‰ΩøÁî®Áõ∏ÂêåÁöÑÈÄªËæë
                let productionOrders = [];
                try {
                    const ordersData = localStorage.getItem('orders');
                    if (ordersData) {
                        const allOrders = JSON.parse(ordersData);
                        if (Array.isArray(allOrders) && allOrders.length > 0) {
                            productionOrders = allOrders.map(order => ({
                                orderNumber: order.orderNo,
                                quantity: order.qty,
                                status: order.status,
                                customer: order.customer
                            }));
                        }
                    }
                    
                    // Â¶ÇÊûúorders‰∏≠Ê≤°ÊúâÊï∞ÊçÆÔºåÂ∞ùËØï‰ªéproductionOrderListËé∑Âèñ
                    if (productionOrders.length === 0) {
                        const productionOrderListData = localStorage.getItem('productionOrderList');
                        if (productionOrderListData) {
                            productionOrders = JSON.parse(productionOrderListData);
                        }
                    }
                    
                    // Á°Æ‰øùproductionOrdersÊòØÊï∞ÁªÑ
                    if (!Array.isArray(productionOrders)) {
                        productionOrders = [];
                    }
                    
                    // Â∫îÁî®‰∏érenderOrderListÂáΩÊï∞Áõ∏ÂêåÁöÑÊéíÂ∫èÈÄªËæë
                    productionOrders.sort((a, b) => {
                        const statusPriority = {
                            'ÂæÖÁîü‰∫ß': 1,
                            'Áîü‰∫ß‰∏≠': 2,
                            'Â∑≤ÂÆåÊàê': 3
                        };
                        
                        const statusA = a.status || '';
                        const statusB = b.status || '';
                        
                        return (statusPriority[statusA] || 999) - (statusPriority[statusB] || 999);
                    });
                } catch (error) {
                    console.error('Ëß£ÊûêËÆ¢ÂçïÊï∞ÊçÆÊó∂Âá∫Èîô:', error);
                    productionOrders = [];
                }
                
                const selectedOrder = productionOrders[orderIndex];
                if (selectedOrder) {
                    // Â°´ÂÖÖÊ®°ÊÄÅÊ°ÜÊï∞ÊçÆ
                    document.getElementById('modal-customer').value = selectedOrder.customer || '';
                    document.getElementById('modal-order-number').value = selectedOrder.orderNumber || '';
                    document.getElementById('modal-quantity').value = selectedOrder.quantity || 0;
                    
                    // Âä†ËΩΩÂ∑•Â∫èÂêçÁß∞ÈÄâÈ°π
                    const productionProcesses = JSON.parse(localStorage.getItem('productionProcesses')) || [];
                    const processData = JSON.parse(localStorage.getItem('processData')) || [];
                    const processPlanningData = productionProcesses.length > 0 ? productionProcesses : processData;
                    
                    const processNameSelect = document.getElementById('modal-process-name');
                    processNameSelect.innerHTML = '';
                    
                    if (processPlanningData.length > 0) {
                        // ‰ΩøÁî®SetÊèêÂèñÂîØ‰∏ÄÁöÑÂ∑•Â∫èÂêçÁß∞
                        const uniqueProcessNames = [...new Set(processPlanningData.map(p => p.name || p.processName))];
                        
                        uniqueProcessNames.forEach(processName => {
                            const option = document.createElement('option');
                            option.value = processName;
                            option.textContent = processName;
                            processNameSelect.appendChild(option);
                        });
                        
                        // Ê∑ªÂä†Â∑•Â∫èÂêçÁß∞ÈÄâÊã©‰∫ã‰ª∂ÁõëÂê¨Âô®
                        processNameSelect.addEventListener('change', function() {
                            // Ëé∑ÂèñÈÄâ‰∏≠ÁöÑÂ∑•Â∫èÂêçÁß∞
                            const selectedProcessName = this.value;
                            
                            // Êü•ÊâæÂØπÂ∫îÁöÑÊ†áÂáÜÂ∑•Êó∂
                            const selectedProcess = processPlanningData.find(p => (p.name || p.processName) === selectedProcessName);
                            if (selectedProcess) {
                                // Ëé∑ÂèñÊ†áÂáÜÂ∑•Êó∂ÔºàÊ£ÄÊü•‰∏çÂêåÂ≠óÊÆµÂêçÔºâ
                                const standardTime = parseFloat(selectedProcess.standardTime || selectedProcess.standard_time || selectedProcess.time || 0);
                                
                                // Ëé∑ÂèñÊï∞Èáè
                                const quantity = parseFloat(document.getElementById('modal-quantity').value) || 0;
                                
                                // Ëé∑ÂèñÈúÄË¶ÅÊï∞/ÁÇâÊû∂
                                const requiredCount = parseFloat(document.getElementById('modal-required-count').value) || 1;
                                
                                // Â¶ÇÊûúÊòØÊ®°ÊùøÂáÜÂ§áÂ∑•Â∫èÔºåËá™Âä®Â°´ÂÖÖÂáÜÂ§áÂ∑•‰ΩúÂ∑•Êó∂ÂíåÊÄªÂ∑•Êó∂
                                if (selectedProcessName === 'Ê®°ÊùøÂáÜÂ§á') {
                                    // Â∞ÜÊ†áÂáÜÂ∑•Êó∂Â°´ÂÖ•ÂáÜÂ§áÂ∑•‰ΩúÂ∑•Êó∂
                                    document.getElementById('modal-prep-time').value = standardTime;
                                    
                                    // ÊÄªÂ∑•Êó∂Á≠â‰∫éÂáÜÂ§áÂ∑•‰ΩúÂ∑•Êó∂
                                    const totalTime = standardTime;
                                    document.getElementById('modal-total-time').value = `${totalTime.toFixed(2)}Â∞èÊó∂`;
                                } else {
                                    // Ëé∑ÂèñÂáÜÂ§áÂ∑•‰ΩúÂ∑•Êó∂
                                    const prepTime = parseFloat(document.getElementById('modal-prep-time').value) || 0;
                                    
                                    // ËÆ°ÁÆóÊÄªÂ∑•Êó∂ÔºöÊ†áÂáÜÂ∑•Êó∂ √ó Êï∞Èáè √ó ÈúÄË¶ÅÊï∞/ÁÇâÊû∂ + ÂáÜÂ§áÂ∑•‰ΩúÂ∑•Êó∂
                                    const totalTime = standardTime * quantity * requiredCount + prepTime;
                                    
                                    // Êõ¥Êñ∞ÊÄªÂ∑•Êó∂ËæìÂÖ•Ê°Ü
                                    document.getElementById('modal-total-time').value = `${totalTime.toFixed(2)}Â∞èÊó∂`;
                                }
                                
                                // ËÆ°ÁÆóÁªìÊùüÊó•Êúü
                                const startDateInput = document.getElementById('modal-start-date');
                                if (startDateInput.value) {
                                    const startDate = new Date(startDateInput.value);
                                    // Ëé∑ÂèñÂΩìÂâçÊÄªÂ∑•Êó∂
                                    const currentTotalTime = parseFloat(document.getElementById('modal-total-time').value.replace('Â∞èÊó∂', '')) || 0;
                                    // ËÆ°ÁÆóÂ§©Êï∞ÔºàÊÄªÂ∑•Êó∂‰∏çÊª°8Â∞èÊó∂‰∏∫0Â§©ÔºåË∂ÖËøá8Â∞èÊó∂Âêë‰∏äÂèñÊï¥Ôºâ
                                    const daysToAdd = currentTotalTime <= 8 ? 0 : Math.ceil(currentTotalTime / 8);
                                    
                                    // Ê∑ªÂä†Â§©Êï∞
                                    const endDate = new Date(startDate);
                                    endDate.setDate(startDate.getDate() + daysToAdd);
                                    
                                    // Ê†ºÂºèÂåñÊó•Êúü‰∏∫YYYY-MM-DDÔºåÈÅøÂÖçÊó∂Âå∫ÈóÆÈ¢ò
                                    const endDateFormatted = `${endDate.getFullYear()}-${String(endDate.getMonth() + 1).padStart(2, '0')}-${String(endDate.getDate()).padStart(2, '0')}`;
                                    
                                    // Êõ¥Êñ∞ÁªìÊùüÊó•ÊúüËæìÂÖ•Ê°Ü
                                    document.getElementById('modal-end-date').value = endDateFormatted;
                                }
                            }
                        });
                    } else {
                        // Â¶ÇÊûúÊ≤°ÊúâÂ∑•Â∫èËßÑÂàíÊï∞ÊçÆÔºåÊòæÁ§∫ÊèêÁ§∫
                        const option = document.createElement('option');
                        option.value = '';
                        option.textContent = 'ËØ∑ÂÖàÊ∑ªÂä†Â∑•Â∫èËßÑÂàí';
                        processNameSelect.appendChild(option);
                    }
                    
                    // ËÆæÁΩÆÈªòËÆ§Êó•ÊúüÔºåÈÅøÂÖçÊó∂Âå∫ÈóÆÈ¢ò
                    const today = new Date();
                    const todayFormatted = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
                    document.getElementById('modal-start-date').value = todayFormatted;
                    document.getElementById('modal-end-date').value = todayFormatted;
                    
                    // ‰∏∫ÂáÜÂ§áÂ∑•‰ΩúÂ∑•Êó∂Ê∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨Âô®
                    const prepTimeInput = document.getElementById('modal-prep-time');
                    prepTimeInput.addEventListener('input', function() {
                        const processNameSelect = document.getElementById('modal-process-name');
                        // Ëß¶ÂèëÂ∑•Â∫èÂêçÁß∞ÁöÑchange‰∫ã‰ª∂ÔºåÈáçÊñ∞ËÆ°ÁÆóÊÄªÂ∑•Êó∂ÂíåÁªìÊùüÊó•Êúü
                        if (processNameSelect.value) {
                            processNameSelect.dispatchEvent(new Event('change'));
                        }
                    });
                    
                    // ‰∏∫ÈúÄË¶ÅÊï∞/ÁÇâÊû∂Ê∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨Âô®
                    const requiredCountInput = document.getElementById('modal-required-count');
                    requiredCountInput.addEventListener('input', function() {
                        const processNameSelect = document.getElementById('modal-process-name');
                        // Ëß¶ÂèëÂ∑•Â∫èÂêçÁß∞ÁöÑchange‰∫ã‰ª∂ÔºåÈáçÊñ∞ËÆ°ÁÆóÊÄªÂ∑•Êó∂ÂíåÁªìÊùüÊó•Êúü
                        if (processNameSelect.value) {
                            processNameSelect.dispatchEvent(new Event('change'));
                        }
                    });
                    
                    // ‰∏∫ÂºÄÂßãÊó•ÊúüÊ∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨Âô®
                    const startDateInput = document.getElementById('modal-start-date');
                    startDateInput.addEventListener('change', function() {
                        const processNameSelect = document.getElementById('modal-process-name');
                        // Ëß¶ÂèëÂ∑•Â∫èÂêçÁß∞ÁöÑchange‰∫ã‰ª∂ÔºåÈáçÊñ∞ËÆ°ÁÆóÊÄªÂ∑•Êó∂ÂíåÁªìÊùüÊó•Êúü
                        if (processNameSelect.value) {
                            processNameSelect.dispatchEvent(new Event('change'));
                        }
                    });
                    
                    // ÊòæÁ§∫Ê®°ÊÄÅÊ°Ü
                    document.getElementById('addOrderProcessModal').classList.remove('hidden');
                }
            }
        });
        
        // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
        document.getElementById('closeProcessModal').addEventListener('click', function() {
            document.getElementById('addOrderProcessModal').classList.add('hidden');
        });
        
        // ÂèñÊ∂àÊåâÈíÆ
        document.getElementById('cancelAddProcess').addEventListener('click', function() {
            document.getElementById('addOrderProcessModal').classList.add('hidden');
        });
        
        // ÁÇπÂáªÊ®°ÊÄÅÊ°ÜÂ§ñÈÉ®ÂÖ≥Èó≠
        document.getElementById('addOrderProcessModal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.add('hidden');
            }
        });
        
        // ‰øùÂ≠òÂ∑•Â∫èÁöÑÂÖ¨ÂÖ±ÂáΩÊï∞
        function saveProcess(closeModal = true) {
            // Ëé∑ÂèñË°®ÂçïÊï∞ÊçÆ
            const customer = document.getElementById('modal-customer').value;
            const orderNumber = document.getElementById('modal-order-number').value;
            const quantity = document.getElementById('modal-quantity').value;
            const processName = document.getElementById('modal-process-name').value;
            const requiredCount = parseInt(document.getElementById('modal-required-count').value);
            const prepTime = parseFloat(document.getElementById('modal-prep-time').value);
            const totalTime = document.getElementById('modal-total-time').value;
            const startDate = document.getElementById('modal-start-date').value;
            const endDate = document.getElementById('modal-end-date').value;
            
            // Ë°®ÂçïÈ™åËØÅ
            if (!orderNumber || !processName || !requiredCount || !totalTime || !startDate || !endDate) {
                alert('ËØ∑Â°´ÂÜôÊâÄÊúâÂøÖÂ°´Â≠óÊÆµÔºÅ');
                return;
            }
            
            // ‰ªélocalStorageËé∑ÂèñÁé∞ÊúâÂ∑•Â∫èÂÆâÊéíÊï∞ÊçÆ
            let orderProcesses = JSON.parse(localStorage.getItem('orderProcesses')) || [];
            
            // Ê£ÄÊü•ÊòØÂê¶Â≠òÂú®Áõ∏ÂêåËÆ¢ÂçïÂè∑ÂíåÂ∑•Â∫èÂêçÁß∞ÁöÑÂ∑•Â∫è
            const duplicateProcess = orderProcesses.find(process => 
                process.orderNumber === orderNumber && process.processName === processName
            );
            
            if (duplicateProcess) {
                alert('Âêå‰∏Ä‰∏™ËÆ¢ÂçïÂè∑‰∏ã‰∏çËÉΩÊúâÁõ∏ÂêåÁöÑÂ∑•Â∫èÂêçÁß∞ÔºÅËØ∑Ê£ÄÊü•ÂêéÈáçÊñ∞Ê∑ªÂä†„ÄÇ');
                return;
            }
            
            // ËÆ°ÁÆóÊñ∞Â∑•Â∫èÁöÑÈ°∫Â∫è
            let maxSequence = 0;
            if (orderProcesses.length > 0) {
                maxSequence = Math.max(...orderProcesses.map(p => p.sequence || 0));
            }
            const newSequence = maxSequence + 1;
            
            // ÂàõÂª∫Êñ∞Â∑•Â∫è
            const newProcess = {
                customer,
                orderNumber,
                quantity,
                processName,
                requiredCount,
                prepTime,
                totalTime,
                startDate,
                endDate,
                sequence: newSequence
            };
            
            // Ê∑ªÂä†Êñ∞Â∑•Â∫è
            orderProcesses.push(newProcess);
            
            // ‰øùÂ≠òÂà∞localStorage
            localStorage.setItem('orderProcesses', JSON.stringify(orderProcesses));
            
            // Êõ¥Êñ∞Ë°®Ê†º
            renderOrderProcessTable();
            
            // ÂÆûÊó∂ÂêåÊ≠•Âà∞‰∫∫ÂëòÊéíÁè≠Ë°®Ê†º
            syncProcessToSchedule();
            
            // ÊòæÁ§∫ÊàêÂäüÊèêÁ§∫
            alert('Â∑•Â∫è‰øùÂ≠òÊàêÂäüÔºÅ');
            
            if (closeModal) {
                // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
                document.getElementById('addOrderProcessModal').classList.add('hidden');
                
                // ÈáçÁΩÆË°®Âçï
                document.getElementById('addProcessForm').reset();
            } else {
                // Âè™ÈáçÁΩÆÂ∑•Â∫èÁõ∏ÂÖ≥Â≠óÊÆµÔºå‰øùÁïôÂÆ¢Êà∑„ÄÅËÆ¢ÂçïÂè∑ÂíåÊï∞Èáè
                document.getElementById('modal-process-name').value = '';
                document.getElementById('modal-required-count').value = '';
                document.getElementById('modal-prep-time').value = '';
                document.getElementById('modal-total-time').value = '';
                document.getElementById('modal-start-date').value = '';
                document.getElementById('modal-end-date').value = '';
            }
        }
        
        // Ë°®ÂçïÊèê‰∫§ - ‰øùÂ≠òÂπ∂ÂÖ≥Èó≠
        document.getElementById('addProcessForm').addEventListener('submit', function(e) {
            e.preventDefault();
            saveProcess(true);
        });
        
        // ÁªßÁª≠Ê∑ªÂä†ÊåâÈíÆ - ‰øùÂ≠òÂπ∂ÁªßÁª≠
        document.getElementById('saveAndContinueBtn').addEventListener('click', function() {
            saveProcess(false);
        });
        
        // ÂÖ≥Èó≠ÁºñËæëÂ∑•Â∫èÊ®°ÊÄÅÊ°Ü
        function closeEditOrderProcessModal() {
            document.getElementById('editOrderProcessModal').classList.add('hidden');
        }
        
        // ‰øùÂ≠òÁºñËæëÁöÑÂ∑•Â∫è
        document.getElementById('editOrderProcessForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Ëé∑ÂèñË°®ÂçïÊï∞ÊçÆ
            const index = parseInt(document.getElementById('edit-process-index').value);
            const prepTime = parseFloat(document.getElementById('edit-prep-time').value);
            const startDate = document.getElementById('edit-start-date').value;
            const endDate = document.getElementById('edit-end-date').value;
            const remark = document.getElementById('edit-remark').value;
            
            // Ë°®ÂçïÈ™åËØÅ
            if (!prepTime || !startDate || !endDate) {
                alert('ËØ∑Â°´ÂÜôÊâÄÊúâÂøÖÂ°´Â≠óÊÆµÔºÅ');
                return;
            }
            
            // ‰ªélocalStorageËé∑ÂèñÁé∞ÊúâÂ∑•Â∫èÂÆâÊéíÊï∞ÊçÆ
            let orderProcesses = JSON.parse(localStorage.getItem('orderProcesses')) || [];
            
            // Êõ¥Êñ∞Â∑•Â∫èÊï∞ÊçÆ
            if (index >= 0 && index < orderProcesses.length) {
                orderProcesses[index].prepTime = prepTime;
                orderProcesses[index].startDate = startDate;
                orderProcesses[index].endDate = endDate;
                orderProcesses[index].remark = remark;
                
                // ‰øùÂ≠òÂà∞localStorage
                localStorage.setItem('orderProcesses', JSON.stringify(orderProcesses));
                
                // ÈáçÊñ∞Ê∏≤ÊüìË°®Ê†º
                renderOrderProcessTable();
                
                // ÂÆûÊó∂ÂêåÊ≠•Âà∞‰∫∫ÂëòÊéíÁè≠Ë°®Ê†º
                syncProcessToSchedule();
                
                // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
                closeEditOrderProcessModal();
                
                // ÊòæÁ§∫ÊàêÂäüÊèêÁ§∫
                alert('Â∑•Â∫èÁºñËæëÊàêÂäüÔºÅ');
            } else {
                alert('Êâæ‰∏çÂà∞Ë¶ÅÁºñËæëÁöÑÂ∑•Â∫èÔºÅ');
            }
        });
        
        // ‰∏∫ÂÖ≥Èó≠Ê®°ÊÄÅÊ°ÜÊåâÈíÆÊ∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨Âô®
        const closeEditModalBtn = document.getElementById('closeEditOrderProcessModalBtn');
        if (closeEditModalBtn) {
            closeEditModalBtn.addEventListener('click', closeEditOrderProcessModal);
        }
        
        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂä†ËΩΩÊï∞ÊçÆ
        window.addEventListener('load', function() {
            console.log('È°µÈù¢Âä†ËΩΩÂÆåÊàêÔºåÂáÜÂ§áÂä†ËΩΩÊï∞ÊçÆ...');
            loadProcessData();
            console.log('Â∑•Â∫èÊï∞ÊçÆÂä†ËΩΩÂÆåÊàê');
            console.log('ÂΩìÂâçlocalStorage‰∏≠ÁöÑprocessData:', localStorage.getItem('processData'));
            
            // Ê£ÄÊü•Âπ∂Ê∑ªÂä†Á§∫‰æãËÆ¢ÂçïÊï∞ÊçÆÔºàÂ¶ÇÊûúÊ≤°ÊúâÊï∞ÊçÆÔºâ
            checkAndAddSampleOrders();
            
            // Ê∏≤ÊüìËÆ¢ÂçïÂàóË°®
            renderOrderList();
            console.log('ËÆ¢ÂçïÂàóË°®Ê∏≤ÊüìÂÆåÊàê');
            console.log('ÂΩìÂâçlocalStorage‰∏≠ÁöÑproductionOrderList:', localStorage.getItem('productionOrderList'));
            
            // Ê∏≤ÊüìÂ∑•Â∫èÂÆâÊéíË°®Ê†º
            renderOrderProcessTable();
            
            // ‰∏∫ÁîüÊàêÂ∑•Â∫èÊåâÈíÆÊ∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂
            const generateBtn = document.getElementById('generateProcessBtn');
            if (generateBtn) {
                generateBtn.addEventListener('click', function() {
                    if (confirm('Á°ÆÂÆöË¶ÅÁîüÊàê23ÈÅìÂ∑•Â∫èÂêóÔºüËøôÂ∞ÜË¶ÜÁõñÂΩìÂâçÊâÄÊúâÂ∑•Â∫èÊï∞ÊçÆ„ÄÇ')) {
                        generateProcesses();
                    }
                });
            }
            
            // ËÆ¢ÂçïÂàóË°®ÂçïÈÄâÊåâÈíÆÂäüËÉΩ
            const orderCheckboxes = document.querySelectorAll('.order-checkbox');
            
            // ÂçïÈÄâÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
            orderCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    // ÁßªÈô§ÊâÄÊúâË°åÁöÑÈÄâ‰∏≠Ê†∑Âºè
                    orderCheckboxes.forEach(cb => {
                        const row = cb.closest('tr');
                        row.classList.remove('bg-green-100');
                    });
                    
                    // ‰∏∫ÂΩìÂâçÈÄâ‰∏≠ÁöÑË°åÊ∑ªÂä†Ê†∑Âºè
                    if (this.checked) {
                        const row = this.closest('tr');
                        row.classList.add('bg-green-100');
                    }
                });
            });
            
            // ÂàùÂßãÂåñÂ∑•Â∫èË°®Ê†ºË°åÊãñÊîæÂäüËÉΩ
            initProcessTableDragAndDrop();
        });
        
        // Â∑•Â∫èË°®Ê†ºË°åÊãñÊîæÂäüËÉΩÂÆûÁé∞
        function initProcessTableDragAndDrop() {
            const processTable = document.getElementById('processPlanningTable');
            if (!processTable) {
                console.error('Êâæ‰∏çÂà∞Â∑•Â∫èË°®Ê†º');
                return;
            }
            
            const tbody = processTable.querySelector('tbody');
            if (!tbody) {
                console.error('Êâæ‰∏çÂà∞tbodyÂÖÉÁ¥†');
                return;
            }
            
            // ‰∏∫ÊâÄÊúâË°åÊ∑ªÂä†draggableÂ±ûÊÄß
            function addDraggableToRows() {
                const rows = tbody.querySelectorAll('tr');
                rows.forEach(row => {
                    row.setAttribute('draggable', 'true');
                    row.style.cursor = 'grab';
                    
                    // Ê∑ªÂä†ÊãñÊîæ‰∫ã‰ª∂ÁõëÂê¨Âô®
                    row.addEventListener('dragstart', dragStart);
                    row.addEventListener('dragend', dragEnd);
                });
            }
            
            // ÂàùÂßãÂåñ‰∏∫ÊâÄÊúâË°åÊ∑ªÂä†draggableÂ±ûÊÄß
            addDraggableToRows();
            
            // ÊãñÊîæ‰∫ã‰ª∂Â§ÑÁêÜÂáΩÊï∞
            let draggedRow = null;
            
            function dragStart(e) {
                draggedRow = this;
                // ËÆæÁΩÆÁªøËâ≤ËÉåÊôØËâ≤
                this.style.backgroundColor = '#d1fae5';
                // ËÆæÁΩÆÊãñÊîæÊïàÊûú
                e.dataTransfer.effectAllowed = 'move';
                // ËÆæÁΩÆÊãñÊîæÊï∞ÊçÆ
                e.dataTransfer.setData('text/plain', '');
            }
            
            function dragEnd() {
                // ÊÅ¢Â§çËÉåÊôØËâ≤
                this.style.backgroundColor = '';
                draggedRow = null;
            }
            
            function dragOver(e) {
                e.preventDefault();
                e.dataTransfer.dropEffect = 'move';
                
                const afterElement = getDragAfterElement(tbody, e.clientY);
                const dragged = document.querySelector('[draggable=true]:not(.dragging)');
                
                if (afterElement == null) {
                    tbody.appendChild(draggedRow);
                } else {
                    tbody.insertBefore(draggedRow, afterElement);
                }
            }
            
            function getDragAfterElement(container, y) {
                const draggableElements = [...container.querySelectorAll('tr:not(.dragging)')];
                
                return draggableElements.reduce((closest, child) => {
                    const box = child.getBoundingClientRect();
                    const offset = y - box.top - box.height / 2;
                    
                    if (offset < 0 && offset > closest.offset) {
                        return { offset: offset, element: child };
                    } else {
                        return closest;
                    }
                }, { offset: Number.NEGATIVE_INFINITY }).element;
            }
            
            function drop() {
                // Êõ¥Êñ∞Â∑•Â∫èÈ°∫Â∫è
                updateProcessOrder();
                // ‰øùÂ≠òÊï∞ÊçÆÂà∞localStorage
                saveProcessData();
            }
            
            // Êõ¥Êñ∞Â∑•Â∫èÈ°∫Â∫èÔºå‰øùÊåÅÂ∑•Â∫èÁºñÂè∑ËøûÁª≠
            function updateProcessOrder() {
                // Ë∞ÉÁî®ÂÖ®Â±ÄÁöÑÈáçÊñ∞ÁºñÂè∑ÂáΩÊï∞ÔºåÁ°Æ‰øù‰ª£Á†Å‰∏ÄËá¥ÊÄß
                reorderProcessSequence();
            }
            
            // Ê∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨Âô®Âà∞tbody
            tbody.addEventListener('dragover', dragOver);
            tbody.addEventListener('drop', drop);
        }
        
        // ÁõëÂê¨Á™óÂè£ÂÖ≥Èó≠‰∫ã‰ª∂Ôºå‰øùÂ≠òÊï∞ÊçÆ
        window.addEventListener('beforeunload', function() {
            saveProcessData();
        });

        // Â∑•Â∫èÊï∞ÊçÆÊåÅ‰πÖÂåñÁõ∏ÂÖ≥ÂáΩÊï∞
        function saveProcessData() {
            try {
                // Áõ¥Êé•‰ΩøÁî®ÂîØ‰∏ÄIDËé∑ÂèñÂ∑•Â∫èËßÑÂàíË°®Ê†º
                const processTable = document.getElementById('processPlanningTable');
                
                console.log('saveProcessData: Áõ¥Êé•ÈÄöËøáIDËé∑ÂèñÂ∑•Â∫èË°®Ê†º:', processTable ? 'ÊàêÂäü' : 'Â§±Ë¥•');
                
                if (processTable) {
                    // ÊâìÂç∞ËØ•Ë°®Ê†ºÁöÑ‰ø°ÊÅØ‰ª•‰æøÁ°ÆËÆ§
                    const rows = processTable.querySelectorAll('tbody tr');
                    console.log('saveProcessData: Ë°®Ê†ºË°åÊï∞:', rows.length);
                    if (rows.length > 0) {
                        const firstRow = rows[0].innerHTML;
                        console.log('saveProcessData: Ë°®Ê†ºÁ¨¨‰∏ÄË°åÂÜÖÂÆπ:', firstRow.substring(0, 200) + '...');
                    }
                }
                
                if (!processTable) {
                    console.error('Êâæ‰∏çÂà∞Â∑•Â∫èË°®Ê†º');
                    return false;
                }
                
                const processRows = processTable.querySelectorAll('tbody tr');
                if (!processRows || processRows.length === 0) {
                    console.error('Ê≤°ÊúâÂ∑•Â∫èË°åÊï∞ÊçÆ');
                    return true; // Ê≤°ÊúâÊï∞ÊçÆ‰πüÁÆó‰øùÂ≠òÊàêÂäü
                }
                
                const processData = [];
                
                // ÈÅçÂéÜÊâÄÊúâÂ∑•Â∫èË°åÔºåÊèêÂèñÊï∞ÊçÆ
                processRows.forEach((row, index) => {
                    const tds = row.querySelectorAll('td');
                    if (tds.length >= 6) {
                        try {
                        // ÈÄÇÂ∫îË°®Ê†ºÁªìÊûÑÔºöÈ°∫Â∫è(0)„ÄÅID(1)„ÄÅÂ∑•Â∫èÂêçÁß∞(2)„ÄÅÊ†áÂáÜÂ∑•Êó∂(3)„ÄÅÊâÄÈúÄËÆæÂ§á(4)„ÄÅ‰æùËµñÂ∑•Â∫è(5)
                        const processOrder = (index + 1).toString(); // ‰ΩøÁî®Á¥¢Âºï‰Ωú‰∏∫È°∫Â∫èÂè∑ÔºåÁ°Æ‰øùËøûÁª≠
                        const processId = getTdText(tds[1]);
                        const processName = getTdText(tds[2]);
                        const processTime = getTdText(tds[3]);
                        const processEquipment = getTdText(tds[4]);
                        // ‰∏∫Áº∫Â∞ëÁöÑÂ≠óÊÆµÊèê‰æõÈªòËÆ§ÂÄº
                        const preparationTime = '';
                        const totalTime = processTime;
                        const startDate = '';
                        const endDate = '';
                            
                            // Ê∑ªÂä†ËØ¶ÁªÜË∞ÉËØï‰ø°ÊÅØÔºåÁâπÂà´ÊòØÈíàÂØπPROC-001Â∑•Â∫è
                            if (processId === 'PROC-001') {
                                console.log(`saveProcessData: ÊâæÂà∞PROC-001Â∑•Â∫è`);
                                console.log(`saveProcessData: ËÆæÂ§áÂ≠óÊÆµ(tds[4])ÁöÑHTML:`, tds[4].innerHTML);
                                console.log(`saveProcessData: ÊèêÂèñÁöÑËÆæÂ§áÂÄº:`, processEquipment);
                            }
                            
                            processData.push({
                                id: processId,
                                name: processName,
                                order: processOrder,
                                time: processTime,
                                equipment: processEquipment
                            });
                        } catch (rowError) {
                            console.error(`Â§ÑÁêÜÁ¨¨${index+1}Ë°åÂ∑•Â∫èÊï∞ÊçÆÊó∂Âá∫Èîô:`, rowError);
                            // ÁªßÁª≠Â§ÑÁêÜÂÖ∂‰ªñË°å
                        }
                    }
                });
                
                // ‰øùÂ≠òÂà∞localStorage
                localStorage.setItem('processData', JSON.stringify(processData));
                console.log('Â∑•Â∫èÊï∞ÊçÆ‰øùÂ≠òÊàêÂäü:', processData.length, 'Êù°ËÆ∞ÂΩï');
                return true;
            } catch (error) {
                console.error('‰øùÂ≠òÂ∑•Â∫èÊï∞ÊçÆÂ§±Ë¥•:', error);
                return false;
            }
        }
        
        // ËæÖÂä©ÂáΩÊï∞ÔºöÂÆâÂÖ®Ëé∑ÂèñË°®Ê†ºÂçïÂÖÉÊ†ºÊñáÊú¨ÂÜÖÂÆπ
        function getTdText(td, columnName = '') {
            if (!td) return '';
            
            // Â∞ùËØïÂ§öÁßçÊñπÂºèËé∑ÂèñÊñáÊú¨ÂÜÖÂÆπ
            // ‰ΩøÁî®Êõ¥ÁÅµÊ¥ªÁöÑÈÄâÊã©Âô®ÔºåÂÖÅËÆ∏ÂåÖÂê´È¢ùÂ§ñÁöÑÁ±ª
            const textElement = td.querySelector('.text-sm');
            if (textElement) {
                const text = textElement.textContent.trim() || '';
                return text;
            }
            
            // ‰πüÂèØ‰ª•Â∞ùËØïÁõ¥Êé•Êü•ÊâæÊâÄÊúâdivÂÖÉÁ¥†
            const divElements = td.querySelectorAll('div');
            for (const div of divElements) {
                if (div.textContent.trim()) {
                    return div.textContent.trim();
                }
            }
            
            // Â¶ÇÊûúÊâæ‰∏çÂà∞ÊåáÂÆöÂÖÉÁ¥†ÔºåÁõ¥Êé•ËøîÂõûtdÁöÑÊñáÊú¨ÂÜÖÂÆπ
            return td.textContent.trim() || '';
        }
        
        function loadProcessData() {
            // Áõ¥Êé•‰ΩøÁî®ÂîØ‰∏ÄIDËé∑ÂèñÂ∑•Â∫èËßÑÂàíË°®Ê†º
            const processTable = document.getElementById('processPlanningTable');
            
            console.log('loadProcessData: Áõ¥Êé•ÈÄöËøáIDËé∑ÂèñÂ∑•Â∫èË°®Ê†º:', processTable ? 'ÊàêÂäü' : 'Â§±Ë¥•');
            
            if (processTable) {
                // ÊâìÂç∞ËØ•Ë°®Ê†ºÁöÑ‰ø°ÊÅØ‰ª•‰æøÁ°ÆËÆ§
                const rows = processTable.querySelectorAll('tbody tr');
                console.log('loadProcessData: Ë°®Ê†ºË°åÊï∞:', rows.length);
                if (rows.length > 0) {
                    const firstRow = rows[0].innerHTML;
                    console.log('loadProcessData: Ë°®Ê†ºÁ¨¨‰∏ÄË°åÂÜÖÂÆπ:', firstRow.substring(0, 200) + '...');
                }
            }
            
            if (!processTable) {
                console.error('Âä†ËΩΩÊï∞ÊçÆÊó∂Êâæ‰∏çÂà∞Â∑•Â∫èË°®Ê†º');
                return;
            }
            
            const processData = localStorage.getItem('processData');
            if (!processData) {
                console.log('localStorage‰∏≠Ê≤°ÊúâÂ∑•Â∫èÊï∞ÊçÆÔºå‰øùÊåÅHTMLÂΩìÂâçÁä∂ÊÄÅ');
                // ‰∏çËá™Âä®‰øùÂ≠òHTML‰∏≠ÁöÑÊï∞ÊçÆÂà∞localStorageÔºå‰øùÊåÅÂΩìÂâçÁä∂ÊÄÅ
                return;
            }
            
            try {
                console.log('loadProcessData: ÂºÄÂßãËß£ÊûêlocalStorage‰∏≠ÁöÑÊï∞ÊçÆ');
                const processes = JSON.parse(processData);
                console.log('loadProcessData: Ëß£ÊûêÊàêÂäüÔºåÊï∞ÊçÆÈïøÂ∫¶:', processes.length);
                
                const tbody = processTable.querySelector('tbody');
                console.log('loadProcessData: Ëé∑ÂèñtbodyÂÖÉÁ¥†:', tbody ? 'ÊàêÂäü' : 'Â§±Ë¥•');
                
                if (!tbody) {
                    console.error('loadProcessData: Êâæ‰∏çÂà∞tbodyÂÖÉÁ¥†');
                    return;
                }
                
                // Ê∏ÖÁ©∫Áé∞ÊúâË°®Ê†ºÂÜÖÂÆπÔºà‰øùÁïôË°®Â§¥Ôºâ
                console.log('loadProcessData: Ê∏ÖÁ©∫tbodyÂÜÖÂÆπ');
                tbody.innerHTML = '';
                
                // ÈáçÊñ∞ÂàõÂª∫Ë°®Ê†ºË°å
                console.log('loadProcessData: ÂºÄÂßãÂàõÂª∫Ë°®Ê†ºË°å');
                processes.forEach((process, index) => {
                    console.log(`loadProcessData: ÂàõÂª∫Á¨¨${index+1}Ë°åÔºåÂ∑•Â∫èID: ${process.id}`);
                    
                    const row = document.createElement('tr');
                    console.log('loadProcessData: ÂàõÂª∫rowÂÖÉÁ¥†:', row ? 'ÊàêÂäü' : 'Â§±Ë¥•');
                    
                    row.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">${process.order}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium text-gray-900">${process.id}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">${process.name}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">${process.time}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium text-gray-900">${process.equipment}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                            <a href="#" class="text-primary hover:text-blue-800 mr-3" onclick="openEditProcessModal(this); return false;">
                                <i class="fa fa-edit"></i>
                            </a>
                            <a href="#" class="text-red-600 hover:text-red-900" onclick="deleteProcess(this); return false;">
                                <i class="fa fa-trash"></i>
                            </a>
                        </td>
                    `;
                    
                    console.log('loadProcessData: ËÆæÁΩÆrow.innerHTMLÊàêÂäü');
                    console.log('loadProcessData: Ê∑ªÂä†rowÂà∞tbody');
                    tbody.appendChild(row);
                    console.log('loadProcessData: Ê∑ªÂä†ÊàêÂäü');
                });
                
                // Êõ¥Êñ∞‰æùËµñÂ∑•Â∫è‰∏ãÊãâÊ°ÜÈÄâÈ°π
                console.log('loadProcessData: Êõ¥Êñ∞‰æùËµñÂ∑•Â∫è‰∏ãÊãâÊ°ÜÈÄâÈ°π');
                if (typeof populateDependencyOptions === 'function') {
                    populateDependencyOptions();
                } else {
                    console.log('loadProcessData: populateDependencyOptionsÂáΩÊï∞‰∏çÂ≠òÂú®ÔºåË∑≥ËøáË∞ÉÁî®');
                }
                
                // ÈáçÊñ∞ÁºñÂè∑È°∫Â∫èÂàóÔºåÁ°Æ‰øùËøûÁª≠
                console.log('loadProcessData: ÈáçÊñ∞ÁºñÂè∑È°∫Â∫èÂàó');
                reorderProcessSequence();
                
                console.log('loadProcessData: ÂÆåÊàê');
            } catch (error) {
                console.error('Âä†ËΩΩÂ∑•Â∫èÊï∞ÊçÆÂ§±Ë¥•:', error);
                console.error('ÈîôËØØÂ†ÜÊ†à:', error.stack);
            }
        }
        
        // ÁºñËæëÂ∑•Â∫èÊ®°ÊÄÅÊ°ÜÁõ∏ÂÖ≥ÂáΩÊï∞
        let currentEditRow = null;
        
        function openEditProcessModal(button) {
            try {
                // Ëé∑ÂèñÂΩìÂâçË°åÂÖÉÁ¥†
                currentEditRow = button.closest('tr');
                // Ëé∑ÂèñË°å‰∏≠ÁöÑÊâÄÊúâtdÂÖÉÁ¥†
                const tds = currentEditRow.querySelectorAll('td');
                
                // ÊèêÂèñÊï∞ÊçÆÔºàÊ†πÊçÆË°®Ê†ºÁªìÊûÑÔºåÁ¥¢Âºï0-4ÂàÜÂà´ÂØπÂ∫îÈ°∫Â∫è„ÄÅÂ∑•Â∫èÁºñÂè∑„ÄÅÂ∑•Â∫èÂêçÁß∞„ÄÅÊ†áÂáÜÂ∑•Êó∂„ÄÅÊâÄÈúÄËÆæÂ§áÔºâ
                const processOrder = tds[0].querySelector('.text-sm.text-gray-900')?.textContent.trim() || '';
                const processId = tds[1].querySelector('.text-sm.text-gray-900')?.textContent.trim() || '';
                const processName = tds[2].querySelector('.text-sm.text-gray-900')?.textContent.trim() || '';
                const processTime = tds[3].querySelector('.text-sm.text-gray-900')?.textContent.trim() || '';
                const processEquipment = tds[4].querySelector('.text-sm.text-gray-900')?.textContent.trim() || '';
                
                // Â°´ÂÖÖÂà∞Ê®°ÊÄÅÊ°Ü
                document.getElementById('editProcessId').value = processId;
                document.getElementById('editProcessName').value = processName;
                document.getElementById('editProcessOrder').value = processOrder;
                document.getElementById('editProcessTime').value = processTime;
                document.getElementById('editProcessEquipment').value = processEquipment;
                
                // ÊòæÁ§∫Ê®°ÊÄÅÊ°Ü
                const modal = document.getElementById('editProcessModal');
                modal.classList.remove('hidden');
            } catch (error) {
                console.error('ÊâìÂºÄÁºñËæëÊ®°ÊÄÅÊ°ÜÂ§±Ë¥•:', error);
                alert('ÊâìÂºÄÁºñËæëÊ®°ÊÄÅÊ°ÜÂ§±Ë¥•ÔºåËØ∑ÈáçËØï');
            }
        }

        function closeEditProcessModal() {
            try {
                // Ê∏ÖÁ©∫ÂΩìÂâçÁºñËæëË°å
                currentEditRow = null;
                const modal = document.getElementById('editProcessModal');
                modal.classList.add('hidden');
            } catch (error) {
                console.error('ÂÖ≥Èó≠ÁºñËæëÊ®°ÊÄÅÊ°ÜÂ§±Ë¥•:', error);
            }
        }

        function saveProcessChanges() {
            let tableUpdated = false;
            let storageSaved = false;
            
            try {
                if (!currentEditRow) {
                    console.error('Ê≤°ÊúâÂΩìÂâçÁºñËæëË°å');
                    return;
                }
                
                // Ëé∑ÂèñÊ®°ÊÄÅÊ°Ü‰∏≠ÁöÑÊï∞ÊçÆ
                const processId = document.getElementById('editProcessId').value;
                const processName = document.getElementById('editProcessName').value;
                const processOrder = document.getElementById('editProcessOrder').value;
                const processTime = document.getElementById('editProcessTime').value;
                const processEquipment = document.getElementById('editProcessEquipment').value;
                
                // Ëé∑ÂèñÂΩìÂâçË°åÁöÑtdÂÖÉÁ¥†
                const tds = currentEditRow.querySelectorAll('td');
                if (!tds || tds.length < 5) {
                    console.error('ÂΩìÂâçË°åÁªìÊûÑ‰∏çÊ≠£Á°Æ');
                    return;
                }
                
                // Êõ¥Êñ∞Ë°®Ê†ºÊï∞ÊçÆÔºà‰ΩøÁî®Êõ¥ÂÆâÂÖ®ÁöÑÊñπÂºèÔºâ
                updateTdText(tds[1], processId);
                updateTdText(tds[2], processName);
                updateTdText(tds[0], processOrder);
                updateTdText(tds[3], processTime);
                updateTdText(tds[4], processEquipment);
                
                tableUpdated = true;
                
                // Êõ¥Êñ∞‰æùËµñÂ∑•Â∫è‰∏ãÊãâÊ°ÜÈÄâÈ°π
                populateDependencyOptions();
                
            } catch (tableError) {
                console.error('Êõ¥Êñ∞Ë°®Ê†ºÊï∞ÊçÆÂ§±Ë¥•:', tableError);
            }
            
            // Â∞ùËØï‰øùÂ≠òÂà∞localStorage
            try {
                storageSaved = saveProcessData();
                console.log('saveProcessChanges: Êï∞ÊçÆ‰øùÂ≠òÂà∞localStorageÁªìÊûú:', storageSaved);
                console.log('ÂΩìÂâçlocalStorage‰∏≠ÁöÑprocessData:', localStorage.getItem('processData'));
            } catch (storageError) {
                console.error('‰øùÂ≠òÂà∞localStorageÂ§±Ë¥•:', storageError);
            }
            
            // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
            closeEditProcessModal();
            
            // ÊòæÁ§∫ÊèêÁ§∫‰ø°ÊÅØ
            if (tableUpdated && storageSaved) {
                alert('Â∑•Â∫èÂ∑≤Êõ¥Êñ∞Âπ∂‰øùÂ≠ò');
            } else if (tableUpdated) {
                alert('Â∑•Â∫èÂ∑≤Êõ¥Êñ∞Ôºå‰ΩÜÊï∞ÊçÆÊåÅ‰πÖÂåñÂ§±Ë¥•');
            } else {
                alert('‰øùÂ≠òÂ§±Ë¥•ÔºåËØ∑ÈáçËØï');
            }
        }
        
        // ËæÖÂä©ÂáΩÊï∞ÔºöÂÆâÂÖ®Êõ¥Êñ∞Ë°®Ê†ºÂçïÂÖÉÊ†ºÊñáÊú¨ÂÜÖÂÆπ
        function updateTdText(td, text) {
            if (!td) return;
            
            // Â∞ùËØïÊâæÂà∞Áé∞ÊúâÁöÑÊñáÊú¨ÂÖÉÁ¥†
            const textElement = td.querySelector('.text-sm.text-gray-900');
            if (textElement) {
                textElement.textContent = text;
            } else {
                // Â¶ÇÊûúÊâæ‰∏çÂà∞ÔºåÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊñáÊú¨ÂÖÉÁ¥†
                td.innerHTML = `<div class="text-sm text-gray-900">${text}</div>`;
            }
        }
        
        // Âà†Èô§Â∑•Â∫èÂáΩÊï∞
        function deleteProcess(button) {
            if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§ËØ•Â∑•Â∫èÂêóÔºü')) {
                try {
                    const row = button.closest('tr');
                    row.remove();
                    
                    // ÈáçÊñ∞ÁºñÂè∑È°∫Â∫èÂàó
                    reorderProcessSequence();
                    
                    // Êõ¥Êñ∞‰æùËµñÂ∑•Â∫è‰∏ãÊãâÊ°ÜÈÄâÈ°π
                    populateDependencyOptions();
                    
                    // ‰øùÂ≠òÂà∞localStorage
                    saveProcessData();
                } catch (error) {
                    console.error('Âà†Èô§Â∑•Â∫èÂ§±Ë¥•:', error);
                    alert('Âà†Èô§Â§±Ë¥•ÔºåËØ∑ÈáçËØï');
                }
            }
        }

        // ÈáçÊñ∞ÁºñÂè∑Â∑•Â∫èËßÑÂàíË°®Ê†ºÁöÑÈ°∫Â∫èÂàó
        function reorderProcessSequence() {
            const processTable = document.getElementById('processPlanningTable');
            if (!processTable) return;
            
            const tbody = processTable.querySelector('tbody');
            if (!tbody) return;
            
            const rows = tbody.querySelectorAll('tr');
            rows.forEach((row, index) => {
                const orderCell = row.cells[0];
                if (orderCell) {
                    // Êõ¥Êñ∞ÊòæÁ§∫ÁöÑÈ°∫Â∫èÂè∑
                    const orderContent = orderCell.querySelector('div') || orderCell;
                    orderContent.textContent = (index + 1).toString();
                }
            });
        }

        // ‰∫∫ÂëòÊéíÁè≠Ê®°ÊÄÅÊ°ÜÂäüËÉΩ
        let currentEditingCell = null;
        let scheduleModal, closeModalBtn, cancelScheduleBtn, saveScheduleBtn, dayShiftSelect, nightShiftSelect;

        // Á°Æ‰øùDOMÂä†ËΩΩÂÆåÊàêÂêéÊâßË°å
        document.addEventListener('DOMContentLoaded', function() {
            // Ëé∑ÂèñÊ®°ÊÄÅÊ°ÜÁõ∏ÂÖ≥ÂÖÉÁ¥†
            scheduleModal = document.getElementById('scheduleModal');
            closeModalBtn = document.getElementById('closeScheduleModalBtn'); // ‰øÆÊ≠£id
            cancelScheduleBtn = document.getElementById('cancelScheduleBtn');
            saveScheduleBtn = document.getElementById('saveScheduleBtn');
            dayShiftSelect = document.getElementById('dayShift');
            nightShiftSelect = document.getElementById('nightShift');

            // ÂàùÂßãÂåñÂëòÂ∑•‰∏ãÊãâÊ°Ü
            initEmployeeSelects();

            // Ê∑ªÂä†‰∫ã‰ª∂ÁõëÂê¨Âô®
            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', closeScheduleModal);
            }

            if (cancelScheduleBtn) {
                cancelScheduleBtn.addEventListener('click', closeScheduleModal);
            }

            if (saveScheduleBtn) {
                saveScheduleBtn.addEventListener('click', saveSchedule);
            }

            // ÁÇπÂáªÊ®°ÊÄÅÊ°ÜÂ§ñÈÉ®ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
            if (scheduleModal) {
                scheduleModal.addEventListener('click', function(event) {
                    if (event.target === scheduleModal) {
                        closeScheduleModal();
                    }
                });
            }
            
            // ‰ªélocalStorageÂä†ËΩΩÊéíÁè≠Êï∞ÊçÆ
            loadScheduleFromLocalStorage();
            
            // Ê∏ÖÁ©∫ÊéíÁè≠Êï∞ÊçÆÊåâÈíÆ‰∫ã‰ª∂
            const clearScheduleBtn = document.getElementById('clear-schedule-btn');
            if (clearScheduleBtn) {
                clearScheduleBtn.addEventListener('click', function() {
                    if (confirm('Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫ÊâÄÊúâ‰∫∫ÂëòÊéíÁè≠ËÆ∞ÂΩïÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§çÔºÅ')) {
                        // Ê∏ÖÁ©∫localStorage‰∏≠ÁöÑÊéíÁè≠Êï∞ÊçÆ
                        localStorage.removeItem('productionSchedule');
                        
                        // Ê∏ÖÁ©∫Ë°®Ê†º‰∏≠ÁöÑÊâÄÊúâÊéíÁè≠Êï∞ÊçÆÊòæÁ§∫
                        const table = document.querySelector('#schedule-page table');
                        if (table) {
                            const tbody = table.querySelector('tbody');
                            if (tbody) {
                                // ÈÅçÂéÜÊâÄÊúâË°åÂíåÂçïÂÖÉÊ†ºÔºåÊ∏ÖÈô§ÊéíÁè≠Êï∞ÊçÆ
                                for (let i = 0; i < table.rows.length; i++) {
                                    for (let j = 0; j < table.rows[i].cells.length; j++) {
                                        const cell = table.rows[i].cells[j];
                                        if (cell.dataset.schedule) {
                                            delete cell.dataset.schedule;
                                            updateCellDisplay(cell, { dayShift: '', nightShift: '' });
                                        }
                                    }
                                }
                            }
                        }
                        
                        alert('ÊâÄÊúâ‰∫∫ÂëòÊéíÁè≠ËÆ∞ÂΩïÂ∑≤Ê∏ÖÁ©∫ÔºÅ');
                    }
                });
            }
        });
        
        // ‰ªélocalStorageÂä†ËΩΩÊéíÁè≠Êï∞ÊçÆ
        function loadScheduleFromLocalStorage() {
            const savedSchedule = localStorage.getItem('productionSchedule');
            if (savedSchedule) {
                try {
                    const scheduleData = JSON.parse(savedSchedule);
                    
                    // ÈÅçÂéÜ‰øùÂ≠òÁöÑÊéíÁè≠Êï∞ÊçÆ
                    for (const [key, data] of Object.entries(scheduleData)) {
                        const [rowIndex, colIndex] = key.split('-').map(Number);
                        
                        // Ëé∑ÂèñÂØπÂ∫îÁöÑÂçïÂÖÉÊ†º
                        const table = document.querySelector('#schedule-page table');
                        if (table && table.rows[rowIndex] && table.rows[rowIndex].cells[colIndex]) {
                            const cell = table.rows[rowIndex].cells[colIndex];
                            
                            // ËÆæÁΩÆÊéíÁè≠Êï∞ÊçÆÂπ∂Êõ¥Êñ∞ÊòæÁ§∫
                            cell.dataset.schedule = JSON.stringify(data);
                            updateCellDisplay(cell, data);
                        }
                    }
                } catch (e) {
                    console.error('Âä†ËΩΩÊéíÁè≠Êï∞ÊçÆÂ§±Ë¥•:', e);
                }
            }
        }

        // ÂàùÂßãÂåñÂëòÂ∑•‰∏ãÊãâÊ°Ü
        function initEmployeeSelects() {
            // ‰ªélocalStorageËé∑ÂèñÂëòÂ∑•Êï∞ÊçÆÔºàÊù•Ëá™ËÆ°‰ª∂Â∑•ËµÑÁ≥ªÁªüÔºâ
            const employeesFromStorage = JSON.parse(localStorage.getItem('employees') || '[]');
            
            // ËøáÊª§Âá∫Âú®ËÅåÂëòÂ∑•Ôºàstatus‰∏∫activeÔºâ
            const employees = employeesFromStorage
                .filter(emp => emp.status === 'active')
                .map(emp => ({
                    value: emp.code, // ‰ΩøÁî®ÂëòÂ∑•ÁºñÁ†Å‰Ωú‰∏∫value
                    text: emp.name    // ‰ΩøÁî®ÂëòÂ∑•ÂßìÂêç‰Ωú‰∏∫ÊòæÁ§∫ÊñáÊú¨
                }));

            // ‰∏∫ÁôΩÁè≠ÂíåÂ§úÁè≠‰∏ãÊãâÊ°ÜÊ∑ªÂä†ÈÄâÈ°π
            [dayShiftSelect, nightShiftSelect].forEach(select => {
                // Ê∏ÖÁ©∫Áé∞ÊúâÈÄâÈ°π
                select.innerHTML = '<option value="">ËØ∑ÈÄâÊã©ÂëòÂ∑•</option>';
                
                // Ê∑ªÂä†ÂëòÂ∑•ÈÄâÈ°π
                employees.forEach(emp => {
                    const option = document.createElement('option');
                    option.value = emp.value;
                    option.textContent = emp.text;
                    select.appendChild(option);
                });
            });
        }

        // ÊâìÂºÄÊéíÁè≠Ê®°ÊÄÅÊ°Ü
        function openScheduleModal(cell) {
            currentEditingCell = cell;
            scheduleModal.classList.remove('hidden');
            
            // ÂàùÂßãÂåñÂëòÂ∑•‰∏ãÊãâÊ°Ü
            initEmployeeSelects();
            
            // Â¶ÇÊûúÂçïÂÖÉÊ†ºÂ∑≤ÊúâÊéíÁè≠‰ø°ÊÅØÔºåÂ°´ÂÖÖÂà∞‰∏ãÊãâÊ°Ü
            if (cell.dataset.schedule) {
                try {
                    const scheduleData = JSON.parse(cell.dataset.schedule);
                    dayShiftSelect.value = scheduleData.dayShift || '';
                    nightShiftSelect.value = scheduleData.nightShift || '';
                } catch (e) {
                    // Ëß£ÊûêÂ§±Ë¥•ÔºåÊ∏ÖÁ©∫ÈÄâÊã©
                    dayShiftSelect.value = '';
                    nightShiftSelect.value = '';
                }
            } else {
                // Ê∏ÖÁ©∫ÈÄâÊã©
                dayShiftSelect.value = '';
                nightShiftSelect.value = '';
            }
        }

        // ÂÖ≥Èó≠ÊéíÁè≠Ê®°ÊÄÅÊ°Ü
        function closeScheduleModal() {
            scheduleModal.classList.add('hidden');
            currentEditingCell = null;
            // Ê∏ÖÁ©∫ÈÄâÊã©
            dayShiftSelect.value = '';
            nightShiftSelect.value = '';
        }

        // ‰øùÂ≠òÊéíÁè≠‰ø°ÊÅØ
        function saveSchedule() {
            if (!currentEditingCell) return;
            
            // Ëé∑ÂèñÈÄâÊã©ÁöÑÂëòÂ∑•
            const dayShift = dayShiftSelect.value;
            const nightShift = nightShiftSelect.value;
            
            // ÂàõÂª∫ÊéíÁè≠Êï∞ÊçÆÂØπË±°
            const scheduleData = {
                dayShift: dayShift,
                nightShift: nightShift
            };
            
            // ‰øùÂ≠òÂà∞ÂçïÂÖÉÊ†ºÁöÑdata-scheduleÂ±ûÊÄß
            currentEditingCell.dataset.schedule = JSON.stringify(scheduleData);
            
            // Êõ¥Êñ∞ÂçïÂÖÉÊ†ºÊòæÁ§∫
            updateCellDisplay(currentEditingCell, scheduleData);
            
            // ‰øùÂ≠òÂà∞localStorageÂÆûÁé∞ÊåÅ‰πÖÂåñ
            saveScheduleToLocalStorage();
            
            // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
            closeScheduleModal();
        }
        
        // Â∞ÜÊâÄÊúâÊéíÁè≠Êï∞ÊçÆ‰øùÂ≠òÂà∞localStorage
        function saveScheduleToLocalStorage() {
            const scheduleStorage = {};
            
            // ÈÅçÂéÜÊâÄÊúâÊéíÁè≠ÂçïÂÖÉÊ†º
            const scheduleCells = document.querySelectorAll('td.schedule-cell[data-schedule]');
            scheduleCells.forEach(cell => {
                // Ëé∑ÂèñË°åÂè∑ÂíåÂàóÂè∑‰Ωú‰∏∫ÂîØ‰∏ÄÊ†áËØÜ
                const row = cell.parentNode.rowIndex;
                const col = cell.cellIndex;
                const key = `${row}-${col}`;
                
                // ‰øùÂ≠òÊéíÁè≠Êï∞ÊçÆ
                scheduleStorage[key] = JSON.parse(cell.dataset.schedule);
            });
            
            // ‰øùÂ≠òÂà∞localStorage
            localStorage.setItem('productionSchedule', JSON.stringify(scheduleStorage));
        }

        // Êõ¥Êñ∞ÂçïÂÖÉÊ†ºÊòæÁ§∫ÂÜÖÂÆπ
        function updateCellDisplay(cell, scheduleData) {
            // Ëé∑ÂèñÂëòÂ∑•ÂêçÁß∞
            const getEmployeeName = (value) => {
                if (!value) return '';
                const option = [...dayShiftSelect.options].find(opt => opt.value === value);
                return option ? option.textContent : '';
            };
            
            // ÂàõÂª∫ÊòæÁ§∫ÂÜÖÂÆπ
            const dayShiftName = getEmployeeName(scheduleData.dayShift);
            const nightShiftName = getEmployeeName(scheduleData.nightShift);
            
            // Ê∏ÖÁ©∫ÂçïÂÖÉÊ†ºÂÜÖÂÆπ
            cell.innerHTML = '';
            
            // Â¶ÇÊûúÊúâÁôΩÁè≠ÊàñÂ§úÁè≠ÂÆâÊéíÔºåÊ∑ªÂä†ÊòæÁ§∫ÂÜÖÂÆπ
            if (dayShiftName || nightShiftName) {
                const contentDiv = document.createElement('div');
                contentDiv.className = 'text-xs text-center p-1 min-h-[40px] flex flex-col justify-center';
                contentDiv.style.whiteSpace = 'normal';
                contentDiv.style.wordBreak = 'break-word';
                
                if (dayShiftName) {
                    const daySpan = document.createElement('div');
                    daySpan.className = 'font-medium text-gray-800 whitespace-nowrap';
                    daySpan.textContent = `ÁôΩ: ${dayShiftName}`;
                    contentDiv.appendChild(daySpan);
                }
                
                if (nightShiftName) {
                    const nightSpan = document.createElement('div');
                    nightSpan.className = 'text-gray-600 whitespace-nowrap';
                    nightSpan.textContent = `Â§ú: ${nightShiftName}`;
                    contentDiv.appendChild(nightSpan);
                }
                
                cell.appendChild(contentDiv);
            }
        }


    </script>

    <!-- ÁºñËæëÂ∑•Â∫èÊ®°ÊÄÅÊ°Ü -->
    <div id="editProcessModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-11/12 max-w-lg shadow-lg rounded-md bg-white">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-medium text-gray-900">ÁºñËæëÂ∑•Â∫è</h3>
                <button onclick="closeEditProcessModal()" class="text-gray-400 hover:text-gray-600 focus:outline-none">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Â∑•Â∫èÁºñÂè∑</label>
                    <input type="text" id="editProcessId" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" placeholder="PROC-001">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Â∑•Â∫èÂêçÁß∞</label>
                    <input type="text" id="editProcessName" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" placeholder="Â∑•Â∫èÂêçÁß∞">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">È°∫Â∫è</label>
                    <input type="number" id="editProcessOrder" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" placeholder="1">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Ê†áÂáÜÂ∑•Êó∂</label>
                    <input type="text" id="editProcessTime" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary" placeholder="2Â∞èÊó∂">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ÊâÄÈúÄËÆæÂ§á</label>
                    <select id="editProcessEquipment" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary">
                        <option value="Êó†">Êó†</option>
                        <option value="ÊßΩÈí¢ÊäõÂÖâÊú∫">ÊßΩÈí¢ÊäõÂÖâÊú∫</option>
                        <option value="ÊâÅ‰∏ùÊäõÂÖâÊú∫">ÊâÅ‰∏ùÊäõÂÖâÊú∫</option>
                        <option value="ÂÜ≤Â∫ä">ÂÜ≤Â∫ä</option>
                        <option value="ÊàêÂûãÊú∫ÔºàÂ§ßÔºâ">ÊàêÂûãÊú∫ÔºàÂ§ßÔºâ</option>
                        <option value="ÊàêÂûãÊú∫ÔºàÂ∞èÔºâ">ÊàêÂûãÊú∫ÔºàÂ∞èÔºâ</option>
                        <option value="ÂçäËá™Âä®ÊàêÂûãÊú∫">ÂçäËá™Âä®ÊàêÂûãÊú∫</option>
                        <option value="ÂºØÁÆ°Êú∫">ÂºØÁÆ°Êú∫</option>
                        <option value="ÊâãÂ∑•Á¢∞ÁÑäÊú∫">ÊâãÂ∑•Á¢∞ÁÑäÊú∫</option>
                        <option value="ÈæôÈó®Á¢∞ÁÑäÊú∫">ÈæôÈó®Á¢∞ÁÑäÊú∫</option>
                        <option value="ÈæôÈó®ÊøÄÂÖâÁÑäÊú∫">ÈæôÈó®ÊøÄÂÖâÁÑäÊú∫</option>
                        <option value="ÊâãÂä®ÊøÄÂÖâÁÑäÊú∫">ÊâãÂä®ÊøÄÂÖâÁÑäÊú∫</option>
                        <option value="‰∏≠È¢ëËá™Âä®ÈÄÅÈíâÁÑäÊú∫">‰∏≠È¢ëËá™Âä®ÈÄÅÈíâÁÑäÊú∫</option>
                        <option value="‰∏≠È¢ëÊâãÂä®ÈÄÅÈíâÁÑäÊú∫">‰∏≠È¢ëÊâãÂä®ÈÄÅÈíâÁÑäÊú∫</option>
                        <option value="‰∏≠È¢ëÁ¢∞ÁÑäÊú∫">‰∏≠È¢ëÁ¢∞ÁÑäÊú∫</option>
                        <option value="ÊâìÂ≠îÊú∫">ÊâìÂ≠îÊú∫</option>
                        <option value="Á£®Â§¥Êú∫">Á£®Â§¥Êú∫</option>
                        <option value="ÊäõÂÖâÂ∑•‰ΩúÂè∞">ÊäõÂÖâÂ∑•‰ΩúÂè∞</option>
                    </select>
                </div>

            </div>
            <div class="flex justify-end space-x-3 mt-6">
                <button onclick="closeEditProcessModal()" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400">
                    ÂèñÊ∂à
                </button>
                <button onclick="saveProcessChanges()" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary/50">
                    ‰øùÂ≠ò
                </button>
            </div>
        </div>
    </div>

    <!-- Ê∑ªÂä†Â∑•Â∫èÊ®°ÊÄÅÊ°Ü -->
    <div id="addProcessModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full p-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold text-gray-800">Ê∑ªÂä†Â∑•Â∫è</h2>
                <button id="closeModalBtn" class="text-gray-400 hover:text-gray-600">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            
            <form id="addProcessForm" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="processId" class="block text-sm font-medium text-gray-700 mb-1">Â∑•Â∫èÁºñÂè∑</label>
                        <input type="text" id="processId" name="processId" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary bg-gray-50 cursor-not-allowed" placeholder="‰æãÂ¶ÇÔºöMIPT001" required readonly>
                    </div>
                    
                    <div>
                        <label for="processName" class="block text-sm font-medium text-gray-700 mb-1">Â∑•Â∫èÂêçÁß∞</label>
                        <input type="text" id="processName" name="processName" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary" placeholder="‰æãÂ¶ÇÔºöÊ®°ÊùøÂáÜÂ§á" required>
                    </div>
                    
                    <div>
                        <label for="sequence" class="block text-sm font-medium text-gray-700 mb-1">È°∫Â∫è</label>
                        <input type="number" id="sequence" name="sequence" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary bg-gray-50 cursor-not-allowed" min="1" required readonly>
                    </div>
                    
                    <div>
                        <label for="standardTime" class="block text-sm font-medium text-gray-700 mb-1">Ê†áÂáÜÂ∑•Êó∂</label>
                        <input type="number" id="standardTime" name="standardTime" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary" min="0" step="0.1" placeholder="‰æãÂ¶ÇÔºö4.5" required>
                    </div>
                    
                    <div>
                        <label for="requiredEquipment" class="block text-sm font-medium text-gray-700 mb-1">ÊâÄÈúÄËÆæÂ§á</label>
                        <select id="requiredEquipment" name="requiredEquipment" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary" required>
                            <option value="">ËØ∑ÈÄâÊã©ËÆæÂ§á</option>
                            <option value="Êó†">Êó†</option>
                            <option value="ÊßΩÈí¢ÊäõÂÖâÊú∫">ÊßΩÈí¢ÊäõÂÖâÊú∫</option>
                            <option value="ÊâÅ‰∏ùÊäõÂÖâÊú∫">ÊâÅ‰∏ùÊäõÂÖâÊú∫</option>
                            <option value="ÂÜ≤Â∫ä">ÂÜ≤Â∫ä</option>
                            <option value="ÊàêÂûãÊú∫ÔºàÂ§ßÔºâ">ÊàêÂûãÊú∫ÔºàÂ§ßÔºâ</option>
                            <option value="ÊàêÂûãÊú∫ÔºàÂ∞èÔºâ">ÊàêÂûãÊú∫ÔºàÂ∞èÔºâ</option>
                            <option value="ÂçäËá™Âä®ÊàêÂûãÊú∫">ÂçäËá™Âä®ÊàêÂûãÊú∫</option>
                            <option value="ÂºØÁÆ°Êú∫">ÂºØÁÆ°Êú∫</option>
                            <option value="ÊâãÂ∑•Á¢∞ÁÑäÊú∫">ÊâãÂ∑•Á¢∞ÁÑäÊú∫</option>
                            <option value="ÈæôÈó®Á¢∞ÁÑäÊú∫">ÈæôÈó®Á¢∞ÁÑäÊú∫</option>
                            <option value="ÈæôÈó®ÊøÄÂÖâÁÑäÊú∫">ÈæôÈó®ÊøÄÂÖâÁÑäÊú∫</option>
                            <option value="ÊâãÂä®ÊøÄÂÖâÁÑäÊú∫">ÊâãÂä®ÊøÄÂÖâÁÑäÊú∫</option>
                            <option value="‰∏≠È¢ëËá™Âä®ÈÄÅÈíâÁÑäÊú∫">‰∏≠È¢ëËá™Âä®ÈÄÅÈíâÁÑäÊú∫</option>
                            <option value="‰∏≠È¢ëÊâãÂä®ÈÄÅÈíâÁÑäÊú∫">‰∏≠È¢ëÊâãÂä®ÈÄÅÈíâÁÑäÊú∫</option>
                            <option value="‰∏≠È¢ëÁ¢∞ÁÑäÊú∫">‰∏≠È¢ëÁ¢∞ÁÑäÊú∫</option>
                            <option value="ÊâìÂ≠îÊú∫">ÊâìÂ≠îÊú∫</option>
                            <option value="Á£®Â§¥Êú∫">Á£®Â§¥Êú∫</option>
                            <option value="ÊäõÂÖâÂ∑•‰ΩúÂè∞">ÊäõÂÖâÂ∑•‰ΩúÂè∞</option>
                        </select>
                    </div>
                    

                </div>
                
                <div class="flex justify-end space-x-3 pt-4">
                    <button type="button" id="cancelBtn" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">ÂèñÊ∂à</button>
                    <button type="submit" class="px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-primary hover:bg-blue-800">‰øùÂ≠òÂ∑•Â∫è</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ÊéíÁè≠Ê®°ÊÄÅÊ°Ü -->
    <div id="scheduleModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full p-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold text-gray-800">ÂëòÂ∑•ÊéíÁè≠</h2>
                <button id="closeScheduleModalBtn" class="text-gray-400 hover:text-gray-600">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <!-- ÁôΩÁè≠ÈÄâÊã© -->
                <div class="flex items-center justify-between">
                    <label for="dayShift" class="block text-sm font-medium text-gray-700">ÁôΩÁè≠</label>
                    <select id="dayShift" class="w-1/2 px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary">
                        <option value="">ËØ∑ÈÄâÊã©ÂëòÂ∑•</option>
                        <!-- ÂëòÂ∑•ÈÄâÈ°πÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                    </select>
                </div>
                
                <!-- Â§úÁè≠ÈÄâÊã© -->
                <div class="flex items-center justify-between">
                    <label for="nightShift" class="block text-sm font-medium text-gray-700">Â§úÁè≠</label>
                    <select id="nightShift" class="w-1/2 px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary">
                        <option value="">ËØ∑ÈÄâÊã©ÂëòÂ∑•</option>
                        <!-- ÂëòÂ∑•ÈÄâÈ°πÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                    </select>
                </div>
                
                <div class="flex justify-end space-x-3 pt-4">
                    <button type="button" id="cancelScheduleBtn" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">ÂèñÊ∂à</button>
                    <button type="button" id="saveScheduleBtn" class="px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-primary hover:bg-blue-800">‰øùÂ≠òÊéíÁè≠</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Â§á‰ªΩÂíåÊÅ¢Â§çÂäüËÉΩÂ∑≤Á¶ÅÁî® -->
    <script>
        /*
        // Â§á‰ªΩÂäüËÉΩ
        function backupData() {
            try {
                const backupData = {
                    orderProcesses: JSON.parse(localStorage.getItem('orderProcesses') || '[]'),
                    productionProcesses: JSON.parse(localStorage.getItem('productionProcesses') || '[]'),
                    processData: JSON.parse(localStorage.getItem('processData') || '[]'),
                    orders: JSON.parse(localStorage.getItem('orders') || '[]'),
                    productionOrderList: JSON.parse(localStorage.getItem('productionOrderList') || '[]'),
                    productionSchedule: JSON.parse(localStorage.getItem('productionSchedule') || '{}'),
                    employees: JSON.parse(localStorage.getItem('employees') || '[]'),
                    memos: JSON.parse(localStorage.getItem('memos') || '[]'),
                    backupTime: new Date().toISOString()
                };
                
                const dataStr = JSON.stringify(backupData, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                
                const link = document.createElement('a');
                link.href = url;
                link.download = `Áîü‰∫ßËÆ°ÂàíÂÆâÊéí_Â§á‰ªΩ_${new Date().toISOString().slice(0, 19).replace(/[:.]/g, '-')}.json`;
                link.click();
                
                URL.revokeObjectURL(url);
                
                alert('Â§á‰ªΩÊàêÂäüÔºÅ');
            } catch (error) {
                console.error('Â§á‰ªΩÊï∞ÊçÆÊó∂Âá∫Èîô:', error);
                alert('Â§á‰ªΩÂ§±Ë¥•: ' + error.message);
            }
        }
        
        // ÊÅ¢Â§çÂäüËÉΩ
        function restoreData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const restoreData = JSON.parse(e.target.result);
                        
                        if (confirm('Á°ÆÂÆöË¶ÅÊÅ¢Â§çÊï∞ÊçÆÂêóÔºüËøôÂ∞ÜË¶ÜÁõñÂΩìÂâçÊâÄÊúâÊï∞ÊçÆÔºÅ')) {
                            // ÊÅ¢Â§çÊâÄÊúâÊï∞ÊçÆ
                            if (restoreData.orderProcesses) localStorage.setItem('orderProcesses', JSON.stringify(restoreData.orderProcesses));
                            if (restoreData.productionProcesses) localStorage.setItem('productionProcesses', JSON.stringify(restoreData.productionProcesses));
                            if (restoreData.processData) localStorage.setItem('processData', JSON.stringify(restoreData.processData));
                            if (restoreData.orders) localStorage.setItem('orders', JSON.stringify(restoreData.orders));
                            if (restoreData.productionOrderList) localStorage.setItem('productionOrderList', JSON.stringify(restoreData.productionOrderList));
                            if (restoreData.productionSchedule) localStorage.setItem('productionSchedule', JSON.stringify(restoreData.productionSchedule));
                            if (restoreData.employees) localStorage.setItem('employees', JSON.stringify(restoreData.employees));
                            if (restoreData.memos) localStorage.setItem('memos', JSON.stringify(restoreData.memos));
                            
                            // ÈáçÊñ∞Âä†ËΩΩÈ°µÈù¢‰ª•ÊòæÁ§∫ÊÅ¢Â§çÂêéÁöÑÊï∞ÊçÆ
                            location.reload();
                        }
                    } catch (error) {
                        console.error('Ëß£ÊûêÂ§á‰ªΩÊñá‰ª∂Êó∂Âá∫Èîô:', error);
                        alert('ÊÅ¢Â§çÂ§±Ë¥•: Â§á‰ªΩÊñá‰ª∂Ê†ºÂºè‰∏çÊ≠£Á°Æ');
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }
        
        // Ëá™Âä®Â§á‰ªΩÂäüËÉΩ
        function autoBackup() {
            try {
                const backupData = {
                    orderProcesses: JSON.parse(localStorage.getItem('orderProcesses') || '[]'),
                    productionProcesses: JSON.parse(localStorage.getItem('productionProcesses') || '[]'),
                    processData: JSON.parse(localStorage.getItem('processData') || '[]'),
                    orders: JSON.parse(localStorage.getItem('orders') || '[]'),
                    productionOrderList: JSON.parse(localStorage.getItem('productionOrderList') || '[]'),
                    productionSchedule: JSON.parse(localStorage.getItem('productionSchedule') || '{}'),
                    employees: JSON.parse(localStorage.getItem('employees') || '[]'),
                    memos: JSON.parse(localStorage.getItem('memos') || '[]'),
                    backupTime: new Date().toISOString()
                };
                
                const dataStr = JSON.stringify(backupData, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                
                const link = document.createElement('a');
                link.href = url;
                link.download = `Áîü‰∫ßËÆ°ÂàíÂÆâÊéí_Ëá™Âä®Â§á‰ªΩ_${new Date().toISOString().slice(0, 19).replace(/[:.]/g, '-')}.json`;
                link.click();
                
                URL.revokeObjectURL(url);
            } catch (error) {
                console.error('Ëá™Âä®Â§á‰ªΩÊï∞ÊçÆÊó∂Âá∫Èîô:', error);
            }
        }
        
        // Ê∑ªÂä†Â§á‰ªΩÂíåÊÅ¢Â§çÊåâÈíÆÂà∞È°µÈù¢Âè≥‰∏äËßí
        function addBackupRestoreButtons() {
            const backupRestoreDiv = document.createElement('div');
            backupRestoreDiv.className = 'backup-restore-buttons';
            backupRestoreDiv.style.cssText = `
                position: fixed;
                top: 10px;
                right: 10px;
                z-index: 1000;
                display: flex;
                gap: 10px;
            `;
            
            const backupBtn = document.createElement('button');
            backupBtn.innerHTML = '<i class="fa fa-download"></i> Â§á‰ªΩÊï∞ÊçÆ';
            backupBtn.className = 'bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded';
            backupBtn.onclick = backupData;
            
            const restoreBtn = document.createElement('button');
            restoreBtn.innerHTML = '<i class="fa fa-upload"></i> ÊÅ¢Â§çÊï∞ÊçÆ';
            restoreBtn.className = 'bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded';
            restoreBtn.onclick = restoreData;
            
            backupRestoreDiv.appendChild(backupBtn);
            backupRestoreDiv.appendChild(restoreBtn);
            
            document.body.appendChild(backupRestoreDiv);
        }
        
        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÊ∑ªÂä†ÊåâÈíÆ
        document.addEventListener('DOMContentLoaded', function() {
            addBackupRestoreButtons();
        });
        */
        
        // È°µÈù¢ÂÖ≥Èó≠Êó∂Ëá™Âä®Â§á‰ªΩÂäüËÉΩÂ∑≤Á¶ÅÁî®
        /*
        window.addEventListener('beforeunload', function() {
            autoBackup();
        });
        */
    </script>
    

</body>
</html>

